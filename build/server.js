module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=34)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("styled-components")},function(e,t){e.exports=require("@babel/runtime/helpers/taggedTemplateLiteral")},function(e,t){e.exports=require("@babel/runtime/helpers/slicedToArray")},function(e,t){e.exports=require("@babel/runtime/regenerator")},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("react-feather")},function(e,t){e.exports=require("@babel/runtime/helpers/asyncToGenerator")},function(e,t){e.exports=require("@babel/runtime/helpers/defineProperty")},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("@babel/runtime/helpers/extends")},function(e,t){e.exports=require("react-router")},function(e,t){e.exports=require("@babel/runtime/helpers/objectWithoutProperties")},function(e,t){e.exports=require("@babel/runtime/helpers/toConsumableArray")},function(e,t){e.exports=require("@stripe/react-stripe-js")},function(e,t){e.exports=require("react-loader-spinner")},function(e,t){e.exports=require("redux")},function(e,t){e.exports=require("lodash")},function(e){e.exports=JSON.parse('{"views":{"addressForm":[{"placeholder":"","label":"Title","type":"text","name":"customer_title","width":"20%","required":true,"value":"customer_title"},{"placeholder":"","label":"Firstname","type":"text","name":"customer_firstname","width":"40%","required":true,"value":"customer_firstname"},{"placeholder":"","label":"Lastname","type":"text","name":"customer_lastname","width":"40%","required":true,"value":"customer_lastname"},{"placeholder":"","label":"Address 1","type":"text","name":"customer_address1","width":"50%","require":true,"value":"customer_address1"},{"placeholder":"","label":"Address 2","type":"text","name":"customer_address2","width":"50%","value":"customer_address2"},{"placeholder":"","label":"Town / City","type":"text","name":"customer_town","width":"50%","required":true,"value":"customer_town"},{"placeholder":"","label":"Postcode","type":"text","name":"customer_postcode","width":"30%","required":true,"value":"customer_postcode"}],"login":[{"placeholder":"example@gmail.com","label":"Email Address","type":"email","name":"email","required":true},{"placeholder":"*********","label":"Password","type":"password","name":"password","required":true}],"register":[{"placeholder":"Your Username","label":"Username","type":"text","name":"username","required":true},{"placeholder":"example@gmail.com","label":"Email Address","type":"text","name":"email"},{"placeholder":"*********","label":"Password","type":"password","name":"password"},{"placeholder":"*********","label":"Confirm Password","type":"password","name":"password_confirmation"}],"forgot-password":[{"placeholder":"example@gmail.com","label":"Email Address","type":"text","name":"email"}]}}')},function(e,t){e.exports=require("moment")},function(e,t){e.exports=require("@babel/runtime/helpers/getPrototypeOf")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("universal-cookie")},function(e,t){e.exports=require("react-dom")},function(e,t){e.exports=require("fuse.js")},function(e,t){e.exports=require("@babel/runtime/helpers/classCallCheck")},function(e,t){e.exports=require("@babel/runtime/helpers/createClass")},function(e,t){e.exports=require("@babel/runtime/helpers/inherits")},function(e,t){e.exports=require("@babel/runtime/helpers/possibleConstructorReturn")},function(e,t){e.exports=require("jspdf")},function(e,t){e.exports=require("@stripe/stripe-js")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("stripe")},function(e,t,n){e.exports=n(35)},function(e,t,n){"use strict";n.r(t);var r=n(22),a=n.n(r),o=n(41).default;a.a.createServer(o).listen(3e3,(function(){console.log("ðŸš€ started")})).on("error",(function(e){console.log(e)}))},function(e,t){e.exports=require("promise-retry")},function(e,t){e.exports={}},function(e,t){e.exports={}},function(e,t){e.exports=require("path")},function(e){e.exports=JSON.parse('{"client":{"css":"/static/css/bundle.bba4ade1.css","js":"/static/js/bundle.c26024bf.js"},"":{"json":["/../chunks.json","/manifest.json"],"png":["/icon_114x114.dd54050e25b8bb58d0e2433dc2995cad.png","/icon_120x120.715eb318ff340e017ccca08c2db15cb8.png","/icon_144x144.1643b60b2714dd369e453ca884897666.png","/icon_152x152.ca9cd38e55fddd88570518e8c0299f23.png","/icon_16x16.7c16fadb7ec472d485127634f14a015e.png","/icon_180x180.8e34bc6d815173fe01ec33c77c5f660f.png","/icon_192x192.1dec1dd565712cd97bd9fa828bcb356c.png","/icon_32x32.ed670ba65ef48bbcfbd0d9792d944fb5.png","/icon_36x36.597833536f5dbb41bee82cd6d5e738cc.png","/icon_48x48.ee7db214ca94e210a7b9df96b9175c7a.png","/icon_57x57.0d199f525995ac794fa2af8b5ff15366.png","/icon_60x60.754cd5221c4be7447b6f4d2d4a5b5e18.png","/icon_72x72.f2d5307ca029e33b222a21552a08a109.png","/icon_76x76.22d7b8a972a188f00270debd7f411358.png","/icon_96x96.d79ec2402bdb8483fb8fe9415dbf9d1e.png"],"js":["/precache-manifest.da83e7026edbb637ba3373d2eddee456.js","/static/js/1.b9ddca6a.chunk.js","/static/js/2.5784441e.chunk.js","/static/js/3.561ebf46.chunk.js","/sw.js"],"txt":["/static/js/1.b9ddca6a.chunk.js.LICENSE.txt","/static/js/2.5784441e.chunk.js.LICENSE.txt","/static/js/3.561ebf46.chunk.js.LICENSE.txt","/static/js/bundle.c26024bf.js.LICENSE.txt"]}}')},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(16),c=n(5),i=n(9),l=n(8),u=n.n(l);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={products:[]};function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={user:{}};function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E={basket:{products:[],total:0,postage:0,carrierId:null}};function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w={currentProduct:{}};function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k={searchResults:[]},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_SEARCH":return S(S({},e),{},{searchResults:t.payload});default:return e}};function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T={orders:{}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ORDERS":return C(C({},e),{},{orders:t.payload});default:return e}},I=Object(o.combineReducers)({currentProduct:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PRODUCT":return O(O({},e),{},{currentProduct:t.payload});default:return e}},products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(console.log("FETCH",t.payload),console.log("CATEGORIES ",e.categories),console.log("state should be ",t.payload),t.type){case"FETCH_PRODUCTS":return p(p({},e),{},{products:t.payload});default:return e}},basket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(console.log("ADDING",t.payload),t.type){case"SET_INITIAL_BASKET":case"ADD_TO_BASKET":return b(b({},e),{},{basket:{products:t.payload}});case"REMOVE_FROM_BASKET":return b(b({},e),{},{basket:{products:e.basket.products.filter((function(e){return e._id!=t.payload._id}))}});case"UPDATE_TOTAL":return b(b({},e),{},{total:t.payload});case"SET_POSTAGE":return b(b({},e),{},{basket:b(b({},e.basket),{},{postage:t.payload.shipping_cost,carrierId:t.payload.id})});default:return e}},categories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CATEGORIES":return y(y({},e),{},{categories:t.payload});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_SESSION":return m(m({},e),{},{user:t.payload});case"END_USER_SESSION":return m(m({},e),{},{user:{}});default:return e}},searchResults:_,orders:D}),R=n(4),A=n.n(R),F=n(7),N=n.n(F),z=n(3),G=n.n(z),L=n(2),U=n.n(L),B=n(1),q=n.n(B),M="#95DCCB",H="#79CBB7",Y="#F19AFF",K="#E963FF",V="#77E5FF",W="#1E1C1C",J="#0D0D0D",X="#535151",Q="#837D7D",$="#C2C1C1",Z="#DBDBDB",ee="#F7F2F2",te="#C4C4C4",ne=[{size:230,opac:.6,x:10,t:500},{size:170,opac:.4,x:200,t:680},{size:190,opac:.2,x:1160,t:530},{size:120,opac:.3,x:800,t:690},{size:60,opac:.2,x:920,t:790},{size:50,opac:.7,x:80,t:900,dark:"yes"},{size:120,opac:.7,x:160,t:950,dark:"yes"}],re=[{size:30,opac:.2,x:290,t:310},{size:90,opac:.4,x:350,t:320},{size:60,opac:.2,x:850,t:130},{size:120,opac:.2,x:750,t:190},{size:30,opac:.2,x:910,t:230},{size:120,opac:.2,x:990,t:320},{size:30,opac:.2,x:380,t:390,dark:"yes"},{size:100,opac:.1,x:260,t:400,dark:"yes"}],ae=[{size:30,opac:.2,x:290,t:1110,dark:"yes"},{size:90,opac:.2,x:350,t:1120,dark:"yes"},{size:60,opac:.2,x:850,t:1030,dark:"yes"},{size:120,opac:.2,x:750,t:1090,dark:"yes"},{size:30,opac:.4,x:910,t:1130,dark:"yes"},{size:120,opac:.2,x:990,t:1220,dark:"yes"},{size:40,opac:.4,x:210,t:1260,dark:"yes"},{size:120,opac:.2,x:260,t:1300,dark:"yes"},{size:120,opac:.2,x:1290,t:1020,dark:"yes"},{size:40,opac:.4,x:1210,t:1260,dark:"yes"},{size:60,opac:.2,x:1400,t:1300,dark:"yes"},{size:30,opac:.2,x:350,t:1520,dark:"yes"},{size:30,opac:.2,x:290,t:1910,dark:"yes"},{size:90,opac:.2,x:350,t:1920,dark:"yes"},{size:60,opac:.2,x:850,t:1830,dark:"yes"},{size:120,opac:.2,x:750,t:1890,dark:"yes"},{size:30,opac:.4,x:910,t:1930,dark:"yes"},{size:120,opac:.2,x:990,t:1920,dark:"yes"},{size:40,opac:.4,x:210,t:1960,dark:"yes"},{size:120,opac:.2,x:260,t:2100,dark:"yes"},{size:120,opac:.2,x:1290,t:1820,dark:"yes"},{size:40,opac:.4,x:1210,t:2060,dark:"yes"},{size:60,opac:.2,x:1400,t:2e3,dark:"yes"},{size:30,opac:.2,x:350,t:2320,dark:"yes"}];function oe(){var e=U()([" grid-area: 3 / 4 / 4 / 5; padding: 20px 20px; "]);return oe=function(){return e},e}function ce(){var e=U()([" grid-area: footer;\n                border-top: 1px solid #333;\n                padding: 20px;\n"]);return ce=function(){return e},e}function ie(){var e=U()([" grid-area: product_total; padding: 50px 20px;"]);return ie=function(){return e},e}function le(){var e=U()(["grid-area: product_qty; padding: 50px 20px;"]);return le=function(){return e},e}function ue(){var e=U()([" padding: 50px 20px; grid-area: Product_name"]);return ue=function(){return e},e}function se(){var e=U()(["\n                grid-area: Address;\n                padding: 20px;\n                border-bottom: 1px solid #333;\n                "]);return se=function(){return e},e}function pe(){var e=U()(["\n                    grid-area: Logo;\n                    display: flex;\n                    flex-direction: row;\n                    padding: 0px 20px;\n                    border-bottom: 1px solid #333;\n                    "]);return pe=function(){return e},e}function de(){var e=U()(['\n     width: 591px;\n     height: 538px;\n     padding: 4px;\n     display: grid;\n     grid-template-columns: 1fr 1fr 1fr 1fr;\n     grid-template-rows: 0.3fr 1.6fr 0.6fr 1fr;\n     gap: 0px 0px;\n     grid-template-areas:\n    "Logo Logo Address Address"\n    "Product_name Product_name product_qty product_total"\n    "footer footer footer footer";\n']);return de=function(){return e},e}function fe(){var e=U()(["\n        margin-bottom: ",";\n    "]);return fe=function(){return e},e}function me(){var e=U()(["\n    width: 100%;\n    height: 1px;\n    background-color: ",";\n    ","\n"]);return me=function(){return e},e}function ge(){var e=U()(["\n    margin-top: 20px;\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-end;\n    float: right;\n    width: 100%;\n"]);return ge=function(){return e},e}function he(){var e=U()(["\n    flex: 0.5;\n    height: 70px;\n    ","\n    display: flex;\n    justify-content: space-between;\n    margin-top: 30px;\n    padding: 20px 0px;\n    border-top: 1px solid ",";\n"]);return he=function(){return e},e}function be(){var e=U()(["\n    flex: 6;\n"]);return be=function(){return e},e}function Ee(){var e=U()(["\n        padding: 40px 0px;\n        flex: 1;\n"]);return Ee=function(){return e},e}function xe(){var e=U()(["\n    margin: 150px auto 50px auto;\n    max-width: 650px;\n    padding: 40px 50px;\n    border: 1px solid #DBDBDB;\n    border-radius: 25px;\n    min-height: 320px;\n    display: flex;\n    justify-content: space-between;\n    flex-direction: column;\n"]);return xe=function(){return e},e}function ye(){var e=U()(["\n    position: relative;\n    max-width: 1294px;\n    margin: 0px auto;\n    padding: 140px 100px 90px 100px;\n    background-color: white;\n    display: flex;\n    flex-flow: row wrap;\n    justify-content: space-between;\n    overflowX: hidden;\n    z-index: 2;\n    background-color: transparent;\n    ","\n    ","\n"]);return ye=function(){return e},e}function ve(){var e=U()(["\n    width: 100%;\n    height: 800px;\n    color: white;\n    overflow: hidden;\n    background-color: ",";\n"]);return ve=function(){return e},e}function Oe(){var e=U()(["\n    margin-top: ","px;\n    "]);return Oe=function(){return e},e}function we(){var e=U()(["\n        max-Width: ","px;\n    "]);return we=function(){return e},e}function je(){var e=U()(["\n    max-width: 1294px;\n    margin: 0px auto;\n    overflow: hidden;\n    ","\n    ","\n"]);return je=function(){return e},e}function Se(){var e=U()(["\n      background-color: white;\n    "]);return Se=function(){return e},e}function ke(){var e=U()(["\n      background-color: ",";\n    "]);return ke=function(){return e},e}function _e(){var e=U()(["\n      height: ","px;\n    "]);return _e=function(){return e},e}function Pe(){var e=U()(["\n        padding: 0px 50px 50px 50px;\n        "]);return Pe=function(){return e},e}function Ce(){var e=U()(["\n    max-width: 100%;\n    background-color: ",";\n    min-height: 0px;\n    padding: 50px 50px 50px 50px;\n    overflowX: hidden;\n    z-index: -1;\n    ","\n    ","\n    ","\n    ","\n    overflow: hidden;\n"]);return Ce=function(){return e},e}function Te(){var e=U()(["\n        max-width: 100%;\n        background-color: ",";\n        "]);return Te=function(){return e},e}function De(){var e=U()(["\n  width: 100%;\n  margin-left: auto;\n  margin-right: auto;\n  overflowX: hidden;\n  position: relative;\n  ","\n"]);return De=function(){return e},e}var Ie=q.a.div(De(),(function(e){return e.location&&/product|checkout/.test(e.location)&&!0===e.nav&&Object(B.css)(Te(),M)})),Re=q.a.div(Ce(),M,(function(e){return e.narrow&&Object(B.css)(Pe())}),(function(e){return e.height&&Object(B.css)(_e(),e.height)}),(function(e){return e.dark&&Object(B.css)(ke(),M)}),(function(e){return e.light&&Object(B.css)(Se())})),Ae=q.a.div(je(),(function(e){return e.width&&Object(B.css)(we(),e.width)}),(function(e){return e.mt&&Object(B.css)(Oe(),e.mt)})),Fe=q.a.div(ve(),M),Ne=q.a.div(ye(),(function(e){return e.dark&&"\n        background-color: ".concat(M,";\n    ")}),(function(e){return e.mb&&"\n        margin-bottom: ".concat(e.mb,";\n    ")})),ze=q.a.div(xe()),Ge=q.a.div(Ee()),Le=q.a.div(be()),Ue=q.a.div(he(),"",Z),Be=q.a.div(ge()),qe=q.a.div(me(),Z,(function(e){return e.mb&&Object(B.css)(fe(),e.mb)})),Me=q.a.div(de()),He=q.a.div(pe()),Ye=q.a.div(se()),Ke=q.a.div(ue()),Ve=q.a.div(le()),We=q.a.div(ie()),Je=q.a.div(ce()),Xe=q.a.div(oe()),Qe=n(17),$e=n.n(Qe),Ze=n(19),et=n.n(Ze),tt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e.length){var r=e.map((function(e){return e.total_price})),a=r.reduce((function(e,t){return e+t})),o=a+t+n;return o}return 0},nt=function(e){return $e.a.isEmpty(e)},rt=n(6),at=function(e){var t,n=e.order,o=n.order_total,c=n.createdAt,i=n._id,l=n.order_items,u=n.order_customer,s=u.customer_firstname,p=u.customer_lastname,d=Object(r.useState)(null),f=G()(d,2),m=f[0],g=f[1];return console.log("ORDER_ITEM ",o),a.a.createElement("div",null,a.a.createElement("div",{style:{padding:"5px 90px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:"1px",justifyItems:"left",borderBottom:"2px solid ".concat(te)}},a.a.createElement("div",null,(t=c,console.log("FN DATE",t),console.log(et()(Date(t)).format("dd MMM Do")),et()(t).format("ddd MMM Do"))),a.a.createElement("div",null,"$ ",o),a.a.createElement("div",null,s," ",p),a.a.createElement("div",null,n.order_carrier.shipping_carrier),a.a.createElement("div",null,a.a.createElement("button",{secondary:!0,sml:!0,onClick:function(){g(m===i?null:i)}},null===m?a.a.createElement(rt.MoreHorizontal,null):a.a.createElement(rt.ChevronUp,null)))),a.a.createElement("div",null,a.a.createElement(ot,{items:l,id:i,item:m})))},ot=function(e){var t=e.items.products,n=e.item,r=e.id;console.log("ORDER DEETS ",e);return a.a.createElement("div",{style:{marginBotton:"50",padding:"10px 90px",transition:"all 0.3s ease-in"},className:n===r?"visible":"hidden"},a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginBottom:"10px",borderBottom:"1px solid black"}},a.a.createElement("div",{style:{width:"100%"}},"Product"),a.a.createElement("div",{style:{width:"100%"}},"Price"),a.a.createElement("div",{style:{width:"100%"}},"Quantity"),a.a.createElement("div",{style:{width:"100%"}},"Total Price")),t&&t.map((function(e,t){return a.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",flexBasis:1,flexGrow:1},key:e._id},a.a.createElement("div",{style:{width:"100%"}},e.product_name),a.a.createElement("div",{style:{width:"100%"}},"$",e.product_price),a.a.createElement("div",{style:{width:"100%"}},e.product_qty),a.a.createElement("div",{style:{width:"100%"}},"$",e.total_price.toFixed(2)))})),a.a.createElement("div",{style:{display:"flex",flexDirection:"row",borderTop:"1px solid black",margin:"10px 0px",justifyContent:"space-around",padding:"10px 0px",alignItems:"center"}},a.a.createElement("div",{style:{width:"100%"}}),a.a.createElement("div",{style:{width:"100%"}}),a.a.createElement("div",{style:{width:"100%"}}),a.a.createElement("div",{style:{width:"100%"}},a.a.createElement(i.Link,{to:"/admin/invoices/".concat(r)},"View Invoice: ",a.a.createElement(rt.FileText,null))))))},ct=n(23),it=new(n.n(ct).a),lt=JSON.parse,ut=JSON.stringify,st={clear:function(e){return localStorage&&localStorage.getItem(e)?localStorage.removeItem(e):sessionStorage&&sessionStorage.getItem(e)?sessionStorage.removeItem(e):null},clearAppStorage:function(){return localStorage?localStorage.clear():sessionStorage?sessionStorage.clear():void 0},clearUser:function(){console.log("TOKEN CLEARER "),this.clearUserInfo(),this.clearToken()},clearToken:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"jwtToken";return st.clear(e)},clearUserInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"userInfo";return st.clear(e)},get:function(e){return localStorage&&localStorage.getItem(e)?lt(localStorage.getItem(e))||null:sessionStorage&&sessionStorage.getItem(e)&&lt(sessionStorage.getItem(e))||null},getToken:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"jwtToken";return st.get(e)},getUserInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"userInfo";return st.get(e)},set:function(e,t,n){return Object(Qe.isEmpty)(e)?null:(it.set(t,ut(e)),n&&localStorage?localStorage.setItem(t,ut(e)):sessionStorage?sessionStorage.setItem(t,ut(e)):null)},setToken:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"jwtToken";return st.set(e,n,t)},setUserInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"userInfo";return st.set(e,n,t)}},pt=st;function dt(e){return e.json?e.json():e}function ft(e){return e.status>=200&&e.status<300?e:dt(e).then((function(t){var n=new Error(e.statusText);throw n.response=e,n.response.payload=t,n}))}function mt(e){return Object.keys(e).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))})).join("&")}function gt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];console.log("REQUEST FUNCTION ",e,t),n&&(t.headers=Object.assign({"Content-Type":"application/json"},t.headers,{}));var r=pt.getToken();if(r&&(t.headers=Object.assign({Authorization:"Bearer ".concat(r)},t.headers)),t&&t.params){var a=mt(t.params);e="".concat(e,"?").concat(a)}return t&&t.body&&n&&(t.body=JSON.stringify(t.body)),fetch(e,t).then(ft).then(dt)}n(36);var ht=function(e,t,n){var r=arguments;return N()(A.a.mark((function a(){var o,c,i,l,u,s,p,d;return A.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=r.length>3&&void 0!==r[3]?r[3]:"protected",c="https://chunky-soap-api.herokuapp.com",a.next=4,JSON.parse(sessionStorage.getItem("jwtToken"));case 4:return i=a.sent,console.log("TOKEN ",i),l="".concat(c),(u=new Headers).append("Content-Type","application/json"),""!==i&&"public"!==o&&u.append("Authorization","Bearer ".concat(i)),s=JSON.stringify(n),console.log("raw data ",s),p={method:t,headers:u,mode:"cors",credentials:"omit",body:s,redirect:"follow"},d=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,a=[404,401,408,500,502,503,504,522,524];return fetch(t,n).then((function(o){if(console.log("STATUS",o.status),200===o.status)return o.json();if(r>0&&a.includes(o.status))return console.log("retries ",r),e(t,n,r-1);throw new Error(o)})).catch((function(a){if(console.log(a),0!==r)return e(t,n,r-1)}))},a.abrupt("return",d("".concat(l).concat(e),p));case 15:case"end":return a.stop()}}),a)})))()},bt={login:function(e,t){return N()(A.a.mark((function n(){var r;return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return"https://chunky-soap-api.herokuapp.com",n.prev=1,console.log("STRAPI LOGIN ",e),n.next=5,gt("".concat("https://chunky-soap-api.herokuapp.com","/auth/local/"),{method:"POST",body:e});case 5:return r=n.sent,console.log("STRAPI RESPONSE ",r),pt.setToken(r.jwt,e.rememberMe),pt.setUserInfo(r.user,e.rememberMe),t({type:"SET_USER_SESSION",payload:r}),n.abrupt("return",r);case 13:return n.prev=13,n.t0=n.catch(1),n.abrupt("return",{status:400,message:n.t0});case 16:case"end":return n.stop()}}),n,null,[[1,13]])})))()},register:function(e,t){var n=this;return N()(A.a.mark((function r(){var a;return A.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return"https://chunky-soap-api.herokuapp.com",r.prev=1,r.next=4,gt("".concat("https://chunky-soap-api.herokuapp.com","/auth/local/register/"),{method:"POST",body:e});case 4:a=r.sent,pt.setToken(a.jwt,e.rememberMe),pt.setUserInfo(a.user,e.rememberMe),console.log("NEW USER ",a.user),n.createCustomer(a.user.id,t),r.next=14;break;case 11:return r.prev=11,r.t0=r.catch(1),r.abrupt("return",r.t0);case 14:case"end":return r.stop()}}),r,null,[[1,11]])})))()},createCustomer:function(e,t){return N()(A.a.mark((function n(){var r,a;return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("CREATING CUSTOMER"),r={customer_title:"",customer_firstname:"",customer_lastname:"",customer_address1:"",customer_address2:"",customer_town:"",customer_postcode:"",customer_created:new Date,user:e},n.prev=2,n.next=5,ht("/customers","POST",r);case 5:a=n.sent,t({type:"SET_USER_SESSION",payload:a}),n.next=12;break;case 9:return n.prev=9,n.t0=n.catch(2),n.abrupt("return",n.t0);case 12:case"end":return n.stop()}}),n,null,[[2,9]])})))()},logout:function(e){console.log("LOGGING_OUT"),pt.clearUser(),e({type:"END_USER_SESSION"})}};function Et(){var e=U()(["\n        background-color: ","\n    "]);return Et=function(){return e},e}function xt(){var e=U()(["\n        background-color: ",";\n    "]);return xt=function(){return e},e}function yt(){var e=U()(["\n        background-color: ","\n    "]);return yt=function(){return e},e}function vt(){var e=U()(["\n        opacity: 0.3;\n        "]);return vt=function(){return e},e}function Ot(){var e=U()(["\n        font-size: 18px;\n        font-weight: 400;\n        & .button-content {\n            height: 70px;\n            transition: all 0.1s ease-in;\n            display: flex;\n            flex-direction: column;\n            justify-content: space-between;\n            transform: translateY(3px);\n        }\n        & .button-content >* {\n            font-weight: 400;\n            font-size: 18px;\n        }\n\n        &:hover .button-content {\n            transform: translateY(-39px);\n        }\n        "]);return Ot=function(){return e},e}function wt(){var e=U()(["\n        font-size: 24px;\n        font-weight: 500;\n        & .button-content {\n            height: 70px;\n            transition: all 0.1s ease-in;\n            display: flex;\n            flex-direction: column;\n            justify-content: space-between;\n            transform: translateY(1px);\n        }\n        & .button-content >* {\n            font-weight: 600;\n            font-size: 20px;\n        }\n\n        &:hover .button-content {\n            transform: translateY(-39px);\n        }\n        "]);return wt=function(){return e},e}function jt(){var e=U()(["\n            min-height: 62px;\n            min-width: 240px;\n            border-radius: 0px 50px 50px 0px;\n            padding: 5px 20px;\n            transition: all 0.5s ease-in;\n            &:hover {\n                background-color: ",";\n            }\n            &:hover .button-content {\n                transform: translateY(5px);\n            }\n        "]);return jt=function(){return e},e}function St(){var e=U()(["\n        font-size: 28px;\n        min-height: 50px;\n        font-weight: 600;\n        padding: 8px 50px;\n        & .button-content {\n            height: 70px;\n            transition: all 0.1s ease-in;\n            display: flex;\n            flex-direction: column;\n            justify-content: space-between;\n            transform: translateY(5px);\n        }\n        & .button-content >* {\n            font-weight: 600;\n            font-size: 20px;\n        }\n            &:hover {\n                background-color: ",";\n            }\n\n        &:hover .button-content {\n            transform: translateY(-37px);\n        }\n\n        "]);return St=function(){return e},e}function kt(){var e=U()(["\n        min-width: 190px;\n        max-height: 42px;\n        "]);return kt=function(){return e},e}function _t(){var e=U()(["\n    transition: all 0.3s ease-out;\n    position: relative;\n    padding: 8px 25px;\n    border-radius: 50px;\n    background-color: ",";\n    border: none;\n    color: white;\n    font-weight: 400;\n    cursor: pointer;\n    z-index: 1000;\n    overflow: hidden;\n    margin: 0px 10px;\n    & .button-content >* {\n        font-weight: 400;\n        font-size: 18px;\n    }\n    ","\n    ","\n        ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n"]);return _t=function(){return e},e}var Pt=q.a.button(_t(),te,(function(e){return e.fixed&&Object(B.css)(kt())}),(function(e){return e.big&&Object(B.css)(St(),K)}),(function(e){return e.xl&&Object(B.css)(jt(),K)}),(function(e){return e.med&&Object(B.css)(wt())}),(function(e){return e.sml&&Object(B.css)(Ot())}),(function(e){return e.disabled&&Object(B.css)(vt())}),(function(e){return e.primary&&Object(B.css)(yt(),Y)}),(function(e){return e.secondary&&Object(B.css)(xt(),M)}),(function(e){return e.tertiary&&Object(B.css)(Et(),V)}),"");function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Dt=function(){var e=Object(c.useSelector)((function(e){return e.orders.orders})),t={numberPerPage:6,pageCount:1,currentData:[]},n=Object(r.useReducer)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,n=arguments.length>1?arguments[1]:void 0;switch(console.log("PAGE REDUCER ",n.payload),n.type){case"GET_DATA":return Tt(Tt({},e),{},{currentData:n.payload});case"PREV_PAGE":return Tt(Tt({},e),{},{pageCount:e.pageCount-1});case"NEXT_PAGE":return Tt(Tt({},e),{},{pageCount:e.pageCount+1});case"SET_PAGE":return Tt(Tt({},e),{},{pageCount:n.payload});default:return e}}),t),o=G()(n,2),i=o[0],l=o[1],u=Object(c.useDispatch)();Object(r.useEffect)((function(){p()}),[]),Object(r.useEffect)((function(){if(e.length>0){var t=e.slice((i.pageCount-1)*i.numberPerPage,i.pageCount*i.numberPerPage);console.log("Mounted paginated ",t),l({type:"GET_DATA",payload:t}),console.log("MOUNTED state ",i)}console.log("Mounted: ",e,i)}),[e,i.pageCount]);var s,p=function(){var e=N()(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht("/orders","GET",void 0,"public");case 2:t=e.sent,u({type:"GET_ORDERS",payload:t});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a.a.createElement(Re,{light:!0},a.a.createElement("h1",null,"Orders"),a.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",alignContent:"right",marginBottom:20}},a.a.createElement("div",null,"Date"),a.a.createElement("div",null,"Amount"),a.a.createElement("div",null,"Customer"),a.a.createElement("div",null,"Shipping"),a.a.createElement("div",null)),i.currentData.length>0&&((s=i.currentData).length>0&&s.sort((function(e,t){return e.createdAt-t.createdAt})).map((function(e,t){return a.a.createElement(at,{order:e,key:t})}))),a.a.createElement("div",{style:{display:"flex"}},e.length>0&&function(e){var t=i.pageCount,n=Math.round(e.length/i.numberPerPage)+1;return a.a.createElement(a.a.Fragment,null,i.pageCount>1&&a.a.createElement(Pt,{secondary:!0,onClick:function(){return l({type:"PREV_PAGE"})}},"PREV"),n>0&&new Array(n).fill().map((function(e,n){return t===n+1?a.a.createElement(Pt,{primary:!0,sml:!0,onClick:function(){l({type:"SET_PAGE",payload:n+1})}},n+1):a.a.createElement(Pt,{sml:!0,onClick:function(){l({type:"SET_PAGE",payload:n+1})}},n+1)})),i.pageCount<n&&a.a.createElement(Pt,{secondary:"true",onClick:function(){return l({type:"NEXT_PAGE"})}},"NEXT"))}(e)))},It=n(11);function Rt(){var e=U()(["\n            font-weight: 600;\n            margin-bottom: 10px;\n    "]);return Rt=function(){return e},e}function At(){var e=U()(["\n            color: red;\n    "]);return At=function(){return e},e}function Ft(){var e=U()(["\n        font-size: 24px;\n        color: ",";\n        font-weight: 600;\n    "]);return Ft=function(){return e},e}function Nt(){var e=U()(["\n    font-size: 20px;\n    font-weight: 400;\n    margin-bottom: 20px;\n    margin-top: 20px;\n    font-style: italic;\n    ","\n    ","\n    color: ",";\n    ","\n    ","\n    ","\n"]);return Nt=function(){return e},e}function zt(){var e=U()(["\n    font-size: 28px;\n    font-weight: 400;\n    margin-bottom: 15px;\n    color: ",";\n"]);return zt=function(){return e},e}function Gt(){var e=U()(["\n        color: white;\n    "]);return Gt=function(){return e},e}function Lt(){var e=U()(["\n    font-size: 22.9px;\n    font-weight: 600;\n    margin-bottom: 5px;\n    color: ",";\n    ","\n"]);return Lt=function(){return e},e}function Ut(){var e=U()(["\n        color: ",";\n    "]);return Ut=function(){return e},e}function Bt(){var e=U()(["\n    font-size: 28.6px;\n    ","\n    font-weight: 400;\n    margin-bottom: 5px;\n    color: ",";\n    ","\n"]);return Bt=function(){return e},e}function qt(){var e=U()(["\n        color: white;\n    "]);return qt=function(){return e},e}function Mt(){var e=U()(["\n    font-size: 48.9px;\n    font-weight: 600;\n    margin-bottom: 5px;\n    color: ",";\n    ","\n"]);return Mt=function(){return e},e}function Ht(){var e=U()(["\n    font-size: 32px;\n    color: white;\n    font-weight: 400;\n    line-height: 200%;\n"]);return Ht=function(){return e},e}function Yt(){var e=U()(["\n    margin-top: 50px;\n    text-align: left;\n    font-size: 58px;\n    font-weight: 600;\n    color: white;\n    line-height: 100%;\n"]);return Yt=function(){return e},e}function Kt(){var e=U()(["\n        color: white;\n        background-color: ",";\n        padding-top: 0px;\n        height: 19px;\n    "]);return Kt=function(){return e},e}function Vt(){var e=U()(["\n    text-align: center;\n    padding-top: 40px;\n    height: 45.2px;\n    font-size: 48px;\n    font-weight: 400;\n    color: ",";\n    background-color: white;\n    z-index: 21000;\n    ","\n"]);return Vt=function(){return e},e}var Wt=q.a.h1(Vt(),Q,(function(e){return e.light&&Object(B.css)(Kt(),M)})),Jt=q.a.h1(Yt()),Xt=q.a.h3(Ht()),Qt=q.a.h1(Mt(),X,(function(e){return e.light&&Object(B.css)(qt())})),$t=q.a.h2(Bt(),"",Q,(function(e){return e.dark&&Object(B.css)(Ut(),J)})),Zt=q.a.h1(Lt(),X,(function(e){return e.light&&Object(B.css)(Gt())})),en=q.a.h3(zt(),$),tn=q.a.p(Nt(),(function(e){return e.sml&&"\n        font-size: 16px;\n        margin-bottom: 5px;\n        margin-top: 5px;\n    "}),(function(e){return e.centered&&"\n        text-align: center;\n    "}),X,(function(e){return e.big&&Object(B.css)(Ft(),Q)}),(function(e){return e.danger&&Object(B.css)(At())}),(function(e){return e.heavy&&Object(B.css)(Rt())}));function nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nn(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var an=function(e,t){switch(t.type){case"STANDARD_CHECKOUT":return rn(rn({},e),{},{authenticated:!1,guest:null,step:1});case"GUEST_CHECKOUT":return rn(rn({},e),{},{guest:!0,step:1});case"NEXT_STEP":return rn(rn({},e),{},{step:e.step+1});case"PREV_STEP":return rn(rn({},e),{},{step:e.step-1});case"LOGGING_IN":return rn(rn({},e),{},{authenticated:!1,loading:!0});case"LOGIN_FAIL":return rn(rn({},e),{},{loading:!1,step:1,guest:null,errorMsg:t.payload,authenticated:!1});case"LOGGED_IN":return rn(rn({},e),{},{authenticated:!0,guest:!1,loading:!1,fields:{}});case"CHECKOUT_SUCCESS":return rn(rn({},e),{},{step:4,loading:!1});case"SET_POSTAGE":return rn(rn({},e),{},{postage:t.payload});case"UPDATE_FIELD":return console.log("UPDATING IN REDUCER",t.fieldName,t.fieldValue),rn(rn({},e),{},{fields:rn(rn({},e.fields),{},u()({},t.fieldName,t.fieldValue))});case"CLEAR_FIELDS":return rn(rn({},e),{},{fields:rn(rn({},e.fields),{},{password:"",username:"",identifier:""})});default:return e}},on=n(13),cn=n.n(on),ln=n(10),un=n.n(ln),sn=n(15),pn=n.n(sn),dn=function(e){var t=un()({},e);return a.a.createElement(a.a.Fragment,null,t.withIcon?a.a.createElement("div",{onClick:function(){return t.handleClick()}},t.children):a.a.createElement(Pt,un()({fixed:!0},t,{onClick:function(){return t.handleClick()}}),a.a.createElement("div",{className:"button-content"},t.styled&&a.a.createElement("div",null,t.children),a.a.createElement("div",null,!0===t.loading?a.a.createElement(pn.a,{type:"ThreeDots",color:"#FFFFFF",height:29,width:29,timeout:3e4}):t.text),a.a.createElement("div",null,t.children||a.a.createElement(rt.Check,null)))))};dn.defaultProps={handleClick:function(){},loading:"false"};var fn=dn;n(37);function mn(){var e=U()(["\n  cursor: pointer;\n"]);return mn=function(){return e},e}var gn=function(e){var t=Object(c.useSelector)((function(e){return e.basket})).basket,n=Object(c.useDispatch)(),o=Object(r.useState)([]),i=G()(o,2),l=i[0],u=i[1],s=Object(r.useState)(!1),p=G()(s,2),d=p[0],f=p[1],m=Object(r.useState)(!1),g=G()(m,2),h=g[0],b=g[1],E=e.product,x=E._id,y=E.product_name,v=E.product_short_description,O=E.product_price,w=E.product_picture_1,j=E.product_discount,S=e.quantity,k=void 0===S?1:S;Object(r.useEffect)((function(){if(process.browser){var e=localStorage.getItem("soap-cart");e&&(u(JSON.parse(e)),n({type:"SET_INITIAL_BASKET",payload:JSON.parse(e)}))}}),[]);var _=function(){return a.a.createElement(pn.a,{type:"ThreeDots",color:"#FFFFFF",height:29,width:29,timeout:3e4})},P=function(e){return t.products.filter((function(t){return t._id===e}))},C=function(){var e=P(x),r=t.products,a=r.findIndex((function(e){return e._id===x})),o=r[a];if(1==e[0].product_qty){var c=r.filter((function(e){return e!=o}));n({type:"REMOVE_FROM_BASKET",payload:o}),localStorage.setItem("soap-cart",JSON.stringify(c))}else o.product_qty--,o.total_price=parseFloat(o.product_price*o.product_qty),u(r),n({type:"ADD_TO_BASKET",payload:r}),localStorage.setItem("soap-cart",JSON.stringify(r))},T=function(){f(!0),setTimeout((function(){console.log(k);var e=parseFloat(O-O*j/100),r={_id:x,product_name:y,product_description:v,product_picture_1:w.url,product_price:e,product_qty:k,total_price:e};if(0===l.length)u([r]),n({type:"ADD_TO_BASKET",payload:[r]}),localStorage.setItem("soap-cart",JSON.stringify([r]));else{var a=t.products;if(P(x).length>0){var o=a.findIndex((function(e){return e._id===x})),c=a[o];c.product_qty+=k,c.total_price=parseFloat(c.product_price*c.product_qty),u(a),n({type:"ADD_TO_BASKET",payload:a}),localStorage.setItem("soap-cart",JSON.stringify(a))}else{var i=[].concat(cn()(l),[r]);localStorage.setItem("soap-cart",JSON.stringify(i)),u([].concat(cn()(l),[r])),n({type:"ADD_TO_BASKET",payload:i})}}f(!1),b(!0)}),2e3)};return a.a.createElement(a.a.Fragment,null,"add"===e.function&&!e.icon&&a.a.createElement(fn,{primary:!0,med:!0,fixed:!0,withIcon:e.icon,style:{maxWidth:200},handleClick:T,text:h?"Add more":"Add to cart"},d&&_(),!d&&a.a.createElement(rt.ShoppingCart,null)),!e.icon&&"add"===!e.function&&a.a.createElement(fn,{primary:!0,med:!0,fixed:!0,withIcon:e.icon,style:{maxWidth:200},handleClick:C,text:"Remove"},d&&_(),!d&&a.a.createElement(rt.Trash2,null)),e.icon&&"add"===e.function?a.a.createElement(hn,{handleClick:!0,onClick:function(){return T()}},e.children):a.a.createElement(hn,{onClick:function(){return C()}},e.children))},hn=q.a.div(mn());function bn(){var e=U()(["\n    width: 20px;\n    height: 20px;\n    z-index: 2000;\n    ","\n    background-color: ",";\n    margin-left: 53%;\n    margin-top: -25px;\n    transform: rotate(45deg);\n"]);return bn=function(){return e},e}function En(){var e=U()(["\n    max-width: 400px;\n    ","\n    ","\n    background-color: ",";\n    z-index: 3000;\n    position: absolute;\n    top: 60px;\n    border-radius: 20px;\n    box-shadow: 4px 4px 12px rgba(0,0,0, 0.2);\n    transform: translateX(-150px);\n    color: white;\n    padding: 20px 20px;\n    & ul {\n        list-style: none;\n        margin-left: 20px;\n        display: flex;\n        flex-direction: row;\n        max-width: 90%;\n        justify-content: space-between;\n        flex-flow: wrap;\n    }\n\n    & ul > li {\n        font-size: 24px;\n        margin-right: 10px;\n    }\n"]);return En=function(){return e},e}var xn=q.a.div(En(),"","",Y),yn=q.a.div(bn(),"",Y),vn=function(e){var t=e.closeMenu,n=e.menuData,r=e.title;return console.log("MENU DATA ",e),a.a.createElement(a.a.Fragment,null,a.a.createElement(xn,{onMouseLeave:t},a.a.createElement(yn,null),a.a.createElement($t,{light:!0},r),a.a.createElement("ul",null,n&&n.map((function(e,t){return a.a.createElement("li",{key:t},a.a.createElement(wn,{color:"dark",to:"/category/".concat(e._id)},e.category_name))})))))};vn.defaultProps={closeMenu:function(){},menuData:[],title:"menu"};var On=vn,wn=function(e){var t,n=e.children,o=e.to,c=e.withMenu,l=e.menuData,u=e.menuTitle,s=e.color,p=e.display,d=Object(r.useState)(!1),f=G()(d,2),m=f[0],g=f[1],h=Object(r.useState)(!1),b=G()(h,2),E=b[0],x=b[1],y=Object(i.useHistory)(),v=Object(i.useLocation)(),O={fontWeight:600,marginRight:10,display:"flex",justifyContent:"space-between",alignItems:"center",color:(t=v.pathname,("/"===t?"/":t.match(/^\/([^?\/]+)/)[0])===o&&"/basket"!==v.pathname||!0===m?"".concat(Y):"black")},w={color:v.pathname.includes(o)&&"/basket"!==v.pathname||!0===m?"white":"black"},j=function(){g(!m),c&&x(!0)},S=function(e){e.preventDefault(),!p&&y.push(o)};return a.a.createElement(a.a.Fragment,null,"dark"===s?a.a.createElement("a",{href:o,onClick:S,onMouseOver:j,onMouseOut:j,style:w},n):a.a.createElement("a",{href:o,onClick:S,onMouseOver:j,onMouseOut:j,style:O},n),c&&!0===E?a.a.createElement(On,{closeMenu:function(){x(!1),console.log("COLSING")},title:u,menuData:l}):null)},jn=n(12),Sn=n.n(jn);function kn(){var e=U()(["\n      height: 70px;\n      max-width: 70px;\n      min-width: 70px;\n      border-radius: 15px\n    "]);return kn=function(){return e},e}function _n(){var e=U()(["\n  &, :after { \n    ","\n    height: 330px;\n    width: 360px;\n    min-width: 360px;\n    border-radius: 80px;\n    background-color: #CCEAE3;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    z-index: 7;\n    transition: all 0.2s ease-in;\n    position: relative;\n    ","\n   }\n    &::after {\n        content:''; \n        transform: rotate(20deg);\n         z-index: -10;\n         position: absolute;\n         opacity: 0.3;\n         transition: all .5s ease-in;\n         box-shadow: rgba(149, 220, 203, 0.2) 0px 2px 13px, inset rgba(149, 220, 203, 0.2) 0px -1px 12px;\n    }\n    &:hover {\n        transform: rotate(-4deg);\n    }\n"]);return _n=function(){return e},e}var Pn=q.a.div(_n(),"",(function(e){return e.sml&&Object(B.css)(kn())}));function Cn(){var e=U()(["\n        &, ::before{\n        position: relative;\n        padding: 15px 25px 15px 0px ;\n        border-radius: 50px;\n        max-width: 360px;\n        min-width: 360px;\n        height: 20px;\n        background-color: #F6F2F2;\n        display: flex;\n        ","\n        ","\n        justify-content: space-between;\n        }\n        &::before {\n            content: '';\n            background-color: #EFB4F9;\n            min-width: 130px;\n            transform: translateY(-14px);\n            ","\n            position: absolute;\n            color: white;\n        }\n\n        "]);return Cn=function(){return e},e}function Tn(){var e=U()(["\n       &, ::after {\n        position: relative;\n        text-align: center;\n        padding: 15px 15px;\n        border-radius: 50px;\n        max-height: 20px;\n        max-width: 60px;\n        color: white;\n        background-color: #F9B233;\n        z-index: 10;\n        transform: translate(300px, -280px);\n       }\n "]);return Tn=function(){return e},e}var Dn=function(e){var t=Object(r.useState)({}),n=G()(t,2),o=n[0],c=n[1],i=Object(r.useState)(!1),l=G()(i,2),u=l[0],s=l[1];Object(r.useEffect)((function(){e.product&&(console.log("PRODUCT ",e.product),c(e.product))}),[e]);var p=o.product_picture_1,d=(o.product_featured,o.product_name),f=o.product_discount,m=o.product_price,g=o._id,h=o.categories;return a.a.createElement("div",{style:{display:"flex",flexDirection:"column",marginBottom:25,marginTop:25}},a.a.createElement(Pn,{onClick:function(){return e.clickEvent(g)},onMouseOver:function(){return s(!0)},onMouseLeave:function(){return s(!1)}},a.a.createElement("img",{src:p?"".concat(p.url):"/noimage.png",alt:"product-image",style:{maxHeight:250}}),a.a.createElement(rt.Eye,{color:"white",size:36,style:{position:"fixed",bottom:30,right:40,visibility:u?"visible":"hidden",transition:"all 0.5 ease-in"}})),a.a.createElement(In,null,a.a.createElement("h2",null,e.info)),a.a.createElement("h2",{style:{marginLeft:10,fontSize:24,marginTop:-15,marginBottom:10}},d&&d),a.a.createElement(Rn,null,a.a.createElement("h3",{style:{zIndex:300,color:"white",marginLeft:15,fontSize:20}},h&&h[0].category_name),f>0?a.a.createElement("h3",{style:{opacity:.3,marginLeft:45,fontSize:20,textDecoration:"line-through"}},"Â£  ",m.toFixed(2)):null,a.a.createElement("h3",{style:{fontSize:20}},"Â£",m-(m*f/100).toFixed(2))))},In=q.a.div(Tn()),Rn=q.a.div(Cn(),"","","");function An(){var e=U()(["\n      background-color: black;\n    "]);return An=function(){return e},e}function Fn(){var e=U()(["\n  border: none;\n  border-radius: 50%;\n  background-color: gray;\n  cursor: pointer;\n  width: 15px;\n  height: 15px;\n  margin: 8px;\n  ","\n"]);return Fn=function(){return e},e}function Nn(){var e=U()(["\n  display: flex;\n  height: 50px;\n  width: 100%;\n  flex-direction: row;\n  justify-content: center;\n"]);return Nn=function(){return e},e}var zn=function(e){var t=e.data,n=e.handleClick,o=e.perPage,c=Sn()(e,["data","handleClick","perPage"]),i=Object(r.useState)([]),l=G()(i,2),u=l[0],s=l[1],p=Object(r.useState)(1),d=G()(p,2),f=d[0],m=d[1],g=o;Object(r.useEffect)((function(){if(t&&t.length>0){var e=t.length/g;s(cn()(Array(e)))}}),[t]);return a.a.createElement(a.a.Fragment,null,t&&a.a.createElement(Ne,un()({},c,{mb:"100px"}),t.length>1?t.slice(1===f?0:f*g,g).map((function(e,t){return a.a.createElement(Dn,{product:e,info:"New",key:t,clickEvent:n})})):[t].map((function(e,t){return a.a.createElement(Dn,{product:e,info:"New",key:t,clickEvent:n})}))),t&&a.a.createElement(Gn,null,t.length>3&&u.map((function(e,t){return a.a.createElement(Ln,{page:f,value:t+1,key:t,onClick:function(e){return function(e){m(e.target.value)}(e)}})}))))},Gn=q.a.div(Nn()),Ln=q.a.button(Fn(),(function(e){return e.page===e.value&&Object(B.css)(An())}));function Un(){var e=U()(["\n        width: ","px;\n        height: ","px;\n    "]);return Un=function(){return e},e}function Bn(){var e=U()(["\n        opacity: ",";\n    "]);return Bn=function(){return e},e}function qn(){var e=U()(["\n         transform: translateX(","px);\n    "]);return qn=function(){return e},e}function Mn(){var e=U()(["\n        transform: translateY(",");\n    "]);return Mn=function(){return e},e}function Hn(){var e=U()(["\n        top: ","px;\n    "]);return Hn=function(){return e},e}function Yn(){var e=U()(["\n        background-color: ",";\n        ","\n    "]);return Yn=function(){return e},e}function Kn(){var e=U()(["\n    height: 100px;\n    width: 100px;\n    border-radius: 50%;\n    background-color: white;\n    opacity: 0.5;\n    position: absolute;\n    z-index: 1;\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n"]);return Kn=function(){return e},e}var Vn=q.a.div(Kn(),(function(e){return e.dark&&Object(B.css)(Yn(),H,"")}),(function(e){return e.t&&Object(B.css)(Hn(),e.t)}),(function(e){return e.y&&Object(B.css)(Mn(),e.y)}),(function(e){return e.x&&Object(B.css)(qn(),e.x)}),(function(e){return e.opac&&Object(B.css)(Bn(),e.opac)}),(function(e){return e.size&&Object(B.css)(Un(),e.size,e.size)}));function Wn(){var e=U()(["\n            background-color: ",";\n            }\n            "]);return Wn=function(){return e},e}function Jn(){var e=U()(["\n            width: 0px;\n           "]);return Jn=function(){return e},e}function Xn(){var e=U()(["\n            background-color: ",";\n           "]);return Xn=function(){return e},e}function Qn(){var e=U()(["\n&{\n        height: 36px;\n        width: 36px;\n        border-radius: 50%;\n        background-color: ",";\n        position: relative;\n        display: inline-block;\n        margin-right: 150px;\n        flex-shrink: 4;\n        ","\n        }\n}\n    &::before {\n        content: '';\n        position: absolute;\n        border-radius: 50%;\n        border: 3px solid white;\n        width: 22px;\n        height: 22px;\n        top: 4px;\n        left: 4px;\n    }\n    &::after {\n        content: '';\n        width: 150px;\n        height: 3px;\n        background-color: ",";\n        position: absolute;\n        transform: translate(-168px, 15px);\n\n        ","\n\n        ","\n"]);return Qn=function(){return e},e}var $n=q.a.div(Qn(),$,(function(e){return e.step>=e.number&&Object(B.css)(Xn(),M)}),$,(function(e){return 1===e.number&&Object(B.css)(Jn())}),(function(e){return e.step>=e.number&&Object(B.css)(Wn(),M)}));function Zn(){var e=U()(["\n        height: 62px;\n        font-size: 28px;\n        ::placeholder {\n            color: ",";\n        }\n    "]);return Zn=function(){return e},e}function er(){var e=U()(["\n        height: 48px;\n        color: orange;\n    "]);return er=function(){return e},e}function tr(){var e=U()(["\n        height: 50px;\n    "]);return tr=function(){return e},e}function nr(){var e=U()(["\n        width: 100%; \n    "]);return nr=function(){return e},e}function rr(){var e=U()(["\n    height: 50px;\n    max-width: 100%;\n    display: inline-block;\n    border: none;\n    border-radius: 50px;\n    z-index: 1000;\n    background-color: ",";\n    color: ",";\n    padding: 0px 50px;\n    margin: 0px 5px 10px 0px;\n    ","\n    ","\n    ","\n    "," \n"]);return rr=function(){return e},e}var ar=q.a.input(rr(),ee,Q,(function(e){return e.inline&&Object(B.css)(nr())}),(function(e){return e.withButton&&Object(B.css)(tr())}),(function(e){return!1===e.valid&&Object(B.css)(er())}),(function(e){return e.big&&Object(B.css)(Zn(),te)}));function or(){var e=U()(["\nbackground: none!important;\nborder: none;\npadding: 0!important;\ncolor: #069;\ntext-decoration: underline;\ncursor: pointer;\n"]);return or=function(){return e},e}var cr=q.a.button(or());function ir(){var e=U()(["\n    z-index: 100000;\n    position: relative;\n    width: 300px;\n    height: 300px;\n    border: 12px solid white;\n    border-radius: 75px;\n    background-color: green;\n    transform: rotate(-10deg) translateY(-300px);\n    background-color: #CCEAE3;\n    margin-left: 100px;\n    cursor: pointer;\n    text-align:center;\n    transition: all 0.2s ease-in;\n        &:hover {\n            transform: rotate(-10deg) translateY(-300px) scale(1.03);\n        }\n"]);return ir=function(){return e},e}var lr=q.a.div(ir()),ur=function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement($n,e),a.a.createElement("div",{style:{display:"inline-block",transform:"translate(-200px, 50px)",position:"absolute",marginTop:10}},a.a.createElement(tn,null,e.label)))},sr=function(e,t){var n=e.withBigButton,r=e.submitHandler,o=e.handleChange,c=e.label,i=e.withButton,l=e.buttonText,u=e.cols,s=(e.direction,e.value),p=e.valid,d=e.loading,f=Sn()(e,["withBigButton","submitHandler","handleChange","label","withButton","buttonText","cols","direction","value","valid","loading"]);console.log("REF ",t);return a.a.createElement(a.a.Fragment,null,i&&a.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%"}},a.a.createElement(tn,{big:!0,style:{marginLeft:10}},c),a.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},a.a.createElement(ar,un()({value:s,ref:t,inline:!0},f,{valid:p,withButton:i,onChange:function(e){return o(e)},onFocus:function(){return console.log("focussed")}})),a.a.createElement(fn,{primary:!0,big:!0,text:l,handleClick:r,style:{width:100,display:"inline-block",transform:"translateX(-60px)"}}))),n&&a.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%"}},a.a.createElement(tn,{big:!0,style:{marginRight:10,textAlign:"center"}},c),a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),r()}},a.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},a.a.createElement(ar,un()({value:s,ref:t,inline:!0},f,{valid:p,value:s,withButton:i,onChange:function(e){return o(e)},onFocus:function(){return console.log("focussed")}})),a.a.createElement(fn,{primary:!0,big:!0,xl:!0,styled:!0,type:"submit",style:{width:100,display:"inline-block",transform:"translateX(-60px)"}},!1===d?a.a.createElement("div",{className:"script-font"}," ",l):a.a.createElement(pn.a,{type:"ThreeDots",color:"#FFFFFF",height:49,width:29,timeout:3e4}))))),!i&&!n&&a.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:u}},a.a.createElement(tn,{style:{marginLeft:10}},c),a.a.createElement(ar,un()({value:s,ref:t},f,{withButton:i,onChange:function(e){return o(e)},onFocus:function(){return console.log("focussed")}}))))};sr.defaultProps={withButton:!1,withBigButton:!1,value:"",loading:!1};var pr=Object(r.forwardRef)(sr);function dr(){var e=U()(["\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n    transform: translateY(-20px);\n"]);return dr=function(){return e},e}function fr(){var e=U()(["\n        border: 3px #79CBB7 solid;\n    "]);return fr=function(){return e},e}function mr(){var e=U()(["\n    width: 550px;\n    height: 80px;\n    padding: 20px 40px;\n    border: 3px #F7F2F2 solid;\n    border-radius: 10px;\n    margin: 20px 0px 0px 0px;\n    cursor: pointer;\n    ","\n"]);return mr=function(){return e},e}function gr(){var e=U()(["\n     opacity: 0;\n     position: fixed;\n     width: 0;\n"]);return gr=function(){return e},e}var hr=function(e){var t=e.option,n=e.checked,r=e.selected;Sn()(e,["option","checked","selected"]);return a.a.createElement(Er,{htmlFor:t.id,selected:r===t.id},a.a.createElement(br,{type:"radio",name:"delivery",id:t.id,value:t.id,onChange:function(){return e=t.id,console.log("touched",e),void n(e);var e}}),a.a.createElement(xr,null,a.a.createElement("img",{src:"".concat((null==t?void 0:t.shipping)&&t.shipping_image.url),style:{maxHeight:60,maxWidth:120,marginRight:20}}),a.a.createElement(tn,null,t.shipping_carrier," - ",t.shipping_description,a.a.createElement("br",null),"Price:  Â£ ",t.shipping_cost.toFixed(2))))},br=q.a.input(gr()),Er=q.a.label(mr(),(function(e){return e.selected&&Object(B.css)(fr())})),xr=q.a.div(dr());function yr(){var e=U()(["\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n    background-color:",";\n    margin-right: 20px;\n    ","\n    ","\n"]);return yr=function(){return e},e}var vr=function(e){var t=e.name,n=e.id,r=e.image,o=Object(i.useHistory)();return a.a.createElement(a.a.Fragment,null,a.a.createElement(lr,{onClick:function(){return function(e){o.push("/category/".concat(e))}(n)}},a.a.createElement("img",{src:r,style:{height:250,transform:"rotate(10deg) translateY(20px)"}}),a.a.createElement("div",{style:{transform:"translateY(150px) rotate(10deg)",display:"flex",alignItems:"center"}},a.a.createElement(Or,{name:t}),a.a.createElement($t,null,t))))},Or=q.a.div(yr(),Y,(function(e){return"Soaps"===e.name&&"\n        background-color: ".concat(V,"\n    ")}),(function(e){return"Shampoo"===e.name&&"\n        background-color: ".concat(M,"\n    ")}));function wr(){var e=U()(["\n    position: absolute;\n    padding: 0px;\n    margin: 0px;\n    left: 50%;\n    top: 50%;\n    margin-right: -50%;\n    transform: translate(-50%, -50%);\n    text-align: center;\n    animation: "," 3s infinite ease-out;\n"]);return wr=function(){return e},e}function jr(){var e=U()(["\n    position: absolute;\n    top: 0;\n    z-index: 10000;\n    min-height: 100vh;\n    min-width: 100vw;\n    background-color: white;\n"]);return jr=function(){return e},e}function Sr(){var e=U()(["\n    0% { opacity: 0.3 }\n    50% { opacity: 1; }\n    100% { opacity: 0.3; }\n"]);return Sr=function(){return e},e}var kr=Object(B.keyframes)(Sr()),_r=q.a.div(jr()),Pr=q.a.div(wr(),kr),Cr=function(){return a.a.createElement(_r,null,a.a.createElement(Pr,null,a.a.createElement("img",{src:"/logo-big.svg",alt:"loading.."})))};function Tr(){var e=U()(["\n  ","\n   min-width: 750px;\n   margin-top: 10px;\n   margin-right: auto;\n   margin-left: auto;\n   text-align: center;\n   transform: translateX(80px);\n"]);return Tr=function(){return e},e}var Dr=[{no:1,label:"Account"},{no:2,label:"Shipping"},{no:3,label:"Payment"},{no:4,label:"Success"}],Ir=function(){var e=Object(c.useSelector)((function(e){return e.user})).user,t=Object(r.useReducer)(an,{step:1,authenticated:!1,guest:null,loading:!1,errorMsg:"",postage:{},fields:{register:!1,identifier:"",password:"",password_confirmation:"",username:""}}),n=G()(t,2),o=n[0],i=n[1],l=o.step,u=o.authenticated,s=o.guest,p=(o.postage,o.loading,o.fields),d=p.email,f=p.password,m=p.register,g=p.username,h=p.password_confirmation,b=Object(c.useDispatch)();Object(r.useEffect)((function(){var e=pt.getUserInfo();if(!nt(e)){i({type:"LOGGED_IN"});var t="?_where[user._id]=".concat(e._id);E(t)}console.log("USER SESSION ",e)}),[,u]),Object(r.useEffect)((function(){console.log("CART DATA IS ",o,e)}),[o]);var E=function(){var e=N()(A.a.mark((function e(t){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ht("/customers".concat(t));case 3:n=e.sent,console.log("CUSTOMER INFO ",n[0]),b({type:"SET_USER_SESSION",payload:n[0]}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=N()(A.a.mark((function e(t){var n,r,a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),i({type:"LOGGING_IN"}),!0!==m){e.next=20;break}if(f===h){e.next=6;break}return console.log("PASSWORDS MUST MATCH "),e.abrupt("return");case 6:return console.log("REGISTERING NEW USER"),n={email:d,password:f,username:g},e.prev=8,e.next=11,bt.register(n,b);case 11:i({type:"LOGGED_IN"}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(8),console.log(e.t0),i({type:"LOGIN_FAIL",payload:e.t0});case 18:e.next=34;break;case 20:return console.log("LOGGING IN USER with ",d,f),r={identifier:d,password:f,username:g},e.prev=22,e.next=25,bt.login(r,b);case 25:400===(a=e.sent).status?i({type:"LOGIN_FAIL",payload:a.message}):i({type:"LOGGED_IN"}),console.log("LOGIN RESPONSE ",a),e.next=34;break;case 30:e.prev=30,e.t1=e.catch(22),console.log("LOGIN ERROR ",e.t1),i({type:"LOGIN_FAIL",payload:e.t1});case 34:case"end":return e.stop()}}),e,null,[[8,14],[22,30]])})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement(a.a.Fragment,null,a.a.createElement(Rr,null,Dr.map((function(e){return a.a.createElement(ur,{label:e.label,step:l,number:e.no,key:e.no})}))),1===l&&!u&&null===s&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Lr,{handleChange:function(e){var t=e.target,n=t.name,r=t.value,a=t.type,o=t.checked;if("checkbox"===a)return i({type:"CLEAR_FIELDS"}),void i({type:"UPDATE_FIELD",fieldName:n,fieldValue:o});i({type:"UPDATE_FIELD",fieldName:n,fieldValue:r})},handleLogin:x,dispatch:i,data:o.fields,loading:o.loading?1:void 0})),(1===l&&u||1===l&&!0===s)&&a.a.createElement(a.a.Fragment,null,a.a.createElement(qr,{user:e,cartState:o,buttonClick:function(e){i({type:e})},cartDispatch:i})),2===l&&a.a.createElement(ze,null,a.a.createElement(Ge,null,a.a.createElement(en,null,"Choose a Shipping Option")),a.a.createElement(Le,null,a.a.createElement(Mr,{dispatch:b,cartDispatch:i}))),3===l&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Kr,{cartDispatch:i})),4===l&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Ar,{cartState:o})))},Rr=q.a.div(Tr(),""),Ar=function(e){var t=e.cartState;return a.a.createElement(ze,null,a.a.createElement(Ge,null,a.a.createElement(en,null,"Congratulations!!"),a.a.createElement(qe,null)),a.a.createElement(Le,null,a.a.createElement(tn,null,"Thankyou for shopping with the Chunky Soap Company"),a.a.createElement(tn,null,"Your order has been successfully processed & a confirmation email has been sent to your registered email address")),a.a.createElement(Ue,null,a.a.createElement(Be,null,t.authenticated&&a.a.createElement(fn,{big:!0,secondary:!0,text:"My Account"}),a.a.createElement(fn,{big:!0,text:"Logout"}))))},Fr=n(18),Nr=function(e){var t=Object(r.useState)(!1),n=G()(t,2),a=n[0],o=n[1];return Object(r.useEffect)((function(){var e=null!==pt.getToken();console.log("AUTH TOKEN HERE ",pt.getToken()),o(e)}),[]),{isAuthenticated:a}},zr=function(e){var t=e.products,n=Object(r.useState)(!1),a=G()(n,2),o=a[0],c=a[1],i=Object(r.useState)(null),l=G()(i,2),u=l[0],s=l[1],p=function(){c(!o)};return{isShowing:o,toggle:p,handleClick:function(e){console.log("event",e);var n=t.products.filter((function(t){return t.id===e}));s(n[0]),console.log("SELECTED",u),p()},selectedProduct:u}},Gr=function(e){var t=e.dispatch,n=e.loginState.fields,r=n.email,a=n.password,o=n.register,c=n.username,i=n.password_confirmation;return console.log("useStrapiLogin ",o),{handleStrapiLogin:function(){var e=N()(A.a.mark((function e(){var n,l;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t({type:"LOGGING_IN"}),!0!==o){e.next=12;break}if(a===i){e.next=5;break}return console.log("PASSWORDS MUST MATCH "),e.abrupt("return");case 5:return console.log("REGISTERING NEW USER"),n={email:r,password:a,username:c},e.next=9,bt.register(n,t);case 9:t({type:"LOGGED_IN"}),e.next=24;break;case 12:return console.log("LOGGING IN USER with ",r,a),l={identifier:r,password:a,username:c},e.prev=14,e.next=17,bt.login(l,t);case 17:t({type:"LOGGED_IN"}),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(14),console.log(e.t0),t({type:"LOGIN_FAIL",payload:e.t0});case 24:case"end":return e.stop()}}),e,null,[[14,20]])})));return function(){return e.apply(this,arguments)}}(),isLoggedIn:!1,errorMsg:""}},Lr=function(e){var t=Object(r.useRef)([]),n=Fr.views,o=Object(r.useState)(null),c=G()(o,2),i=c[0],l=c[1];Object(r.useEffect)((function(){var n=e.data.register?"register":"login";l(n),console.log("MYREFS",t)}),[,e.data.register,t]);return a.a.createElement(ze,null,a.a.createElement($t,null,"Sign in to Continue"),a.a.createElement("form",{onSubmit:function(t){return e.handleLogin(t)},style:{marginTop:30,display:"flex",width:"100%",flexDirection:"column"}},i&&n[i].map((function(n,r){return a.a.createElement(pr,{placeholder:n.placeholder,label:n.label,type:n.type,name:n.name,handleChange:e.handleChange,key:r,direction:n.direction,required:n.required,ref:function(e){return t.current[r]=e}})})),a.a.createElement("br",null),a.a.createElement("div",null,"I Don't have an account create one ",a.a.createElement("input",{type:"checkbox",name:"register",checked:e.data.register,onChange:e.handleChange})),a.a.createElement(Be,null,a.a.createElement(fn,{primary:!0,fixed:!0,type:"submit",text:e.data.register?"Register":"Sign In",med:!0,loading:!!e.loading||void 0},a.a.createElement(rt.User,null)),a.a.createElement("br",null),"standalone"!==e.type&&a.a.createElement(fn,{fixed:!0,type:"button",text:"Guest Checkout",loading:"false",secondary:!0,med:!0,handleClick:function(){return e.dispatch({type:"GUEST_CHECKOUT"})}},a.a.createElement(rt.ArrowRight,null)))))};function Ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Br(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ur(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qr=function(e){var t=e.user,n=e.cartState,o=e.cartDispatch,i=e.buttonClick,l=Fr.views,s=Object(r.useState)(!1),p=G()(s,2),d=p[0],f=p[1],m=Object(r.useState)({}),g=G()(m,2),h=g[0],b=g[1],E=Object(r.useState)(!1),x=G()(E,2),y=x[0],v=x[1],O=t.customer_title,w=t.customer_firstname,j=t.customer_lastname,S=t.customer_address1,k=t.customer_address2,_=t.customer_town,P=t.customer_postcode,C=Object(c.useDispatch)(),T=Object(It.useHistory)();console.log("USER_ID",t);var D=function(e){var t=e.target,n=t.name,r=t.value;b((function(e){return Br(Br({},e),{},u()({},n,r))}))};Object(r.useEffect)((function(){console.log("USER DETAILS",t.customer_firstname),""==t._id&&""==t.customer_firstname&&f(!0),b(t)}),[,t]);var I=function(){var e=N()(A.a.mark((function e(r){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v(!0),r.preventDefault(),!n.authenticated){e.next=11;break}return console.log("SUBMITTING FORM"),e.next=6,ht("/customers/".concat(t._id),"PUT",h);case 6:a=e.sent,console.log("NEW ADDRESS ",a),C({type:"SET_USER_SESSION",payload:a}),e.next=13;break;case 11:C({type:"SET_USER_SESSION",payload:h}),console.log("ADDRESS ",h);case 13:f(!1),v(!1);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement(a.a.Fragment,null,!1===d&&t.customer_firstname&&a.a.createElement(ze,null,a.a.createElement(Ge,null,a.a.createElement(en,null,"Billing Address"),a.a.createElement(qe,{mb:"10px"})),a.a.createElement(Le,null,t.customer_firstname?a.a.createElement(a.a.Fragment,null,a.a.createElement($t,null,O," ",w," ",j),a.a.createElement($t,null,S),a.a.createElement($t,null,k),a.a.createElement($t,null,_),a.a.createElement($t,null,P)):a.a.createElement($t,null,"Please provide a billing address")),a.a.createElement(Ue,null,a.a.createElement(Be,null,a.a.createElement(fn,{big:!0,secondary:!0,text:"Back",handleClick:function(){T.goBack()}},a.a.createElement(rt.ArrowLeft,null)),a.a.createElement(fn,{big:!0,secondary:!0,text:"change",handleClick:function(){return f(!0)}},a.a.createElement(rt.Edit3,null)),a.a.createElement(fn,{big:!0,text:"confirm",handleClick:function(){return i("NEXT_STEP")}},a.a.createElement(rt.ArrowRight,null))))),(!0===d||!t.customer_firstname)&&a.a.createElement(ze,null,a.a.createElement(Ge,null,a.a.createElement(en,null,"Please provide a billing address"),a.a.createElement(qe,null)),a.a.createElement(Le,null,a.a.createElement("form",{onSubmit:function(e){return I(e)}},a.a.createElement("div",{style:{display:"flex",flexDirection:"row",width:"100%",flexWrap:"wrap",justifyContent:"flex-start",alignItems:"flex-start"}},l.addressForm.map((function(e,t){return a.a.createElement(pr,{placeholder:e.placeholder,label:e.label,name:e.name,key:t,handleChange:function(e){return D(e)},required:!0,cols:e.width,value:h[e.value]})})),!n.authenticated&&a.a.createElement(pr,{placeholder:"example@gmail.com",label:"Email Address",name:"email",handleChange:function(e){return D(e)},required:!0,cols:"100%"})),a.a.createElement(Be,null,n.guest?a.a.createElement(fn,{big:!0,secondary:!0,text:"Back",handleClick:function(){return o({type:"STANDARD_CHECKOUT"})}},a.a.createElement(rt.Edit3,null)):a.a.createElement(fn,{big:!0,secondary:!0,text:"Cancel",handleClick:function(){return f(!1)}},a.a.createElement(rt.Edit3,null)),a.a.createElement(fn,{big:!0,text:"Save",type:"submit",loading:y?1:void 0}))))))},Mr=function(e){var t=e.dispatch,n=e.cartDispatch,o=Object(r.useState)([]),i=G()(o,2),l=i[0],u=i[1],s=Object(r.useState)(),p=G()(s,2),d=p[0],f=p[1],m=Object(c.useSelector)((function(e){return e.basket})).basket;Object(r.useEffect)((function(){g()}),[]),Object(r.useEffect)((function(){var e=l.find((function(e){return e._id===d}));console.log("selected shipping ",e);var r=0;if(e){var a=e.shipping_cost,o=e.id;tt(m.products)>25&&a<4?(console.log("CART_TOTAL ",tt(m.products)),r=0):r=a,t({type:"SET_POSTAGE",payload:{shipping_cost:r,id:o}}),n({type:"SET_POSTAGE",payload:e}),console.log("COST ",r)}}),[d]);var g=function(){var e=N()(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht("/shippings","GET",void 0,"public");case 2:t=e.sent,console.log("SHIPPING ",t),u(t),f(t[0]._id);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(e){console.log("CHECKED ",e),f(e)};return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},l&&l.map((function(e,t){return a.a.createElement(hr,{active:d,selected:d,checked:h,option:e,key:t})}))),a.a.createElement(Be,null,a.a.createElement(fn,{big:!0,secondary:!0,text:"Back",handleClick:function(){return n({type:"PREV_STEP"})}},a.a.createElement(rt.ArrowLeft,null)),a.a.createElement(fn,{big:!0,text:"Continue",handleClick:function(){return n({type:"NEXT_STEP"})}})))},Hr=n(14);function Yr(){var e=U()(["\n    width: 100%;\n    padding: 15px;\n    border-radius: 15px;\n    ","\n    border: 2px "," solid;\n    ","\n"]);return Yr=function(){return e},e}var Kr=function(e){var t,n=e.cartDispatch,o=Object(c.useSelector)((function(e){return e.basket})).basket,i=Object(c.useSelector)((function(e){return e.user})).user,l=Object(r.useState)(!1),s=G()(l,2),p=s[0],d=s[1],f=Object(r.useState)(""),m=G()(f,2),g=m[0],h=m[1],b=Object(r.useState)(0),E=G()(b,2),x=E[0],y=E[1],v=Object(r.useState)(null),O=G()(v,2),w=O[0],j=O[1],S=Object(Hr.useElements)(),k=Object(Hr.useStripe)(),_=i.customer_title,P=i.customer_firstname,C=i.customer_lastname,T=i.customer_email,D=i.customer_address1,I=(i.customer_address2,i.customer_postcode),R=i.customer_town,F=o.postage,z=o.products,L=o.carrierId;Object(r.useEffect)((function(){console.log("PAYMENT BASKET",o,"USER",i);var e=tt(z,F);y(e.toFixed(2))}),[o]),Object(r.useEffect)((function(){x>0&&U()}),[x]);var U=function(){var e=N()(A.a.mark((function e(){var t,n,r,a,c=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]&&c[0],!w){e.next=3;break}return e.abrupt("return");case 3:return n={order_customer:i._id,order_total:x,order_date:new Date,order_dispatched:!1,order_confirmed:t,order_items:o,order_postage:F,order_carrier:L},e.prev=4,e.next=7,ht("/orders","POST",n);case 7:r=e.sent,a=r.id,j(a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.log("ERROR CREATING ORDER ",e.t0);case 15:console.log("ORDER OBJECT ",n);case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}}(),B={style:{base:{fontSize:"24px",color:M,"::placeholder":{color:Q}},invalid:{},complete:{}},hidePostalCode:!0},q=function(){var e=N()(A.a.mark((function e(t){var r,a,o,c,i,l,u,s,p,f,m;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("Submitting ",t),d(!0),r={name:"".concat(_," ").concat(P," ").concat(C),email:T,address:{city:R,line1:D,state:R,postal_code:I}},(a=new Headers).append("Content-Type","application/json"),o={method:"GET",headers:a,redirect:"follow"},e.next=9,fetch("/api/payment_intents/?amount=".concat((100*x).toFixed(0)),o);case 9:return c=e.sent,e.next=12,c.text();case 12:return i=e.sent,console.log("STRIPE ENDPOINT ",i),l=S.getElement(Hr.CardElement),e.prev=15,e.next=18,k.createPaymentMethod({type:"card",card:l,billing_details:r});case 18:if(!(u=e.sent).hasOwnProperty("error")){e.next=25;break}return s=u.error||"",p=s.message,console.log("PAYMENT METHOD REQUEST ",p),d(!1),p&&h(p),e.abrupt("return");case 25:return e.next=27,k.confirmCardPayment(i,{payment_method:u.paymentMethod.id});case 27:return f=e.sent,console.log(f),d(!1),m={order_confirmed:!0},e.next=33,ht("/orders/".concat(w),"PUT",m);case 33:n({type:"CHECKOUT_SUCCESS"}),e.next=41;break;case 36:return e.prev=36,e.t0=e.catch(15),console.log("PAYMENT REQ ERR ",e.t0),d(!1),e.abrupt("return");case 41:case"end":return e.stop()}}),e,null,[[15,36]])})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement(ze,null,a.a.createElement("form",{onSubmit:function(e){return q(e)}},a.a.createElement(Ge,null,a.a.createElement(en,null,"Secure Payment")),a.a.createElement(Le,null,a.a.createElement(Vr,null,a.a.createElement(Hr.CardElement,{withUpdate:function(e){return console.log(e.value)},options:B})),a.a.createElement(tn,{danger:!0},g&&g)),a.a.createElement(Ue,null,a.a.createElement(Be,null,a.a.createElement(fn,(t={secondary:!0,big:!0,type:"button"},u()(t,"big",!0),u()(t,"text","Back"),u()(t,"handleClick",(function(){return n({type:"PREV_STEP"})})),t)),a.a.createElement(fn,{loading:p,type:"submit",big:!0,text:"Pay Â£"+x})))))},Vr=q.a.div(Yr(),"",M,""),Wr=function(e){return a.a.createElement(Re,{light:!0,narrow:!0,height:e.height},a.a.createElement(Ae,{width:850,mt:40},a.a.createElement(pr,{big:!0,handleChange:e.handleChange,submitHandler:e.handleSubmit,withBigButton:!0,loading:e.loading,value:e.searchValue,valid:e.valid,buttonText:e.btnText,label:e.label,type:"text",placeholder:e.placeholder})))};Wr.defaultProps={btnText:"Button Text",height:200,placeholder:"pass placeholder prop",handleChange:function(){},submitHandler:function(){}};var Jr=Wr,Xr=n(24),Qr=n.n(Xr);function $r(){var e=U()(["\n    :after, :before { \n    width: 15px;\n    height: 3px;\n    background-color: white; \n    position: relative;\n    left: 8px;\n    top: 13px;\n   }\n  &::after{\n    content: '';\n    transform: rotate(-45deg);\n    position: absolute;\n  }\n  &::before {\n    content: '';\n    transform: rotate(45deg);\n    position: absolute;\n  }\n"]);return $r=function(){return e},e}function Zr(){var e=U()(["\n  width: 30px;\n  height: 30px;\n  padding: 5px;\n  background-color: gray;\n  color: white;\n  position: absolute;\n  border-radius: 50%;\n  right: 20px;\n  top: 20px;\n  border: none;\n  z-index: 1000;\n  cursor: pointer;\n  transition: all 0.3s ease-in;\n  &:hover {\n    background-color: black;\n  }\n"]);return Zr=function(){return e},e}function ea(){var e=U()(["\n  z-index: 100;\n  background: white;\n  position: relative;\n  margin: 50vh auto;\n  border-radius: 3px;\n  max-width: 1000px;\n  min-height: 400px;\n  padding: 3.0rem;\n  border-radius: 25px;\n  transform: translateY(-50%);\n  overflow: hidden;\n"]);return ea=function(){return e},e}function ta(){var e=U()(["\n     position: fixed;\n        top: 0;\n    left: 0;\n    z-index: 1050;\n    width: 100%;\n    height: 100%;\n    overflow-x: hidden;\n    overflow-y: auto;\n    outline: 0;\n"]);return ta=function(){return e},e}function na(){var e=U()(["\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: 1040;\n    width: 100vw;\n    height: 100vh;\n    background-color: #000;\n    opacity: 0.5;\n"]);return na=function(){return e},e}var ra=function(e){var t=e.isShowing,n=e.hide,r=Sn()(e,["isShowing","hide"]);return t?Qr.a.createPortal(a.a.createElement(a.a.Fragment,null,a.a.createElement(aa,null),a.a.createElement(oa,{className:"modal-wrapper","aria-modal":!0,"aria-hidden":!0,tabIndex:-1,role:"dialog"},a.a.createElement(ca,{className:"modal"},a.a.createElement(ia,{onClick:n},a.a.createElement(la,null)),a.a.createElement("div",{className:"modal-header"}),r.children))),document.body):null},aa=q.a.div(na()),oa=q.a.div(ta()),ca=q.a.div(ea()),ia=q.a.button(Zr()),la=q.a.div($r());function ua(){var e=U()(["\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: flex-start;\n    max-width: 600px;\n"]);return ua=function(){return e},e}function sa(){var e=U()(["\n    display: flex;\n    flex-direction: column;\n    min-height: 220px;\n    max-height: 600px;>\n    max-width: 550px;\n    margin: 0px 25px 0px 40px;\n    margin-top: 50px;\n    z-index: 2;\n"]);return sa=function(){return e},e}function pa(){var e=U()(["\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    min-height: 400px;\n"]);return pa=function(){return e},e}var da=function(e){var t=Object(i.useHistory)(),n=Object(c.useSelector)((function(e){return e.basket})).basket;Object(r.useEffect)((function(){console.log("PREVEW BASKET",n.products)}),[n]);var o,l,u=e.product,s=u.id,p=u.product_picture_1,d=u.product_name,f=u.product_short_description,m=u.product_long_description,g=u.product_price,h=u.product_discount;return a.a.createElement(a.a.Fragment,null,a.a.createElement(fa,null,a.a.createElement("img",{src:"/drips-dark.svg",style:{position:"absolute",width:500,top:0,right:0,opacity:.8,zIndex:1}}),a.a.createElement(Pn,{style:{marginTop:30}},p&&a.a.createElement("img",{src:p.url})),a.a.createElement(ma,null,a.a.createElement(Qt,{style:{flex:1}},d),a.a.createElement(Zt,{style:{flex:1}},f),a.a.createElement(tn,{style:{flex:4}},(l=100,(o=m).length>l?o.substring(0,l-3)+"...  ":o+" "),a.a.createElement(cr,{onClick:function(){return e.viewProduct(s)}}," More info")),a.a.createElement(ga,null,h>0&&a.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"baseline",opacity:.4}},a.a.createElement(Zt,null,"Original Price. "),a.a.createElement(Qt,null,"Â£",g.toFixed(2))),a.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"baseline"}},a.a.createElement(Zt,null,h>0?"Sale Price.":"Price."),a.a.createElement(Qt,null,"Â£",(g-g*h/100).toFixed(2)))),a.a.createElement(Be,null,a.a.createElement(gn,{product:e.product,function:"add"}),n.products.length>0&&a.a.createElement(fn,{tertiary:!0,fixed:!0,text:"View Basket",med:!0,handleClick:function(){return t.push("/basket")}},a.a.createElement(rt.Layers,null)),a.a.createElement(fn,{text:"More info",med:!0,handleClick:function(){return e.viewProduct(s)}},a.a.createElement(rt.Layers,null))))))},fa=q.a.div(pa()),ma=q.a.div(sa()),ga=q.a.div(ua()),ha=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Re,{height:600},a.a.createElement("img",{src:"/drips.png",alt:"drips",style:{float:"right",width:"500px",transform:"translate(50px, -50px)"}}),"Footer"),a.a.createElement(Re,{light:!0,height:10}))},ba=function(e){var t=Object(It.useHistory)().location.pathname;return console.log("Location",t),a.a.createElement(Re,{dark:!0,height:180},re.map((function(e,t){return a.a.createElement(Vn,un()({},e,{key:t}))})),a.a.createElement("img",{src:"/drips.png",alt:"drips",style:{float:"right",width:"500px",transform:"translate(50px, -70px)",zIndex:"5"}}),a.a.createElement(Ie,null,a.a.createElement(Jt,{style:{maxWidth:550,transform:"translateY(-50px)"}},"We offer FREE delivery on all orders over Â£25")),a.a.createElement("img",{src:"/oversholder.webp",alt:"girl-pic",style:{position:"absolute",top:50,left:560,maxHeight:320}}))},Ea=n(25),xa=n.n(Ea);function ya(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function va(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ya(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ya(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oa=function(e){var t=Object(r.useState)({}),n=G()(t,2),o=n[0],l=n[1],s=Object(r.useState)(!1),p=G()(s,2),d=p[0],f=p[1],m=Object(c.useDispatch)(),g=Object(i.useHistory)();console.log("PROD SEARCH LOC :",g);var h=function(e){var t=new xa.a(e,{keys:["product_name","product_long_description","product_short_description"],includeScore:!0}).search(o.term).filter((function(e){return e.score<.6})).map((function(e){return e.item}));return console.log("FILTERED: ",t),t};Object(r.useEffect)((function(){console.log("Search for: ",o)}),[o]);var b=function(){var e=N()(A.a.mark((function e(){var t,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),console.log("pulling data from server ",o),e.next=4,ht("/products","GET",void 0,"public");case 4:t=e.sent,n=h(t),console.log("filtered results: ",n),m({type:"UPDATE_SEARCH",payload:n}),l({}),f(!1),g.push("/search-results");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a.a.createElement(Jr,{height:180,cols:"100%",valid:!1,loading:d,placeholder:"type product name here",btnText:"Search",searchValue:o.term,label:"Search our catalogue for your favorite products",handleChange:function(e){l(va(va({},o),{},u()({},"term",e.target.value)))},handleSubmit:function(){return b()}})},wa=function(){var e=Object(c.useSelector)((function(e){return e.categories||[]})).categories;return Object(r.useEffect)((function(){console.log("CAT ROW: ",e)}),[e]),a.a.createElement(a.a.Fragment,null,a.a.createElement(Re,{height:200},a.a.createElement(Wt,{light:!0},"Categories"),a.a.createElement("img",{src:"/drips.png",alt:"drips",style:{float:"right",width:"500px",transform:"translate(50px, -70px)",zIndex:"5"}})),a.a.createElement(Ne,{mb:"-100px"},e&&e.map((function(e,t){return a.a.createElement(vr,{key:t,name:e.category_name,image:e.category_image.formats.thumbnail.url,id:e._id})}))))};function ja(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Sa=function(e){var t=e.component,n=Sn()(e,["component"]),r=Nr().isAuthenticated;return console.log("PROTECTED ",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ja(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ja(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n)),a.a.createElement(i.Route,un()({exact:!0},n,{render:function(e){return r?a.a.createElement(i.Redirect,{to:{pathname:"/authenticate",state:{from:e.location}}}):a.a.createElement(t,e)}}))};function ka(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ka(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ka(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pa=function(e){var t=Object(c.useDispatch)(),n=Object(It.useHistory)();Object(r.useEffect)((function(){var t=new URLSearchParams(e.location.search).get("register");p({type:"UPDATE_FIELD",fieldName:"register",fieldValue:t})}),[e.location.search]);var o={loading:!1,errorMsg:"",authenticated:!1,fields:{register:m,identifier:"",password:"",password_confirmation:"",username:""}},i=Object(r.useReducer)((function(e,t){switch(t.type){case"UPDATE_FIELD":return _a(_a({},e),{},{fields:_a(_a({},e.fields),{},u()({},t.fieldName,t.fieldValue))});case"LOGGING_IN":return _a(_a({},e),{},{loading:!0});case"LOGGED_IN":return _a(_a({},e),{},{loading:!1});default:return e}}),o),l=G()(i,2),s=l[0],p=l[1],d=(s.authenticated,s.guest,s.loading),f=s.fields,m=(f.email,f.password,f.register),g=(f.username,f.password_confirmation,Gr({dispatch:t,loginState:s})),h=g.handleStrapiLogin,b=(g.errorMsg,g.isLoggedIn,function(){var e=N()(A.a.mark((function e(r){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),p({type:"LOGGING_IN"}),e.next=4,h(s.fields,t);case 4:p({type:"LOGGED_IN"}),n.push("/basket");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ie,null,a.a.createElement(Lr,{type:"standalone",data:s.fields,handleChange:function(e){var t=e.target,n=t.name,r=t.value,a=t.type,o=t.checked;"checkbox"!==a?(p({type:"UPDATE_FIELD",fieldName:n,fieldValue:r}),console.log("LOGIN STATE ",s.fields.email)):p({type:"UPDATE_FIELD",fieldName:n,fieldValue:o})},handleLogin:b,loading:d?1:void 0})))};function Ca(){var e=U()(["\n  overflow: hidden;\n"]);return Ca=function(){return e},e}function Ta(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Da(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ta(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ta(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ia(e){var t,n,o=Object(c.useSelector)((function(e){return e.products}));console.log("PRODUCTS ",o),o.products&&(t=o.products.filter((function(e){return!0===e.product_featured})),n=null==o?void 0:o.products.sort((function(e,t){return e.product_sold_quantity>t.product_sold_quantity?1:-1})));var l=Object(c.useDispatch)(),s=Object(i.useHistory)(),p=zr({selectedProduct:h,products:o}),d=p.isShowing,f=p.toggle,m=Object(r.useState)({}),g=G()(m,2),h=g[0],b=g[1],E=Object(r.useState)([]),x=G()(E,2),y=x[0],v=x[1],O=Object(r.useState)("POP"===s.action),w=G()(O,2),j=w[0],S=w[1],k=Object(r.useState)({email:""}),_=G()(k,2),P=_[0],C=_[1];Object(r.useEffect)((function(){if(console.log("KEYS: ","sk_test_rvboOk0S3wSR1tPGYuzzcjpV",s),process.browser){var e=localStorage.getItem("soap-cart");e&&(v(JSON.parse(e)),l({type:"SET_INITIAL_BASKET",payload:JSON.parse(e)}))}o.products.length||"PUSH"===s.action?S(!1):T()}),[,s.action]);var T=function(){var t=N()(A.a.mark((function t(){var n;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return S(!0),t.next=3,ht("/products","GET",void 0,"public");case 3:(n=t.sent)&&(l({type:"FETCH_PRODUCTS",payload:n}),S(!1)),console.log("MYAPI PRODUCTS ",n),console.log("HOME PROPS ",e);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){console.log("Changed Cart",y)}),[y]);var D=function(e){console.log("event");var t=o.products.filter((function(t){return t.id===e}));b(t[0]),console.log("SELECTED",h),f()};return a.a.createElement(a.a.Fragment,null,j?a.a.createElement(Cr,null):a.a.createElement(a.a.Fragment,null,a.a.createElement(Fe,null,a.a.createElement("img",{src:"/drips.png",alt:"drips",style:{float:"right",width:"500px",transform:"translateY(-30px)"}}),a.a.createElement("img",{src:"/logo-big.svg",alt:"chunky soap",style:{float:"left",width:"450px",transform:"translateX(-40px)"}}),a.a.createElement("img",{className:"girl-pic",src:"/girl.webp",alt:"chunky soap girl",style:{position:"absolute",width:"480px",transform:"translateX(-120px)",top:188}}),ne.map((function(e,t){return a.a.createElement(Vn,un()({},e,{key:t}))})),a.a.createElement("div",{style:{top:260,left:"800px",width:550,position:"absolute"}},a.a.createElement(Jt,null,"Natural soap bars & creams for all skin types"),a.a.createElement(Xt,null,"Because beauty is a fragile gift.."),a.a.createElement(Pt,{primary:!0,big:!0,style:{marginLeft:"70px",marginTop:"50px"}},a.a.createElement("div",{className:"script-font"},"Visit Shop")))),a.a.createElement(Ie,null,a.a.createElement(Ra,null,ae.map((function(e,t){return a.a.createElement(Vn,un()({},e,{key:t}))}))),a.a.createElement(Oa,null),a.a.createElement(Wt,null,"Featured Products"),a.a.createElement(zn,{perPage:3,data:t,handleClick:D}),a.a.createElement(wa,null),a.a.createElement(Wt,null,"Most Popular Products"),a.a.createElement(zn,{perPage:3,data:n,handleClick:D})),a.a.createElement("div",{style:{marginTop:"-100px"}},a.a.createElement(Jr,{cols:"100%",height:200,valid:!1,loading:!1,btnText:"Subscribe",placeholder:"your email address",label:"Subscribe to our newsletter to get special deals",handleChange:function(e){C(Da(Da({},P),{},u()({},"email",e.target.value)))},handleSubmit:function(){console.log("submitting: ",P)}})),a.a.createElement(ha,{height:800}),a.a.createElement(ra,{isShowing:d,hide:f},a.a.createElement(da,{product:h,viewProduct:function(e){s.push("/product/".concat(e))}}))))}var Ra=q.a.div(Ca());function Aa(){var e=U()(["\n    display: flex;\n    align-items: center;\n    justify-content: space-around;\n    list-style: none;\n    width: 70%;\n\n    li > a {\n        text-decoration: none;\n        color: ",";\n    }\n\n    .active {\n        color: red;\n    }\n\n"]);return Aa=function(){return e},e}function Fa(){var e=U()(["\n    width: 80%;\n    margin: 0px auto;\n    height: 90px;\n    background-color: white;\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n    ","\n    ","\n    \n    \n"]);return Fa=function(){return e},e}var Na=q.a.div(Fa(),(function(e){return/product|checkout/.test(e.location)&&" \n        background-color: ".concat(M,";\n    ")}),(function(e){return/checkout/.test(e.location)&&" \n        margin-top: -100px;\n    "})),za=q.a.ul(Aa(),W),Ga=Na;function La(){var e=U()(["\n    font-size: 20px;\n    letter-spacing: 2px;\n    width: 20%;\n    margin-left: 10px;\n"]);return La=function(){return e},e}var Ua=q.a.div(La());function Ba(){var e=U()(["\n    position: relative;\n    background-color: ",";\n    color: white;\n    height: 17px;\n    width: 17px;\n    border: 3px solid white;\n    border-radius: 50%;\n    text-align: center;\n    font-size: 14px;\n    font-weight: 600;\n    line-height: 17px;\n    transform: translate(-10px, -10px);\n"]);return Ba=function(){return e},e}function qa(){var e=U()(["\n  width: 20px;\n  height: 20px;\n  background-color: ",";\n  margin-left: 53%;\n  margin-top: -5px;\n  transform: rotate(45deg);\n"]);return qa=function(){return e},e}function Ma(){var e=U()(["\n  width: 700px;\n  height: 200px;\n  background-color: ",";\n  z-index: 13000;\n  position: absolute;\n  top: 60px;\n  border-radius: 20px;\n  box-shadow: 4px 4px 12px rgba(0, 0, 0, 0.3);\n"]);return Ma=function(){return e},e}var Ha=function(e){var t=Object(c.useDispatch)(),n=Object(It.useHistory)(),o=Nr().isAuthenticated;console.log("AUTH FROM HOOK",o);var i=Object(r.useState)(!1),l=G()(i,2),u=l[0],s=l[1];Object(r.useEffect)((function(){s(o),console.log("AUTHENTICATED",u)}),[o]),Object(r.useEffect)((function(){if(process.browser){var e=localStorage.getItem("soap-cart");e&&t({type:"SET_INITIAL_BASKET",payload:JSON.parse(e)})}N()(A.a.mark((function e(){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d||!d.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ht("/categories","GET",void 0,"public");case 4:n=e.sent,t({type:"FETCH_CATEGORIES",payload:n}),console.log("NAV CATEGORIES ",n);case 7:case"end":return e.stop()}}),e)})))()}),[]);var p=Object(c.useSelector)((function(e){return e.basket})).basket,d=Object(c.useSelector)((function(e){return e.categories||[]})).categories,f=Object(c.useSelector)((function(e){return e.user||{}})).user,m=Object(r.useState)(0),g=G()(m,2),h=g[0];g[1];console.log("CATS ",p,f);var b=Object(r.useState)(0),E=G()(b,2),x=E[0],y=E[1];return Object(r.useEffect)((function(){var e=p.products;if(console.log("PRODUCTS IN CART ",e),e.length>0){var t=e.map((function(e){return e.total_price})).reduce((function(e,t){return e+t}));y(t.toFixed(2)),console.log("TOTAL",t)}else y(0);console.log("basket context ",p.products)}),[p]),a.a.createElement(Ie,{nav:!0,location:n.location.pathname,key:h},a.a.createElement(Ga,{location:n&&n.location.pathname},a.a.createElement(Ua,null,"Chunky Soap Co"),a.a.createElement(za,null,a.a.createElement("li",null,a.a.createElement(wn,{to:"/"},"About")),a.a.createElement("li",null,a.a.createElement(wn,{to:"/contact"},"Contact")),a.a.createElement("li",null,a.a.createElement(wn,{to:"/category",withMenu:!0,menuData:d,menuTitle:"Categories",display:!0},"Categories")),a.a.createElement("li",null,nt(f)?a.a.createElement(wn,{to:"/authenticate"},"Sign In"):a.a.createElement("button",{onClick:function(){n.push("/authenticate"),bt.logout(t)}},"Sign Out")),a.a.createElement("li",null,a.a.createElement(fn,{primary:!0,sml:!0,text:"New Account",loading:"false",handleClick:function(){return n.push("/authenticate?register=true")}},a.a.createElement(rt.User,null))),a.a.createElement("li",null,a.a.createElement(wn,{to:"/basket"},"Â£",p&&x,a.a.createElement("div",{style:{marginLeft:10,display:"flex"}},a.a.createElement(rt.ShoppingCart,{color:K,size:28}),p.products.length>0&&a.a.createElement(Ya,null,p.products.length)))))))},Ya=(q.a.div(Ma(),Y),q.a.div(qa(),Y),q.a.div(Ba(),H)),Ka=function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ha,null),e.children)},Va=n(26),Wa=n.n(Va),Ja=n(27),Xa=n.n(Ja),Qa=n(28),$a=n.n(Qa),Za=n(29),eo=n.n(Za),to=n(20),no=n.n(to);function ro(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=no()(e);if(t){var a=no()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return eo()(this,n)}}var ao=function(e){var t=e.component;return function(e){$a()(r,e);var n=ro(r);function r(){return Wa()(this,r),n.apply(this,arguments)}return Xa()(r,[{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(ba,this.props),a.a.createElement(t,this.props))}}]),r}(a.a.Component)},oo=ao({component:function(e){var t=e.match.params._id,n=Object(c.useDispatch)(),o=Object(i.useHistory)(),l=Object(c.useSelector)((function(e){return e.products})),u=Object(r.useState)([]),s=G()(u,2),p=s[0],d=s[1],f=zr({products:l}),m=f.isShowing,g=f.toggle,h=f.handleClick,b=f.selectedProduct,E=Object(r.useState)("POP"===o.action),x=G()(E,2),y=x[0],v=x[1];Object(r.useEffect)((function(){N()(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:j(),v(!1);case 4:case"end":return e.stop()}}),e)})))(),console.log("GAT PAGE PRODS ",l)}),[l,t,o.action]);var O=function(e){o.push("/product/".concat(e))},w=function(){var e=N()(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(l.products.length>1)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ht("/products","GET",void 0,"public");case 4:t=e.sent,n({type:"FETCH_PRODUCTS",payload:t});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=l.products.find((function(e){return e.categories[0]._id===t}));d(e),console.log("FILTERED ",e,t)};return a.a.createElement(a.a.Fragment,null,y?a.a.createElement(Cr,null):a.a.createElement(a.a.Fragment,null,a.a.createElement(Ie,null,p&&a.a.createElement(zn,{perPage:3,data:p,handleClick:h})),a.a.createElement(ha,null),a.a.createElement(ra,{isShowing:m,hide:g},a.a.createElement(da,{product:b,viewProduct:O}))))}});function co(){var e=U()(["\n    margin-top: 50px;\n    margin-left: auto;\n"]);return co=function(){return e},e}function io(){var e=U()(["\n        margin-bottom: ",";\n    "]);return io=function(){return e},e}function lo(){var e=U()(["\n    width: 100%;\n    height: 1px;\n    background-color: ",";\n    ","\n"]);return lo=function(){return e},e}function uo(){var e=U()(["\n        padding: 10px 10%;\n    "]);return uo=function(){return e},e}function so(){var e=U()(["\n    margin: 0px 20px;\n    padding: 20px;\n    display: flex;\n    justify-content: flex-end;\n    align-items: center;\n    align-content: center;\n    flex-gap: 10px; \n    ","\n    ","\n"]);return so=function(){return e},e}var po=q.a.div(so(),(function(e){return e.narrow&&Object(B.css)(uo())}),""),fo=q.a.div(lo(),Z,(function(e){return e.mb&&Object(B.css)(io(),e.mb)})),mo=q.a.div(co());function go(){var e=U()(["\n  position: absolute;\n   min-width: 750px;\n   margin-top: 10px;\n   ","\n   left: 12%;\n   text-align: center;\n"]);return go=function(){return e},e}function ho(){var e=U()(["\n    flex: 1.3;\n    ","\n    min-width: 450px;\n    min-height: 800px;\n    margin-top: 40px;\n    padding: 20px 10px;\n       &::-webkit-scrollbar {\n        display: none;\n        }\n"]);return ho=function(){return e},e}function bo(){var e=U()(["\n    width: 50%;\n    min-width: 700px;\n    flex: 2;\n    padding: 0px;\n    margin: 0px 10px 20px 10px;   \n"]);return bo=function(){return e},e}function Eo(){var e=U()(["\n    display: flex;\n    flex-wrap: wrap;\n    max-width: 1394px;\n    margin: 50px auto;\n"]);return Eo=function(){return e},e}var xo=function(){var e=Object(c.useSelector)((function(e){return e.basket})).basket,t=Object(r.useState)(0),n=G()(t,2),o=n[0],i=n[1],l=Object(r.useState)(0),u=G()(l,2),s=u[0],p=u[1],d=Object(r.useReducer)(an,{step:1}),f=G()(d,2);f[0],f[1];Object(r.useEffect)((function(){tt(e.products)<25||e.postage>4?(console.log("BASKET POSTAGE ",e.postage),p(e.postage||0)):p(0),i(tt(e.products,s))}),[e]),Object(r.useEffect)((function(){i(tt(e.products,s))}),[s]);return a.a.createElement(a.a.Fragment,null,a.a.createElement("img",{src:"/drips-dark.svg",style:{position:"absolute",right:0,top:0,width:500,zIndex:0}}),a.a.createElement(Re,{light:!0,height:1500},a.a.createElement(Ie,null,a.a.createElement(Qt,null,"Checkout"),a.a.createElement(yo,null,a.a.createElement(vo,null,a.a.createElement(Ir,null)),a.a.createElement(Oo,{style:{borderLeft:"1px solid #D8D8D8"}},a.a.createElement(mo,{style:{transform:"translateY(-120px)"}},a.a.createElement(po,null,a.a.createElement($t,{style:{flex:3}},"Your Basket")),a.a.createElement("div",{style:{maxHeight:700}},e.products.length>0?e.products.map((function(e){return a.a.createElement(po,{key:e._id},a.a.createElement(tn,{style:{flex:1},big:!0},e.product_qty," x"),a.a.createElement(Pn,{sml:!0,style:{flex:1,marginRight:20}},a.a.createElement("img",{src:e.product_picture_1,style:{display:"block",maxHeight:"70px",maxWidth:"70px",width:"auto",height:"auto"}})),a.a.createElement("div",{style:{flex:3,paddingRight:20}},a.a.createElement(tn,null,e.product_name)),a.a.createElement("div",{style:{flex:1,marginRight:10,display:"flex",alignItems:"center",justifyContent:"space-around"}},a.a.createElement(tn,null,"Â£",e.total_price.toFixed(2))))})):a.a.createElement($t,null,"You Dont Have any Items in you basket yet")),a.a.createElement(po,null,a.a.createElement(fo,null)),a.a.createElement(po,{narrow:!0},a.a.createElement(pr,{withButton:!0,buttonText:"Apply",label:"Redeem Coupon / Discount Code",type:"text",placeholder:"COUPON CODE",handleChange:function(){}})),a.a.createElement(po,{narrow:!0},"Subtotal. Â£ ",tt(e.products).toFixed(2)),a.a.createElement(po,{narrow:!0},"Postage. Â£",s.toFixed(2)),a.a.createElement(po,{narrow:!0},"Sales Tax. Â£ ",(0).toFixed(2)),a.a.createElement(po,null,a.a.createElement(Qt,null,"Total. Â£",o.toFixed(2)))))))))},yo=q.a.div(Eo()),vo=q.a.div(bo()),Oo=q.a.div(ho(),"");q.a.div(go(),"");function wo(){var e=U()(["\n    background-color: transparent;\n    border: transparent solid 1px;\n    width: 50px;\n    height: 50px;\n"]);return wo=function(){return e},e}var jo=function(e){var t=Object(i.useParams)()._id,n=Object(c.useSelector)((function(e){return{currentProduct:e.currentProduct.currentProduct}})).currentProduct,o=Object(r.useState)(1),l=G()(o,2),u=l[0],s=l[1],p=Object(c.useDispatch)(),d=Object(i.useHistory)();Object(r.useEffect)((function(){f()}),[t]);var f=function(){var e=N()(A.a.mark((function e(){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht("/products?id=".concat(t),"GET",void 0,"public");case 2:n=e.sent,p({type:"FETCH_PRODUCT",payload:n[0]});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=Object(r.useCallback)((function(){var e=u>=2?u-1:u;console.log(e),s(e)})),g=Object(r.useCallback)((function(){console.log("triggered");var e=u<100?u+1:u;console.log(e),s(e)})),h=n.product_name,b=n.product_short_description,E=n.product_picture_1,x=n.product_long_description,y=n.product_price,v=n.product_discount;return a.a.createElement(a.a.Fragment,null,a.a.createElement("img",{src:"/drips-dark.svg",style:{position:"absolute",right:0,top:70,width:500,zIndex:1}}),a.a.createElement(Ie,null,a.a.createElement(Ae,null,a.a.createElement(Re,{light:!0,height:1050},n&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{style:{padding:"30px 0px 100px 0px",maxWidth:800,zIndex:1e3,position:"relative"}},a.a.createElement(Qt,null,h),a.a.createElement($t,{light:!0},b)),a.a.createElement("div",{style:{display:"flex",flexDirection:"columm",paddingLeft:"200",width:"100%",height:700,zIndex:2e3,position:"relative"}},a.a.createElement("div",{id:"leftside",style:{flex:2,paddingLeft:0,display:"flex",flexDirection:"column",justifyContent:"space-between",textAlign:"right"}},a.a.createElement(Pn,null,a.a.createElement("img",{src:E&&"http://localhost:1337".concat(E.url)})),a.a.createElement("div",{style:{flex:1,marginTop:50}},v>0&&a.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"baseline",opacity:.4,justifyContent:"flex-end"}},a.a.createElement(Zt,null,"Original Price. "),a.a.createElement(Qt,null," Â£",y.toFixed(2))),a.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"baseline",justifyContent:"flex-end"}},a.a.createElement(Zt,null,v>0?"Sale Price.":"Price."),a.a.createElement(Qt,null," Â£",(y-y*v/100).toFixed(2)))),a.a.createElement("div",{style:{flex:1,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end",width:"100%",margin:"10px 0px"}},a.a.createElement(tn,null,"Quantity"),a.a.createElement(So,{onClick:function(){return m()}},a.a.createElement(rt.MinusCircle,{color:"pink",size:34}))," ",u,a.a.createElement(So,{onClick:function(){return g()}},a.a.createElement(rt.PlusCircle,{color:"pink",size:34}))),a.a.createElement("div",{style:{flex:1}},a.a.createElement(gn,{quantity:u,product:n,function:"add"}))),a.a.createElement("div",{id:"rightside",style:{flex:4,paddingLeft:100,paddingRight:100}},a.a.createElement($t,{dark:!0},"Product Description"),a.a.createElement("div",{style:{minHeight:540}},a.a.createElement(tn,null,x)),a.a.createElement(Be,null,a.a.createElement(fn,{big:!0,text:"Back"},a.a.createElement(rt.ArrowLeft,null)),a.a.createElement(fn,{big:!0,primary:!0,text:"View Basket",handleClick:function(){return d.push("/basket")}},a.a.createElement(rt.CreditCard,null))))))))))},So=q.a.button(wo()),ko=ao({component:function(e){Object(c.useDispatch)();var t=Object(i.useHistory)(),n=Object(c.useSelector)((function(e){return e.searchResults.searchResults[0]})),o=Object(c.useSelector)((function(e){return e.products})),l=zr({products:o}),u=l.isShowing,s=l.toggle,p=l.handleClick,d=l.selectedProduct;Object(r.useEffect)((function(){console.log("__PRODUCTS: ",n)}),[n]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(Oa,null),n?a.a.createElement(Ie,null,a.a.createElement(Wt,null,"Your in luck!, here a your matches"),a.a.createElement(zn,{perPage:3,data:n,handleClick:p})):a.a.createElement(Ie,null,a.a.createElement(Re,{light:!0,height:400},a.a.createElement(Wt,null,"Ooops! We don't have that"))),a.a.createElement(ha,null),a.a.createElement(ra,{isShowing:u,hide:s},a.a.createElement(da,{product:d,viewProduct:function(e){t.push("/product/".concat(e))}})))}}),_o=n(30),Po=n.n(_o),Co=function(e){var t=e.match.params._id,n=Object(i.useHistory)(),o=Object(r.useState)(void 0),c=G()(o,2),l=c[0],u=c[1];Object(r.useEffect)((function(){s()}),[]);var s=function(){var e=N()(A.a.mark((function e(){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht("/orders/".concat(t),"GET",void 0,"public");case 2:n=e.sent,u(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){console.log("ORDER: ",l)}),[l]);var p,d,f,m,g,h,b,E,x,y;return a.a.createElement("div",null,a.a.createElement(Ie,null,a.a.createElement(Re,{light:!0},a.a.createElement("button",{style:{marginBottom:"30px"},onClick:function(){return n.push("/admin")}},"Back"),a.a.createElement("button",{style:{marginBottom:"30px"},onClick:function(){var e;(e=new Po.a("p","pt","a4")).html(document.querySelector("#content"),{callback:function(n){var r=e.internal.getNumberOfPages();n.deletePage(r),n.save("".concat(t,".pdf"))}})}},"Download Invoice"),a.a.createElement("div",{id:"content",style:{height:"838px",width:"591px",padding:"4px"}},l&&(p=l.order_items,d=l.order_total,f=l.order_carrier.shipping_carrier,m=l.order_customer,g=m.customer_address1,h=m.customer_address2,b=m.customer_firstname,E=m.customer_lastname,x=m.customer_town,y=m.customer_postcode,a.a.createElement(Me,{id:"invoice"},a.a.createElement(He,null,a.a.createElement(Zt,null,a.a.createElement("img",{src:"/logo.jpg",style:{width:"130px"}}),a.a.createElement("br",null),"RECEIPT")),a.a.createElement(Ye,null,a.a.createElement(tn,{sml:!0},b," ",E),a.a.createElement(tn,{sml:!0},g),a.a.createElement(tn,{sml:!0},h),a.a.createElement(tn,{sml:!0},x),a.a.createElement(tn,{sml:!0},y)),a.a.createElement(Ke,null,a.a.createElement(tn,{sml:!0,heavy:!0},"Item"),p&&p.products.map((function(e,t){return a.a.createElement("p",{key:t},a.a.createElement(tn,{sml:!0},e.product_name))})),a.a.createElement(tn,{sml:!0},"Postage: ",f)),a.a.createElement(Ve,null,a.a.createElement(tn,{sml:!0,heavy:!0},"Quantity"),p&&p.products.map((function(e,t){return a.a.createElement(tn,{sml:!0,key:t},e.product_qty)}))),a.a.createElement(We,null,a.a.createElement(tn,{sml:!0,heavy:!0},"Price"),p&&p.products.map((function(e,t){return a.a.createElement(tn,{sml:!0,key:t},"Â£ ",e.total_price.toFixed(2))})),a.a.createElement(tn,{sml:!0},"Â£ ",p.postage.toFixed(2))),a.a.createElement(Je,null,a.a.createElement(tn,null,"Total")),a.a.createElement(Xe,null,a.a.createElement(tn,{heavy:!0},"Â£ ",d))))))))},To=ao({component:function(e){var t=Object(c.useSelector)((function(e){return e.basket})).basket,n=Object(It.useHistory)(),o=Object(r.useState)(0),i=G()(o,2),l=i[0],u=i[1],s=Object(r.useState)(0),p=G()(s,2),d=p[0],f=p[1];Object(r.useEffect)((function(){console.log("BASKET POSTAGE",t.postage),u(t.postage||0),f(tt(t.products,l))}),[t]),Object(r.useEffect)((function(){f(tt(t.products,l))}),[l]),console.log("BASKET PAGE ",t);return a.a.createElement(a.a.Fragment,null,a.a.createElement(Re,{light:!0,color:"white",height:1e3},a.a.createElement(Ae,null,a.a.createElement(Qt,null,"Your Basket"),a.a.createElement(mo,null,a.a.createElement(po,null,a.a.createElement($t,{style:{flex:3}},"Product"),a.a.createElement($t,{style:{flex:1}},"Price"),a.a.createElement($t,{style:{flex:1}},"Quantity"),a.a.createElement($t,{style:{flex:1}},"Total")),a.a.createElement(fo,null),a.a.createElement(po,null),t.products.length>0?t.products.map((function(e){return a.a.createElement(po,{key:e._id},a.a.createElement(Pn,{sml:!0,style:{flex:1,marginRight:70}},a.a.createElement("img",{src:e.product_picture_1,style:{display:"block",maxHeight:"70px",maxWidth:"70px",width:"auto",height:"auto"}})),a.a.createElement("div",{style:{flex:2,paddingRight:90}},e.product_name," ",a.a.createElement("br",null),e.product_description),a.a.createElement("div",{style:{flex:1,margin:5}},"Â£",e.product_price),a.a.createElement("div",{style:{flex:.5,marginRight:75,display:"flex",justifyContent:"space-around",alignItems:"center"}},a.a.createElement(gn,{product:e,function:"delete",icon:!0},a.a.createElement(rt.MinusCircle,{color:"gray",size:28})),e.product_qty,a.a.createElement(gn,{product:e,function:"add",icon:!0},a.a.createElement(rt.PlusCircle,{color:"lightgreen",size:28}))),a.a.createElement("div",{style:{flex:1,marginRight:60,display:"flex",alignItems:"center",justifyContent:"space-around"}},"Â£",e.total_price.toFixed(2)))})):a.a.createElement($t,null,"You Dont Have any Items in you basket yet"),a.a.createElement(po,null,a.a.createElement(fo,null)),a.a.createElement(po,{narrow:!0},"Postage: Â£",l.toFixed(2)),a.a.createElement(po,{narrow:!0},"Sales Tax: Â£ ",(0).toFixed(2)),a.a.createElement(po,{narrow:!0},a.a.createElement($t,null,"Total: Â£",d.toFixed(2))),a.a.createElement(po,null,a.a.createElement(fn,{text:"Back",med:!0,secondary:!0,handleClick:function(){n.goBack()},style:{marginRight:"15px"}},a.a.createElement(rt.ArrowLeft,null)),a.a.createElement(fn,{text:"Secure Checkout",med:!0,handleClick:function(){return e="/checkout",void n.push(e);var e},style:{marginRight:"9%"}},a.a.createElement(rt.CreditCard,null)))))))}}),Do=n(31),Io=(n(38),Object(o.createStore)(I)),Ro=Object(Do.loadStripe)("pk_test_3o7rovRbtC8Fmec24VShO7pU");console.log("DEV: ","https://chunky-soap-api.herokuapp.com");var Ao=function(){return a.a.createElement(c.Provider,{store:Io},a.a.createElement(Hr.Elements,{stripe:Ro},a.a.createElement(i.Switch,null,a.a.createElement(Ka,{color:"light"},a.a.createElement(i.Route,{exact:!0,path:"/",component:Ia}),a.a.createElement(i.Route,{path:"/search-results",component:ko}),a.a.createElement(i.Route,{path:"/basket",component:To}),a.a.createElement(i.Route,{exact:!0,path:"/checkout",component:xo}),a.a.createElement(i.Route,{path:"/product/:_id",exact:!0,component:jo}),a.a.createElement(i.Route,{path:"/category/:_id",component:oo}),a.a.createElement(i.Route,{path:"/authenticate",component:Pa}),a.a.createElement(Sa,{path:"/admin",store:!0,component:Dt}),a.a.createElement(Sa,{path:"/admin/invoices/:_id",component:Co})))))},Fo=n(21),No=n.n(Fo),zo=n(32),Go=n(33),Lo=new(n.n(Go).a)("sk_test_rvboOk0S3wSR1tPGYuzzcjpV"),Uo=function(){var e=N()(A.a.mark((function e(t,n){var r,a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.query.amount,console.log(r),e.next=5,Lo.paymentIntents.create({amount:r,currency:"gbp"});case 5:a=e.sent,n.status(200).send(a.client_secret),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n.status(500).json({statusCode:500,message:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),Bo=n(39),qo=n(40),Mo=Bo.join(__dirname,"../build/public"),Ho=No()();Ho.disable("x-powered-by").use(No.a.static(Mo)).get("/api/stripe-payment",(function(e,t){console.log("STRIPE HANDLER ",e.query.data),t.status(200).json(JSON.parse(e.query.data))})).get("/api/payment_intents",Uo).get("/*",(function(e,t){var n={},r=Object(zo.renderToString)(a.a.createElement(i.StaticRouter,{context:n,location:e.url},a.a.createElement(Ao,null)));n.url?t.redirect(n.url):t.status(200).send('<!doctype html>\n    <html lang="">\n    <head>\n        <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n        <meta charset="utf-8" />\n        <title>Chunky Soap Company</title>\n        <meta name="viewport" content="width=device-width, initial-scale=1">\n        '.concat(qo.client.css?'<link rel="stylesheet" href="'.concat(qo.client.css,'">'):"","\n        ").concat('<script src="'.concat(qo.client.js,'" defer><\/script>'),'\n    </head>\n    <body>\n        <div id="root">').concat(r,"</div>\n    </body>\n</html>"))}));t.default=Ho}]);
//# sourceMappingURL=server.js.map