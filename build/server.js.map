{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"react\"","webpack:///external \"styled-components\"","webpack:///external \"@babel/runtime/helpers/taggedTemplateLiteral\"","webpack:///external \"@babel/runtime/helpers/slicedToArray\"","webpack:///external \"@babel/runtime/regenerator\"","webpack:///external \"react-redux\"","webpack:///external \"react-feather\"","webpack:///external \"@babel/runtime/helpers/asyncToGenerator\"","webpack:///external \"@babel/runtime/helpers/defineProperty\"","webpack:///external \"react-router-dom\"","webpack:///external \"@babel/runtime/helpers/extends\"","webpack:///external \"react-router\"","webpack:///external \"@babel/runtime/helpers/objectWithoutProperties\"","webpack:///external \"@babel/runtime/helpers/toConsumableArray\"","webpack:///external \"@stripe/react-stripe-js\"","webpack:///external \"react-loader-spinner\"","webpack:///external \"redux\"","webpack:///external \"lodash\"","webpack:///external \"moment\"","webpack:///external \"@babel/runtime/helpers/getPrototypeOf\"","webpack:///external \"express\"","webpack:///external \"http\"","webpack:///external \"universal-cookie\"","webpack:///./src/factories/Order.js","webpack:///external \"react-dom\"","webpack:///external \"fuse.js\"","webpack:///external \"react-useanimations\"","webpack:///external \"react-useanimations/lib/menu2\"","webpack:///external \"@babel/runtime/helpers/classCallCheck\"","webpack:///external \"@babel/runtime/helpers/createClass\"","webpack:///external \"@babel/runtime/helpers/inherits\"","webpack:///external \"@babel/runtime/helpers/possibleConstructorReturn\"","webpack:///external \"jspdf\"","webpack:///external \"@stripe/stripe-js\"","webpack:///external \"react-dom/server\"","webpack:///external \"stripe\"","webpack:///./src/index.js","webpack:///external \"promise-retry\"","webpack:///./node_modules/react-loader-spinner/dist/loader/css/react-spinner-loader.css","webpack:///./src/styles/global.css","webpack:///external \"path\"","webpack:///./src/reducers/productReducer.js","webpack:///./src/reducers/userReducer.js","webpack:///./src/reducers/basketReducer.js","webpack:///./src/reducers/currentProductReducer.js","webpack:///./src/reducers/searchReducer.js","webpack:///./src/reducers/ordersReducer.js","webpack:///./src/reducers/uiReducer.js","webpack:///./src/reducers/index.js","webpack:///./src/reducers/categoryReducer.js","webpack:///./src/styles/variables.js","webpack:///./src/styles/layout.js","webpack:///./src/helpers/functions.js","webpack:///./src/components/admin/OrderListItem.js","webpack:///./src/components/admin/OrderItemDetail.js","webpack:///./src/helpers/auth.js","webpack:///./src/helpers/request.js","webpack:///./src/helpers/api.js","webpack:///./src/helpers/strapi.js","webpack:///./src/styles/components/button.js","webpack:///./src/containers/AdminPage.js","webpack:///./src/styles/typography.js","webpack:///./src/components/checkOutReducer.js","webpack:///./src/components/ui/AnimatedButton.js","webpack:///./src/components/ui/AddToCartBtn.js","webpack:///./src/styles/ui/dropMenu.js","webpack:///./src/components/ui/DropDownMenu.js","webpack:///./src/components/ui/PageLink.js","webpack:///./src/styles/ui/productFrame.js","webpack:///./src/components/ui/ProductItem.js","webpack:///./src/components/ui/ProductSlider.js","webpack:///./src/styles/ui/bubble.js","webpack:///./src/styles/ui/step.js","webpack:///./src/styles/ui/textInput.js","webpack:///./src/styles/ui/linkButton.js","webpack:///./src/styles/ui/categoryFrame.js","webpack:///./src/components/ui/WxStep.js","webpack:///./src/components/ui/SimpleTextInput.js","webpack:///./src/components/ui/ShippingOption.js","webpack:///./src/components/ui/Category.js","webpack:///./src/components/ui/PageLoader.js","webpack:///./src/components/ui/SideMenu.js","webpack:///./src/components/CheckoutSteps.js","webpack:///./src/components/CheckoutSuccess.js","webpack:///./src/hooks/useIsAuthentcated.js","webpack:///./src/hooks/useModal.js","webpack:///./src/hooks/useStrapiLogin.js","webpack:///./src/hooks/useViewportCheck.js","webpack:///./src/components/LoginForm.js","webpack:///./src/components/CheckoutEditBilling.js","webpack:///./src/components/ShippingOptions.js","webpack:///./src/components/StripePay.js","webpack:///./src/components/OptIn.js","webpack:///./src/components/Modal.js","webpack:///./src/components/ProductPreview.js","webpack:///./src/components/Footer.js","webpack:///./src/components/Hero.js","webpack:///./src/components/ProductSearch.js","webpack:///./src/components/CategoryRow.js","webpack:///./src/components/PrivateRoute.js","webpack:///./src/styles/ui/basket.js","webpack:///./src/styles/components/topnav.js","webpack:///./src/styles/logos.js","webpack:///./src/components/Navbar.js","webpack:///./src/components/layout/WithNavbar.js","webpack:///./src/components/layout/WithHero.js","webpack:///./src/components/Basket.js","webpack:///./src/components/ScrollToTop.js","webpack:///./src/containers/AuthPage.js","webpack:///./src/containers/HomePage.js","webpack:///./src/containers/CategoriesPage.js","webpack:///./src/containers/CheckoutPage.js","webpack:///./src/containers/ProductPage.js","webpack:///./src/containers/SearchResults.js","webpack:///./src/containers/InvoicePage.js","webpack:///./src/App.js","webpack:///./src/api/payment_intents.js","webpack:///./src/server.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","Order","user","basket","cartTotal","OrderConfirmation","orderId","customer_title","customer_firstname","email","customer_lastname","customer_address1","customer_address2","customer_postcode","customer_town","this","message_sent","to_address","from_address","message_subject","message_text","message_body","customer_name","order_id","cart_total","products","email_banner_image","email_template_name","OrderFactory","type","app","http","createServer","listen","process","console","log","on","error","initialState","total","postage","carrierId","currentProduct","searchResults","searchReducer","state","action","payload","orders","ordersReducer","showMenu","showCategoryMenu","uiReducer","combineReducers","categories","filter","item","_id","shipping_cost","id","ui","palette","heroBubbles","size","opac","x","dark","headerBubbles","bodyBubbles","Container","styled","div","props","nav","css","location","test","vars","Section","narrow","height","light","mobile","Wrapper","width","mt","Hero","viewPort","SlideGrid","mb","sm","Frame","FrameHeader","FrameBody","FrameFooter","ButtonRow","Divider","Invoice","Logo","Address","ProductName","ProductQty","ProductTotal","Footer","FooterTotal","getCartTotal","cart","tax","length","totals","map","total_price","tmpValue","reduce","a","b","basketValue","OrderListItem","date","order","order_total","createdAt","order_items","order_customer","useState","currentItem","setCurrentItem","style","padding","display","flexDirection","justifyContent","alignItems","marginBottom","justifyItems","borderBottom","moment","Date","format","order_carrier","shipping_carrier","secondary","sml","onClick","items","OrderItemDetail","marginBotton","transition","className","flexBasis","flexGrow","product_name","product_price","product_qty","toFixed","borderTop","margin","to","cookies","Cookies","parse","JSON","stringify","auth","clear","localStorage","getItem","removeItem","sessionStorage","clearAppStorage","clearUser","clearUserInfo","clearToken","tokenKey","userInfo","getToken","getUserInfo","set","isLocalStorage","isEmpty","setItem","setToken","setUserInfo","parseJSON","response","json","checkStatus","status","then","responseFormatted","Error","statusText","formatQueryParams","params","keys","k","encodeURIComponent","join","request","url","options","headers","assign","token","Authorization","body","fetch","method","data","apiAddress","baseURL","myHeaders","Headers","append","raw","requestOptions","credentials","redirect","retryFetch","retries","retryCodes","includes","err","login","dispatch","jwt","rememberMe","message","register","createCustomer","customer","customer_created","myApi","res","logout","WxButton","button","fixed","big","xl","med","disabled","primary","tertiary","AdminPage","useSelector","numberPerPage","pageCount","currentData","useReducer","paginationState","paginationDispatch","useDispatch","useEffect","callApi","paginatedOrders","slice","undefined","alignContent","sort","numberOfPages","Math","round","Array","fill","index","renderButtons","SectionHeading","h1","BannerHeading","BannerHeading2","h3","Heading1","Heading2","h2","Heading3","SubHeading1","Paragraph","centered","danger","heavy","checkoutReducer","authenticated","guest","step","loading","errorMsg","fields","fieldName","fieldValue","password","username","identifier","AnimatedButton","withIcon","handleClick","children","color","timeout","text","defaultProps","AddToCart","currentCart","setCurrentCart","setLoading","added","setAdded","product","product_short_description","product_picture_1","product_discount","quantity","browser","cartInStorage","renderLoader","checkIfInCart","removeFromCart","itemsInCart","newCartArray","itemIndex","findIndex","newArray","el","parseFloat","addToCart","setTimeout","adjustedPrice","newProduct","product_description","icon","maxWidth","IconButton","CategoryMenu","Pointer","DropDownMenu","closeMenu","menuData","title","onMouseLeave","category_name","PageLink","str","withMenu","menuTitle","hovered","setHovered","setShowMenu","history","useHistory","useLocation","fontWeight","marginRight","pathname","match","altStyle","handleMouseOver","e","preventDefault","push","href","onMouseOver","onMouseOut","ProductFrame","ProductItem","setProduct","product_featured","marginTop","clickEvent","src","alt","maxHeight","position","bottom","right","visibility","Pill","info","marginLeft","fontSize","Prices","zIndex","opacity","textDecoration","ProductSlider","perPage","rest","sliceArray","setSliceArray","currentPage","setCurrentPage","productsPerPage","slices","ceil","Dots","Dot","page","target","selectPage","Bubble","y","Step","number","TextInput","input","inline","withButton","valid","LinkButton","CategoryFrame","WxStep","transform","label","SimpleTextInput","ref","withBigButton","submitHandler","handleChange","buttonText","cols","direction","onChange","onFocus","textAlign","onSubmit","forwardRef","ShippingOption","option","checked","selected","Label","htmlFor","Option","CarrierOption","shipping_image","shipping_description","Category","image","navigate","breathe","keyframes","LoadingPage","Loader","PageLoader","SideMenu","SideMenuContainer","show","steps","no","CheckoutSteps","password_confirmation","cartState","cartDispatch","_","query","apiCall","window","scrollTo","handleStrapiLogin","strapi","Steps","handleLogin","buttonClick","CheckoutSuccess","useIsAuthenticated","isAuthenticated","setIsAuthenticated","useModal","isShowing","setIsShowing","selectedProduct","setSelectedProduct","toggle","useStrapiLogin","loginState","isLoggedIn","useViewportCheck","viewport","setViewport","handleWindowResize","innerWidth","addEventListener","removeEventListener","LoginForm","myRefs","useRef","views","forms","currentView","setCurrentView","current","placeholder","required","EditBilling","editing","setEditing","address","setAddress","handleInputChange","values","submitForm","goBack","flexWrap","addressForm","ShippingOptions","setOptions","currentOption","setCurrentOption","shippingDetails","find","shippingCost","fn","result","selectOption","active","StripePay","isLoading","setIsLoading","errorMessage","setErrorMessage","setCartTotal","setOrderId","elements","useElements","stripe","useStripe","customer_email","totalToPay","createOrder","completed","newOrder","order_date","order_dispatched","order_confirmed","order_postage","cardElementOptions","base","invalid","complete","hidePostalCode","handleFormSubmit","billingDetails","city","line1","postal_code","clientSecret","cardElement","getElement","CardElement","createPaymentMethod","card","billing_details","paymentMethodRequest","confirmCardPayment","payment_method","paymentMethod","confirmedCardPayment","confirmationEmail","emailData","CardElementWrapper","withUpdate","OptIn","handleSubmit","searchValue","btnText","Modal","hide","ReactDOM","createPortal","Fragment","ModalOverlay","ModalWrapper","aria-modal","aria-hidden","tabIndex","role","ModalMain","CloseButton","Cross","document","ProductPreview","string","product_long_description","ProductInfo","top","ProductText","flex","substring","viewProduct","InlinePrices","function","FooterGrid","FooterList","ul","FooterListItem","li","float","left","ProductSearch","searchTerm","setSearchTerm","searchFilter","filtered","Fuse","includeScore","search","term","score","getData","CategoryRow","category_image","formats","thumbnail","PrivateRoute","Component","component","exact","render","from","ProductRow","BasketWrapper","TopNav","NavList","Navbar","setLoggedIn","_categories","basketTotal","setBasketTotal","myArray","backgroundColor","border","ItemCountCircle","animation","menu","strokeColor","fillColor","wrapperStyle","WithNavbar","withHero","React","setPostage","setTotal","paddingRight","ScrollToTop","AuthPage","isRegistration","URLSearchParams","loginDispatch","HomePage","featured","popular","product_sold_quantity","optinMail","setOptinMail","_apiCall","Bubbles","filteredProducts","setFilteredProducts","filterProductsById","CheckoutPage","CheckoutWrapper","CheckoutActions","BasketSection","borderLeft","ProductPage","useParams","setQuantity","decreaseQuantity","useCallback","newQuantity","increaseQuantity","paddingLeft","SimpleButton","minHeight","InvoicePage","setOrder","doc","jsPDF","html","querySelector","callback","pdf","internal","getNumberOfPages","deletePage","save","store","createStore","stripePromise","loadStripe","App","path","SearchResults","Basket","CategoriesPage","Stripe","req","amount","paymentIntents","currency","paymentIntent","send","client_secret","statusCode","assets","publicFolder","__dirname","server","express","disable","use","payment_intents","context","markup","renderToString","client","js"],"mappings":"2BACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QA0Df,OArDAF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,IAIjBlC,EAAoBA,EAAoBmC,EAAI,I,gBClFrDhC,EAAOD,QAAUkC,QAAQ,U,cCAzBjC,EAAOD,QAAUkC,QAAQ,sB,cCAzBjC,EAAOD,QAAUkC,QAAQ,iD,cCAzBjC,EAAOD,QAAUkC,QAAQ,yC,cCAzBjC,EAAOD,QAAUkC,QAAQ,+B,cCAzBjC,EAAOD,QAAUkC,QAAQ,gB,cCAzBjC,EAAOD,QAAUkC,QAAQ,kB,cCAzBjC,EAAOD,QAAUkC,QAAQ,4C,cCAzBjC,EAAOD,QAAUkC,QAAQ,0C,cCAzBjC,EAAOD,QAAUkC,QAAQ,qB,cCAzBjC,EAAOD,QAAUkC,QAAQ,mC,cCAzBjC,EAAOD,QAAUkC,QAAQ,iB,cCAzBjC,EAAOD,QAAUkC,QAAQ,mD,cCAzBjC,EAAOD,QAAUkC,QAAQ,6C,cCAzBjC,EAAOD,QAAUkC,QAAQ,4B,cCAzBjC,EAAOD,QAAUkC,QAAQ,yB,cCAzBjC,EAAOD,QAAUkC,QAAQ,U,cCAzBjC,EAAOD,QAAUkC,QAAQ,W,4rDCAzBjC,EAAOD,QAAUkC,QAAQ,W,cCAzBjC,EAAOD,QAAUkC,QAAQ,0C,cCAzBjC,EAAOD,QAAUkC,QAAQ,Y,cCAzBjC,EAAOD,QAAUkC,QAAQ,S,cCAzBjC,EAAOD,QAAUkC,QAAQ,qB,cCGzB,SAASC,EAAMC,EAAMC,EAAQC,IAK7B,SAASC,EAAkBH,EAAMC,EAAQC,EAAWE,GACiGJ,EAAzIK,eADiD,IACjCC,EAAyHN,EAAzHM,mBAAuCC,GAAkFP,EAArGQ,kBAAqGR,EAAlFO,OAAkFP,EAA3ES,kBAA2ET,EAAxDU,kBAAwDV,EAArCW,kBAAqCX,EAAlBY,cAC/HC,KAAKC,cAAe,EACpBD,KAAKE,WAAaR,EAClBM,KAAKG,aAAe,yBACpBH,KAAKI,gBAAkB,0BACvBJ,KAAKK,aAAe,kDACpBL,KAAKM,aAAe,CAChBC,cAAed,EACfe,SAAUjB,EACVkB,WAAYpB,EACZqB,SAAUtB,EAAOsB,SACjBC,mBAAoB,qEAExBX,KAAKY,oBAAsB,eAkB/B5D,EAAOD,QAAU,CACb8D,aAhBJ,WACIb,KAAKzB,OAAS,SAACY,EAAMC,EAAQC,EAAWE,EAASuB,GAC7C,OAAQA,GACJ,KAAK,EACD,OAAO,IAAIxB,EAAkBH,EAAMC,EAAQC,EAAWE,GAE1D,KAAK,EACD,OAAO,IAAIL,EAAMC,EAAMC,GAE3B,QACI,MAAO,Q,cCnCvBpC,EAAOD,QAAUkC,QAAQ,c,cCAzBjC,EAAOD,QAAUkC,QAAQ,Y,cCAzBjC,EAAOD,QAAUkC,QAAQ,wB,cCAzBjC,EAAOD,QAAUkC,QAAQ,kC,cCAzBjC,EAAOD,QAAUkC,QAAQ,0C,cCAzBjC,EAAOD,QAAUkC,QAAQ,uC,cCAzBjC,EAAOD,QAAUkC,QAAQ,oC,cCAzBjC,EAAOD,QAAUkC,QAAQ,qD,cCAzBjC,EAAOD,QAAUkC,QAAQ,U,cCAzBjC,EAAOD,QAAUkC,QAAQ,sB,cCAzBjC,EAAOD,QAAUkC,QAAQ,qB,cCAzBjC,EAAOD,QAAUkC,QAAQ,W,8DCAzB,4BAEI8B,EAAM9B,EAAQ,IAAR,QAEK+B,IAAKC,aAAaF,GAK9BG,OAAOC,KAA0B,WAChCC,QAAQC,IAAI,iBAEbC,GAAG,SAAS,SAAAC,GACXH,QAAQC,IAAIE,O,cCbhBvE,EAAOD,QAAUkC,QAAQ,kB,cCCzBjC,EAAOD,QAAU,I,cCAjBC,EAAOD,QAAU,I,cCDjBC,EAAOD,QAAUkC,QAAQ,S,u8DCAzB,IAAMuC,EAAe,CACjBd,SAAU,I,ikBCDd,IAAMc,EAAe,CACjBrC,KAAM,I,ikBCDV,IAAMqC,EAAe,CACjBpC,OAAQ,CACJsB,SAAU,GACVe,MAAO,EACPC,QAAS,EACTC,UAAW,O,koCCJnB,IAAMH,EAAe,CACjBI,eAAgB,I,ikBCFpB,IAAMJ,EAAe,CACjBK,cAAe,IAcJC,EAZO,WAAmC,IAAlCC,EAAkC,uDAA1BP,EAAeQ,EAAW,uCACrD,OAAOA,EAAOlB,MACX,IAAK,gBACD,cACOiB,GADP,IAEIF,cAAeG,EAAOC,UAE7B,QACA,OAAOF,I,ikBCXf,IAAMP,EAAe,CACjBU,OAAQ,IAeGC,EAZO,WAAkC,IAAjCJ,EAAiC,uDAAzBP,EAAcQ,EAAW,uCACpD,OAAOA,EAAOlB,MACV,IAAK,aACD,cACOiB,GADP,IAEIG,OAAQF,EAAOC,UAEvB,QACI,OAAOF,I,ikBCZnB,IAAMP,EAAe,CACjBY,UAAU,EACVC,kBAAkB,GAyBPC,EAvBG,WAAkC,IAAjCP,EAAiC,uDAAzBP,EAAcQ,EAAW,uCAChD,OAAQA,EAAOlB,MACX,IAAK,YACD,cACOiB,GADP,IAEIK,UAAU,IAElB,IAAK,YACD,cACOL,GADP,IAEIK,UAAU,IAElB,IAAK,kBACD,cACOL,GADP,IAEIM,kBAAmBN,EAAMM,mBAGjC,QACI,OAAON,ICbJQ,4BAAgB,CAC3BX,eJPW,WAA6D,IAA9BG,EAA8B,uDAAtBP,EAAcQ,EAAQ,uCACxE,OAAOA,EAAOlB,MACV,IAAK,gBACD,cACOiB,GADP,IAEIH,eAAgBI,EAAOC,UAE/B,QACI,OAAOF,IIAfrB,SPTW,WAAsD,IAA9BqB,EAA8B,uDAAtBP,EAAcQ,EAAQ,uCAIjE,OAHAZ,QAAQC,IAAI,QAASW,EAAOC,SAC5Bb,QAAQC,IAAI,cAAeU,EAAMS,YACjCpB,QAAQC,IAAI,mBAAoBW,EAAOC,SAChCD,EAAOlB,MACV,IAAK,iBACD,cACOiB,GADP,IAEIrB,SAAUsB,EAAOC,UAEzB,QACI,OAAOF,IODf3C,OLJW,WAAmD,IAA5B2C,EAA4B,uDAAtBP,EAAcQ,EAAQ,uCAQ9D,OAPAZ,QAAQC,IAAI,SAAUW,EAAOC,SAOtBD,EAAOlB,MACV,IAAK,qBACD,cACMiB,GADN,IAEI3C,OAAQ,CACJsB,SAASsB,EAAOC,WAG5B,IAAK,eACD,cACOF,GADP,IAEI3C,OAAQoC,EAAapC,SAE7B,IAAK,gBACD,cACO2C,GADP,IAEI3C,OAAQ,CAAEsB,SAAUsB,EAAOC,WAEnC,IAAK,qBACD,cACOF,GADP,IAEI3C,OAAQ,CACJsB,SAAUqB,EAAM3C,OAAOsB,SAAS+B,QAAO,SAAAC,GAAI,OAAIA,EAAKC,KAAOX,EAAOC,QAAQU,UAGtF,IAAK,eACA,cACOZ,GADP,IAEIN,MAAOO,EAAOC,UAEvB,IAAK,cACD,cACOF,GADP,IAEI3C,OAAQ,OACD2C,EAAM3C,QADP,IAEFsC,QAASM,EAAOC,QAAQW,cACxBjB,UAAWK,EAAOC,QAAQY,OAGlC,QACI,OAAOd,IK3CnBS,WCJW,WAA6C,IAApBT,EAAoB,uDAAZ,GAAIC,EAAQ,uCAC1D,OAAQA,EAAOlB,MACb,IAAK,mBACH,cACKiB,GADL,IAEES,WAAYR,EAAOC,UAEvB,QACE,OAAOF,IDHT5C,KNXW,WAAmD,IAA9B4C,EAA8B,uDAAtBP,EAAcQ,EAAQ,uCAC9D,OAAOA,EAAOlB,MACV,IAAK,mBACD,cACOiB,GADP,IAEI5C,KAAM6C,EAAOC,UAErB,IAAK,mBACD,cACOF,GADP,IAEI5C,KAAM,KAEd,QACI,OAAO4C,IMDfF,cAAeC,EACfI,OAAQC,EACRW,GAAIR,I,gFEhBSS,EACK,UADLA,EAEM,UAFNA,EAGM,UAHNA,EAIQ,UAJRA,EAMM,UANNA,EAOC,UAPDA,EAQG,UARHA,GAUE,UAVFA,GAWG,UAXHA,GAaG,UAbHA,GAcG,UAdHA,GAeG,UAfHA,GAiBI,UAURC,GAAc,CAAC,CAACC,KAAM,IAAKC,KAAM,GAAKC,EAAG,GAAIhF,EAAG,KAC1C,CAAC8E,KAAM,IAAKC,KAAM,GAAKC,EAAG,IAAKhF,EAAE,KACjC,CAAC8E,KAAM,IAAKC,KAAM,GAAKC,EAAE,KAAMhF,EAAE,KACjC,CAAC8E,KAAM,IAAKC,KAAM,GAAKC,EAAE,IAAKhF,EAAG,KACjC,CAAC8E,KAAM,GAAIC,KAAM,GAAKC,EAAE,IAAKhF,EAAG,KAChC,CAAC8E,KAAM,GAAIC,KAAM,GAAKC,EAAG,GAAIhF,EAAG,IAAKiF,KAAM,OAC3C,CAACH,KAAM,IAAKC,KAAM,GAAKC,EAAG,IAAKhF,EAAG,IAAKiF,KAAM,QAGnDC,GAAgB,CAAC,CAACJ,KAAM,GAAIC,KAAM,GAAKC,EAAG,IAAKhF,EAAG,KAC5C,CAAC8E,KAAM,GAAIC,KAAM,GAAKC,EAAG,IAAKhF,EAAE,KAChC,CAAC8E,KAAM,GAAIC,KAAM,GAAKC,EAAE,IAAKhF,EAAE,KAC/B,CAAC8E,KAAM,IAAKC,KAAM,GAAKC,EAAE,IAAKhF,EAAG,KACjC,CAAC8E,KAAM,GAAIC,KAAM,GAAKC,EAAE,IAAKhF,EAAG,KAChC,CAAC8E,KAAM,IAAKC,KAAM,GAAKC,EAAE,IAAKhF,EAAG,KACjC,CAAC8E,KAAM,GAAIC,KAAM,GAAKC,EAAG,IAAKhF,EAAG,IAAKiF,KAAM,OAC5C,CAACH,KAAM,IAAKC,KAAM,GAAKC,EAAG,IAAKhF,EAAG,IAAKiF,KAAM,QAGnDE,GAAc,CACP,CAACL,KAAM,GAAIC,KAAM,GAAKC,EAAG,IAAKhF,EAAG,KAAMiF,KAAM,OAC9C,CAACH,KAAM,GAAIC,KAAM,GAAKC,EAAG,IAAKhF,EAAE,KAAMiF,KAAM,OAC5C,CAACH,KAAM,GAAIC,KAAM,GAAKC,EAAE,IAAKhF,EAAE,KAAMiF,KAAM,OAC3C,CAACH,KAAM,IAAKC,KAAM,GAAKC,EAAE,IAAKhF,EAAG,KAAMiF,KAAM,OAC7C,CAACH,KAAM,GAAIC,KAAM,GAAKC,EAAE,IAAKhF,EAAG,KAAMiF,KAAM,OAC5C,CAACH,KAAM,IAAKC,KAAM,GAAKC,EAAE,IAAKhF,EAAG,KAAMiF,KAAM,OAC7C,CAACH,KAAM,GAAIC,KAAM,GAAKC,EAAG,IAAKhF,EAAG,KAAMiF,KAAM,OAC7C,CAACH,KAAM,IAAKC,KAAM,GAAKC,EAAG,IAAKhF,EAAG,KAAMiF,KAAM,OAC9C,CAACH,KAAM,IAAKC,KAAM,GAAKC,EAAE,KAAMhF,EAAG,KAAMiF,KAAM,OAC9C,CAACH,KAAM,GAAIC,KAAM,GAAKC,EAAG,KAAMhF,EAAG,KAAMiF,KAAM,OAC9C,CAACH,KAAM,GAAIC,KAAM,GAAKC,EAAG,KAAMhF,EAAG,KAAMiF,KAAM,OAC9C,CAACH,KAAM,GAAIC,KAAM,GAAKC,EAAG,IAAKhF,EAAE,KAAMiF,KAAM,OAC3C,CAACH,KAAM,GAAIC,KAAM,GAAKC,EAAG,IAAKhF,EAAG,KAAMiF,KAAM,OAC9C,CAACH,KAAM,GAAIC,KAAM,GAAKC,EAAG,IAAKhF,EAAE,KAAMiF,KAAM,OAC5C,CAACH,KAAM,GAAIC,KAAM,GAAKC,EAAE,IAAKhF,EAAE,KAAMiF,KAAM,OAC3C,CAACH,KAAM,IAAKC,KAAM,GAAKC,EAAE,IAAKhF,EAAG,KAAMiF,KAAM,OAC7C,CAACH,KAAM,GAAIC,KAAM,GAAKC,EAAE,IAAKhF,EAAG,KAAMiF,KAAM,OAC5C,CAACH,KAAM,IAAKC,KAAM,GAAKC,EAAE,IAAKhF,EAAG,KAAMiF,KAAM,OAC7C,CAACH,KAAM,GAAIC,KAAM,GAAKC,EAAG,IAAKhF,EAAG,KAAMiF,KAAM,OAC7C,CAACH,KAAM,IAAKC,KAAM,GAAKC,EAAG,IAAKhF,EAAG,KAAMiF,KAAM,OAC9C,CAACH,KAAM,IAAKC,KAAM,GAAKC,EAAE,KAAMhF,EAAG,KAAMiF,KAAM,OAC9C,CAACH,KAAM,GAAIC,KAAM,GAAKC,EAAG,KAAMhF,EAAG,KAAMiF,KAAM,OAC9C,CAACH,KAAM,GAAIC,KAAM,GAAKC,EAAG,KAAMhF,EAAG,IAAMiF,KAAM,OAC9C,CAACH,KAAM,GAAIC,KAAM,GAAKC,EAAG,IAAKhF,EAAG,KAAMiF,KAAM,Q,+uJCrEzD,IAAMG,GAAYC,IAAOC,IAAV,MAMlB,SAAAC,GAAK,OAAkB,IAAdA,EAAMC,KAAgBC,cAAtB,SAGT,SAAAF,GAAK,OAAIA,EAAMG,UAAY,mBAAmBC,KAAKJ,EAAMG,YAA4B,IAAdH,EAAMC,KAAkBC,cAAtF,KAEeG,MAIfC,GAAUR,IAAOC,IAAV,KAEIM,GAKlB,SAAAL,GAAK,OAAIA,EAAMO,QAAUL,cAAhB,SAGT,SAAAF,GAAK,OAAIA,EAAMQ,QAAUN,cAAhB,KACCF,EAAMQ,WAEhB,SAAAR,GAAK,OAAIA,EAAMN,MAAQQ,cAAd,KACWG,MAEpB,SAAAL,GAAK,OAAIA,EAAMS,OAASP,cAAf,SAGT,SAAAF,GAAK,OAAIA,EAAMU,QAAN,yEAOFC,GAAUb,IAAOC,IAAV,MAId,SAAAC,GAAK,OAAIA,EAAMY,OAASV,cAAf,KACMF,EAAMY,UAErB,SAAAZ,GAAK,OAAIA,EAAMa,IAAMX,cAAZ,KACGF,EAAMa,OAIXC,GAAOhB,IAAOC,IAAV,KAKOM,GAClB,SAAAL,GAAK,OAAIA,EAAMe,SAAW,KAAOb,cAAxB,SAKFc,GAAYlB,IAAOC,IAAV,MAgBhB,SAAAC,GAAK,OAAIA,EAAMN,MAAN,sCACaW,EADb,cAGT,SAAAL,GAAK,OAAIA,EAAMiB,IAAN,mCACUjB,EAAMiB,GADhB,cAGT,SAAAjB,GAAK,OAAIA,EAAMkB,IAAN,iSAaFC,GAAQrB,IAAOC,IAAV,MAWLqB,GAActB,IAAOC,IAAV,MAKXsB,GAAYvB,IAAOC,IAAV,MAITuB,GAAcxB,IAAOC,IAAV,KAGlB,GAKsBM,IAEfkB,GAAYzB,IAAOC,IAAV,MAQTyB,GAAU1B,IAAOC,IAAV,KAGIM,IAClB,SAAAL,GAAK,OAAIA,EAAMiB,IAAMf,cAAZ,KACUF,EAAMiB,OAIlBQ,GAAU3B,IAAOC,IAAV,MAcP2B,GAAO5B,IAAOC,IAAV,MAOJ4B,GAAU7B,IAAOC,IAAV,MAMP6B,GAAc9B,IAAOC,IAAV,MACX8B,GAAa/B,IAAOC,IAAV,MACV+B,GAAehC,IAAOC,IAAV,MACZgC,GAASjC,IAAOC,IAAV,MAINiC,GAAclC,IAAOC,IAAV,M,wCCpLXkC,GAAe,SAACC,GAA+B,IAAzBlE,EAAyB,uDAAf,EAAGmE,EAAY,uDAAN,EACpD,GAAID,EAAKE,OAAQ,CACX,IAAMC,EAASH,EAAKI,KAAI,SAAAtD,GAAI,OAAIA,EAAKuD,eAC/BC,EAAWH,EAAOI,QAAO,SAACC,EAAGC,GAAJ,OAAUD,EAAIC,KACvCC,EAAeJ,EAAWxE,EAAUmE,EAE9C,OAAOS,EAET,OAAO,G,QCkCMC,GArCO,SAAC,GAAc,IDwBTC,ECxBHC,EAAY,EAAZA,MACbC,EAA6CD,EAA7CC,YAAaC,EAAgCF,EAAhCE,UAAWhE,EAAqB8D,EAArB9D,IAAKiE,EAAgBH,EAAhBG,YADJ,EAEiBH,EAAMI,eAAhDpH,EAFyB,EAEzBA,mBAAoBE,EAFK,EAELA,kBAFK,EAIKmH,mBAAS,MAJd,WAI1BC,EAJ0B,KAIbC,EAJa,KASjC,OADA5F,QAAQC,IAAI,cAAeqF,GACpB,6BACH,yBAAKO,MAAO,CAAEC,QAAS,WAAYC,QAAS,OAAQC,cAAe,MAAOC,eAAgB,gBAAiBC,WAAY,SAAUC,aAAc,MAAOC,aAAc,OAAQC,aAAc,aAAF,OAAe1D,MACnM,8BDagByC,ECZIG,EDa9BvF,QAAQC,IAAI,UAAWmF,GACvBpF,QAAQC,IAAIqG,KAAOC,KAAKnB,IAAOoB,OAAO,cAC/BF,KAAOlB,GAAMoB,OAAO,gBCbjB,kCACOlB,GAEP,6BACKjH,EADL,IAC0BE,GAE1B,6BACK8G,EAAMoB,cAAcC,kBAEzB,6BACI,4BAAQC,WAAS,EAACC,KAAG,EAACC,QAAS,WACLjB,EAAtBD,IAAgBpE,EAAqB,KAAuBA,KAC5C,OAAhBoE,EAAuB,kBAAC,kBAAD,MAAqB,kBAAC,aAAD,SAIxD,6BACI,kBAAC,GAAD,CAAiBmB,MAAOtB,EAAa/D,GAAIF,EAAKD,KAAMqE,OC4BjDoB,GA/DS,SAACzE,GAAU,IAGvBhD,EAAagD,EAAMwE,MAAnBxH,SACAgC,EAAagB,EAAbhB,KAAMG,EAAOa,EAAPb,GACdzB,QAAQC,IAAI,eAAgBqC,GAiD5B,OACI,yBAAKuD,MAAO,CAACmB,aAAc,KAAMlB,QAAS,YAAamB,WAAY,oBAAqBC,UAAY5F,IAASG,EAAK,UAAY,UA/C1H,oCACA,yBAAKoE,MAAO,CAACE,QAAS,OAAQC,cAAe,MAAOC,eAAgB,gBAAiBE,aAAc,OAAQE,aAAc,oBACrH,yBAAKR,MAAO,CAAC3C,MAAO,SAApB,WAGA,yBAAK2C,MAAO,CAAC3C,MAAO,SAApB,SAGA,yBAAK2C,MAAO,CAAC3C,MAAO,SAApB,YAGA,yBAAK2C,MAAO,CAAC3C,MAAO,SAApB,gBAKJ5D,GAAYA,EAASsF,KAAI,SAACtD,EAAMzF,GAAP,OACrB,yBAAKgK,MAAO,CAACE,QAAS,OAAQE,eAAgB,gBAAiBkB,UAAW,EAAGC,SAAU,GAAIhK,IAAKkE,EAAKC,KACjG,yBAAKsE,MAAO,CAAC3C,MAAO,SACf5B,EAAK+F,cAEV,yBAAKxB,MAAO,CAAC3C,MAAO,SAApB,IACM5B,EAAKgG,eAEX,yBAAKzB,MAAO,CAAC3C,MAAO,SACf5B,EAAKiG,aAEV,yBAAK1B,MAAO,CAAC3C,MAAO,SAApB,IACM5B,EAAKuD,YAAY2C,QAAQ,QAKvC,yBAAK3B,MAAO,CAACE,QAAS,OAAQC,cAAe,MAAOyB,UAAW,kBAAmBC,OAAQ,WAAYzB,eAAgB,eAAgBH,QAAS,WAAYI,WAAY,WACnK,yBAAKL,MAAO,CAAC3C,MAAO,UACpB,yBAAK2C,MAAO,CAAC3C,MAAO,UACpB,yBAAK2C,MAAO,CAAC3C,MAAO,UACpB,yBAAK2C,MAAO,CAAC3C,MAAO,SAAW,kBAAC,OAAD,CAAMyE,GAAE,0BAAqBlG,IAA7B,iBACjB,kBAAC,YAAD,Y,SC/CxBmG,GAAU,I,QAAIC,GAMdC,GAAQC,KAAKD,MACbE,GAAYD,KAAKC,UAEjBC,GAAO,CAKXC,MALW,SAKL9K,GACJ,OAAI+K,cAAgBA,aAAaC,QAAQhL,GAChC+K,aAAaE,WAAWjL,GAG7BkL,gBAAkBA,eAAeF,QAAQhL,GACpCkL,eAAeD,WAAWjL,GAG5B,MAMTmL,gBApBW,WAqBT,OAAIJ,aACKA,aAAaD,QAGlBI,eACIA,eAAeJ,aADvB,GAWFM,UApCW,WAqCPxI,QAAQC,IAAI,kBACZrB,KAAK6J,gBACL7J,KAAK8J,cAGTA,WA1CW,WA0CsB,IAAtBC,EAAsB,uDAhDjB,WAiDd,OAAOV,GAAKC,MAAMS,IAGpBF,cA9CW,WA8CyB,IAAtBG,EAAsB,uDAnDpB,WAoDd,OAAOX,GAAKC,MAAMU,IAQpBlM,IAvDW,SAuDPU,GACF,OAAI+K,cAAgBA,aAAaC,QAAQhL,GAChC0K,GAAMK,aAAaC,QAAQhL,KAAS,KAGzCkL,gBAAkBA,eAAeF,QAAQhL,IACpC0K,GAAMQ,eAAeF,QAAQhL,KAG/B,MAGTyL,SAnEW,WAmEoB,IAAtBF,EAAsB,uDAzEf,WA0Ed,OAAOV,GAAKvL,IAAIiM,IAGlBG,YAvEW,WAuEuB,IAAtBF,EAAsB,uDA5ElB,WA6Ed,OAAOX,GAAKvL,IAAIkM,IASlBG,IAjFW,SAiFPjM,EAAOM,EAAK4L,GACd,OAAIC,mBAAQnM,GACH,MAGT8K,GAAQmB,IAAI3L,EAAK4K,GAAUlL,IAEvBkM,GAAkBb,aACbA,aAAae,QAAQ9L,EAAK4K,GAAUlL,IAGzCwL,eACKA,eAAeY,QAAQ9L,EAAK4K,GAAUlL,IAGxC,OAGTqM,SAnGW,WAmGwD,IAA1DrM,EAA0D,uDAAlD,GAAIkM,EAA8C,wDAAtBL,EAAsB,uDAzGnD,WA0Gd,OAAOV,GAAKc,IAAIjM,EAAO6L,EAAUK,IAGnCI,YAvGW,WAuG2D,IAA1DtM,EAA0D,uDAAlD,GAAIkM,EAA8C,wDAAtBJ,EAAsB,uDA5GtD,WA6Gd,OAAOX,GAAKc,IAAIjM,EAAO8L,EAAUI,KAItBf,MC/Gf,SAASoB,GAAUC,GACjB,OAAOA,EAASC,KAAOD,EAASC,OAASD,EAU3C,SAASE,GAAYF,GACnB,OAAIA,EAASG,QAAU,KAAOH,EAASG,OAAS,IACvCH,EAGFD,GAAUC,GAAUI,MAAK,SAAAC,GAC9B,IAAMxJ,EAAQ,IAAIyJ,MAAMN,EAASO,YAGjC,MAFA1J,EAAMmJ,SAAWA,EACjBnJ,EAAMmJ,SAASzI,QAAU8I,EACnBxJ,KAUV,SAAS2J,GAAkBC,GACzB,OAAOxN,OAAOyN,KAAKD,GAChBnF,KAAI,SAAAqF,GAAC,gBAAOC,mBAAmBD,GAA1B,YAAgCC,mBAAmBH,EAAOE,QAC/DE,KAAK,KAWK,SAASC,GACtBC,GAGA,IAFAC,EAEA,uDAFU,GACVtC,IACA,yDAEAhI,QAAQC,IAAI,oBAAqBoK,EAAKC,GAClCtC,IAEFsC,EAAQC,QAAUhO,OAAOiO,OACvB,CACE,eAAgB,oBAElBF,EAAQC,QACR,KAIJ,IAAME,EAAQxC,GAAKY,WAWnB,GATI4B,IACFH,EAAQC,QAAUhO,OAAOiO,OACvB,CACEE,cAAe,UAAF,OAAYD,IAE3BH,EAAQC,UAIRD,GAAWA,EAAQP,OAAQ,CAC7B,IAAMA,EAASD,GAAkBQ,EAAQP,QACzCM,EAAM,GAAH,OAAMA,EAAN,YAAaN,GAQlB,OAJIO,GAAWA,EAAQK,MAAQ3C,IAC7BsC,EAAQK,KAAO5C,KAAKC,UAAUsC,EAAQK,OAGjCC,MAAMP,EAAKC,GACfZ,KAAKF,IACLE,KAAKL,IC7FWxL,EAAQ,IAA7B,IAEe,YASFwM,EAAKQ,EAAQC,GAA0B,8IAApBpL,EAAoB,+BAAb,YAE7BqL,EAAqDhL,wCAFX,SAI5BgI,KAAKD,MAAMQ,eAAeF,QAAQ,aAJN,cAI1CqC,EAJ0C,OAMhDzK,QAAQC,IAAI,SAAUwK,GAChBO,EAP0C,UAO7BD,IACfE,EAAY,IAAIC,SACVC,OAAO,eAAgB,oBACnB,KAAVV,GAAyB,WAAT/K,GAClBuL,EAAUE,OAAO,gBAAjB,iBAA4CV,IAG1CW,EAAMrD,KAAKC,UAAU8C,GACzB9K,QAAQC,IAAI,YAAamL,GACrBC,EAAiB,CACnBR,OAAQA,EACRN,QAASU,EACTjO,KAAM,OACNsO,YAAa,OACbX,KAAMS,EACNG,SAAU,UAaJC,EAAa,SAAbA,EAAcnB,EAAKC,GAAyB,IAAhBmB,EAAgB,uDAAN,EACpCC,EAAa,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC5D,OAAOd,MAAMP,EAAMC,GAClBZ,MAAK,SAAAJ,GAEJ,GADAtJ,QAAQC,IAAI,SAAUqJ,EAASG,QACR,MAApBH,EAASG,OAAgB,OAAOH,EAASC,OAC5C,GAAIkC,EAAU,GAAKC,EAAWC,SAASrC,EAASG,QAE9C,OADAzJ,QAAQC,IAAI,WAAYwL,GACjBD,EAAWnB,EAAKC,EAASmB,EAAU,GAE1C,MAAM,IAAI7B,MAAMN,MARb,OAWA,SAAAsC,GAEL,GADA5L,QAAQC,IAAI2L,GACI,IAAZH,EACF,OAAOD,EAAWnB,EAAKC,EAASmB,EAAU,OAnDF,kBAwDtCD,EAAW,GAAD,OAAIR,GAAJ,OAAcX,GAAOgB,IAxDO,+CCTpC,IAENQ,MAFM,SAEAlB,EAAMmB,GAAU,+GAC4B/L,wCAD5B,SAIpBC,QAAQC,IAAI,gBAAiB0K,GAJT,SAKGP,GAAQ,GAAD,OAJkBrK,wCAIlB,gBAA2B,CAAE8K,OAAQ,OAAQF,SALvD,cAKdrB,EALc,OAMpBtJ,QAAQC,IAAI,mBAAoBqJ,GAEhCrB,GAAKkB,SAASG,EAASyC,IAAKpB,EAAKqB,YACjC/D,GAAKmB,YAAYE,EAASvL,KAAM4M,EAAKqB,YACrCF,EAAS,CAACpM,KAAM,mBAAoBmB,QAASyI,IAVzB,kBAWbA,GAXa,2DAab,CAACG,OAAQ,IAAKwC,QAAS,EAAF,KAbR,6DAiBtBC,SAnBM,SAmBGvB,EAAMmB,GAAU,0HACyB/L,wCADzB,kBAIAqK,GAAQ,GAAD,OAHkBrK,wCAGlB,yBAAoC,CAAE8K,OAAQ,OAAQF,SAJ7D,OAIjBrB,EAJiB,OAKvBrB,GAAKkB,SAASG,EAASyC,IAAKpB,EAAKqB,YACjC/D,GAAKmB,YAAYE,EAASvL,KAAM4M,EAAKqB,YACrChM,QAAQC,IAAI,YAAaqJ,EAASvL,MAClC,EAAKoO,eAAe7C,EAASvL,KAAK0D,GAAIqK,GARf,8IAczBK,eAjCM,SAiCS5K,EAAKuK,GAAU,kHAChC9L,QAAQC,IAAI,qBACNmM,EAAW,CACbhO,eAAgB,GAChBC,mBAAoB,GACpBE,kBAAmB,GACnBC,kBAAmB,GACnBC,kBAAmB,GACnBE,cAAe,GACfD,kBAAmB,GACnB2N,iBAAkB,IAAI9F,KACtBxI,KAAMwD,GAXsB,kBAcV+K,GAAW,aAAc,OAAQF,GAdvB,OActBG,EAdsB,OAe5BT,EAAS,CAACpM,KAAM,mBAAoBmB,QAAS0L,IAfjB,2IAqBpCC,OAtDY,SAsDLV,GACH9L,QAAQC,IAAI,eACZgI,GAAKO,YACLsD,EAAS,CAACpM,KAAM,uB,o6GCzDxB,IAyHe+M,GAzHGrK,IAAOsK,OAAV,KAKS/J,IAQlB,SAAAL,GAAK,OAAIA,EAAMY,OAASV,cAAf,SAOT,SAAAF,GAAK,OAAIA,EAAMqK,OAASnK,cAAf,SAIT,SAAAF,GAAK,OAAIA,EAAMsK,KAAOpK,cAAb,KAkBqBG,MAQ1B,SAAAL,GAAK,OAAIA,EAAMuK,IAAMrK,cAAZ,KAOiBG,MAM9B,SAAAL,GAAK,OAAIA,EAAMwK,KAAOtK,cAAb,SAoBT,SAAAF,GAAK,OAAIA,EAAMsE,KAAOpE,cAAb,SAoBT,SAAAF,GAAK,OAAIA,EAAMyK,UAAYvK,cAAlB,SAGT,SAAAF,GAAK,OAAIA,EAAM0K,SAAWxK,cAAjB,KACaG,MAEtB,SAAAL,GAAK,OAAIA,EAAMqE,WAAanE,cAAnB,KACaG,MAEtB,SAAAL,GAAK,OAAIA,EAAM2K,UAAYzK,cAAlB,KACaG,KAEtB,I,qkBC9GN,IA0GeuK,GA1GG,WAEd,IAAMpM,EAASqM,uBAAY,SAACxM,GAAD,OAAWA,EAAMG,OAAOA,UAE7CV,EAAe,CACjBgN,cAAe,EACfC,UAAW,EACXC,YAAa,IAPG,EAqC2BC,sBA3BrB,WAAgC,IAA/B5M,EAA+B,uDAAzBP,EAAcQ,EAAW,uCAEtD,OADAZ,QAAQC,IAAI,gBAAiBW,EAAOC,SAC7BD,EAAOlB,MACV,IAAK,WACD,gBACOiB,GADP,IAEI2M,YAAa1M,EAAOC,UAE5B,IAAK,YACD,gBACOF,GADP,IAEI0M,UAAW1M,EAAM0M,UAAY,IAErC,IAAK,YACD,gBACO1M,GADP,IAEI0M,UAAW1M,EAAM0M,UAAY,IAErC,IAAK,WACD,gBACO1M,GADP,IAEI0M,UAAWzM,EAAOC,UAEtB,QACA,OAAOF,KAG0DP,GArCzD,WAqCZoN,EArCY,KAqCKC,EArCL,KAwCd3B,EAAW4B,wBAEjBC,qBAAU,WACNC,MACD,IAEHD,qBAAU,WACN,GAAI7M,EAAO4D,OAAS,EAAG,CACnB,IAAMmJ,EAAkB/M,EAAOgN,OAAON,EAAgBH,UAAY,GAAKG,EAAgBJ,cAAeI,EAAgBH,UAAYG,EAAgBJ,eAClJpN,QAAQC,IAAI,qBAAsB4N,GAClCJ,EAAmB,CAAC/N,KAAM,WAAYmB,QAASgN,IAC/C7N,QAAQC,IAAI,iBAAkBuN,GAElCxN,QAAQC,IAAI,YAAaa,EAAQ0M,KAClC,CAAC1M,EAAQ0M,EAAgBH,YAG5B,IAAyBvC,EAqBnB8C,EAAO,+BAAG,4BAAA5I,EAAA,sEACSsH,GAAW,UAAW,WAAOyB,EAAW,UADjD,OACNjN,EADM,OAEZgL,EAAS,CAAEpM,KAAM,aAAcmB,QAASC,IAF5B,2CAAH,qDAIb,OACI,kBAAC8B,GAAD,CAASG,OAAK,GACV,sCACA,yBAAK8C,MAAO,CAAEE,QAAS,OAAQE,eAAgB,eAAgB+H,aAAc,QAAS7H,aAAc,KAChG,qCAGA,uCACA,yCACA,yCACA,+BAGAqH,EAAgBF,YAAY5I,OAAS,KAtCxBoG,EAsC6C0C,EAAgBF,aArCtE5I,OAAS,GAAKoG,EAAKmD,MAAK,SAACjJ,EAAEC,GAAH,OAASD,EAAEO,UAAYN,EAAEM,aAAWX,KAAI,SAACS,EAAOxJ,GAAR,OACxE,kBAAC,GAAD,CAAewJ,MAAOA,EAAOjI,IAAKvB,QAsClC,yBAAKgK,MAAO,CAACE,QAAS,SAEdjF,EAAO4D,OAAS,GApCV,SAACoG,GAAS,IACpBuC,EAAcG,EAAdH,UACFa,EAAgBC,KAAKC,MAAMtD,EAAKpG,OAAS8I,EAAgBJ,eAAiB,EAChF,OACI,oCACCI,EAAgBH,UAAY,GAAK,kBAAC,GAAD,CAAU1G,WAAS,EAACE,QAAS,kBAAM4G,EAAmB,CAAC/N,KAAM,gBAA7D,QAC/BwO,EAAgB,GAAK,IAAIG,MAAMH,GAAeI,OAAO1J,KAAI,SAACI,EAAGuJ,GAAJ,OACxDlB,IAAckB,EAAM,EAAI,kBAAC,GAAD,CAAUvB,SAAO,EAACpG,KAAG,EAACC,QAAS,WAAQ4G,EAAmB,CAAC/N,KAAM,WAAYmB,QAAS0N,EAAM,MAAOA,EAAM,GAChI,kBAAC,GAAD,CAAU3H,KAAG,EAACC,QAAS,WAAQ4G,EAAmB,CAAC/N,KAAM,WAAYmB,QAAS0N,EAAM,MAAOA,EAAM,MAErGf,EAAgBH,UAAYa,GAAiB,kBAAC,GAAD,CAAUvH,UAAU,OAAOE,QAAS,kBAAM4G,EAAmB,CAAC/N,KAAM,gBAApE,SA0BjB8O,CAAc1N,M,g0ECxGhD,IAAM2N,GAAiBrM,IAAOsM,GAAV,KAMd/L,IAGP,SAAAL,GAAK,OAAIA,EAAMS,OAASP,cAAf,KAEaG,MAMfgM,GAAgBvM,IAAOsM,GAAV,MAQbE,GAAiBxM,IAAOyM,GAAV,MAMdC,GAAW1M,IAAOsM,GAAV,KAIR/L,IACP,SAAAL,GAAK,OAAIA,EAAMS,OAASP,cAAf,SAIFuM,GAAW3M,IAAO4M,GAAV,KAEf,GAGOrM,IACP,SAAAL,GAAK,OAAIA,EAAMN,MAAQQ,cAAd,KACEG,MAIJsM,GAAW7M,IAAOsM,GAAV,KAIR/L,IACP,SAAAL,GAAK,OAAIA,EAAMS,OAASP,cAAf,SAIF0M,GAAc9M,IAAOyM,GAAV,KAIXlM,IAGAwM,GAAY/M,IAAOzE,EAAV,MAMhB,SAAA2E,GAAK,OAAIA,EAAMsE,KAAN,6FAKT,SAAAtE,GAAK,OAAIA,EAAMO,QAAN,qEAIT,SAAAP,GAAK,OAAIA,EAAM8M,UAAN,wCAGFzM,IACP,SAAAL,GAAK,OAAIA,EAAMsK,KAAOpK,cAAb,KAEEG,OAGX,SAAAL,GAAK,OAAIA,EAAM+M,QAAU7M,cAAhB,SAGT,SAAAF,GAAK,OAAIA,EAAMgN,OAAQ9M,cAAd,S,qkBCjGf,IA0Fe+M,GAtFS,SAAC5O,EAAOC,GAC5B,OAAOA,EAAOlB,MACV,IAAK,oBACL,gBACOiB,GADP,IAEI6O,eAAe,EACfC,MAAO,KACPC,KAAM,IAEV,IAAK,iBACL,gBACO/O,GADP,IAEI8O,OAAO,EACPC,KAAM,IAEV,IAAK,YACL,gBACO/O,GADP,IAEI+O,KAAM/O,EAAM+O,KAAO,IAEvB,IAAK,YACD,gBACO/O,GADP,IAEI+O,KAAM/O,EAAM+O,KAAO,IAE3B,IAAK,aACD,gBACO/O,GADP,IAEI6O,eAAe,EAEfG,SAAS,IAEjB,IAAK,aACD,gBACOhP,GADP,IAEIgP,SAAS,EACTD,KAAM,EACND,MAAO,KACPG,SAAUhP,EAAOC,QACjB2O,eAAe,IAEvB,IAAK,YACD,gBACO7O,GADP,IAEI6O,eAAe,EACfC,OAAO,EACPE,SAAS,EACTE,OAAQ,KAEhB,IAAK,mBACD,gBACOlP,GADP,IAEI+O,KAAM,EACNC,SAAS,IAEjB,IAAK,cACD,gBACOhP,GADP,IAEIgP,SAAS,EACTrP,QAASM,EAAOC,UAGxB,IAAK,eAED,OADAb,QAAQC,IAAI,sBAAuBW,EAAOkP,UAAWlP,EAAOmP,YAC5D,SACOpP,GADP,IAEAkP,OAAQ,SACQlP,EAAMkP,QADhB,UAEQjP,EAAOkP,UAAalP,EAAOmP,eAG7C,IAAK,eACG,gBACOpP,GADP,IAEIkP,OAAQ,SACLlP,EAAMkP,QADH,IAEFG,SAAU,GACVC,SAAU,GACVC,WAAY,OAG5B,QACI,OAAOvP,I,4DCjFbwP,GAAiB,SAAC,GAAe,IAAX7N,EAAW,WAanC,OACI,oCACCA,EAAM8N,SACP,yBAAKvJ,QAAS,kBAAMvE,EAAM+N,gBACrB/N,EAAMgO,UAGX,kBAAC,GAAD,MAAU3D,OAAK,GAAKrK,EAApB,CAA2BuE,QAAS,kBAAMvE,EAAM+N,iBAC9C,yBAAKnJ,UAAU,kBACZ5E,EAAMF,QACL,6BACGE,EAAMgO,UAGP,8BACuB,IAAlBhO,EAAMqN,QAxBnB,kBAAC,KAAD,CACIjQ,KAAK,YACL6Q,MAAM,UACNzN,OAAQ,GACRI,MAAO,GACPsN,QAAS,MAmB0ClO,EAAMmO,MAErD,6BACKnO,EAAMgO,UAAY,kBAAC,SAAD,WASrCH,GAAeO,aAAe,CAC5BL,YAAa,aACbV,QAAS,SAGEQ,U,2FCzCf,IA4IeQ,GA5IG,SAAArO,GAAU,IAEhBtE,EAAWmP,uBAAY,SAAAxM,GAAK,OAAIA,EAAM3C,UAAtCA,OAEF8N,EAAW4B,wBAJO,EAKgBhI,mBAAS,IALzB,WAKhBkL,EALgB,KAKHC,EALG,OAMQnL,oBAAS,GANjB,WAMhBiK,EANgB,KAMPmB,EANO,OAOIpL,oBAAS,GAPb,WAOhBqL,EAPgB,KAOTC,EAPS,OAQqF1O,EAAM2O,QAA3G1P,EARgB,EAQhBA,IAAK8F,EARW,EAQXA,aAAc6J,EARH,EAQGA,0BAA2B5J,EAR9B,EAQ8BA,cAAe6J,EAR7C,EAQ6CA,kBAAmBC,EARhE,EAQgEA,iBARhE,EASA9O,EAAhB+O,gBATgB,MASL,EATK,EAU1B1D,qBAAU,WACR,GAAI5N,QAAQuR,QAAS,CACnB,IAAMC,EAAgBpJ,aAAaC,QAAQ,aACrCmJ,IACFV,EAAe9I,KAAKD,MAAMyJ,IAC1BzF,EAAS,CAACpM,KAAM,qBAAsBmB,QAASkH,KAAKD,MAAMyJ,SAG/D,IAEH,IAAMC,EAAe,WACjB,OACE,kBAAC,KAAD,CACI9R,KAAK,YACL6Q,MAAM,UACNzN,OAAQ,GACRI,MAAO,GACPsN,QAAS,OAKbiB,EAAgB,SAAClQ,GAEhB,OAAQvD,EAAOsB,SAAS+B,QAAO,SAAAC,GAAI,OAAIA,EAAKC,MAAQA,MAGrDmQ,EAAiB,WACb,IAAMC,EAAcF,EAAclQ,GAE5BqQ,EAAe5T,EAAOsB,SACtBuS,EAAYD,EAAaE,WAAU,SAAAxQ,GAAI,OAAIA,EAAKC,MAAQA,KACxDD,EAAOsQ,EAAaC,GAC5B,GAAiC,GAA9BF,EAAY,GAAGpK,YAAkB,CAClC,IAAMwK,EAAWH,EAAavQ,QAAO,SAAA2Q,GAAE,OAAIA,GAAM1Q,KACjDwK,EAAS,CAACpM,KAAM,qBAAsBmB,QAASS,IAC/C6G,aAAae,QAAQ,YAAanB,KAAKC,UAAU+J,SAEjDzQ,EAAKiG,cACLjG,EAAKuD,YAAcoN,WAAW3Q,EAAKgG,cAAgBhG,EAAKiG,aACxDsJ,EAAee,GACf9F,EAAS,CAACpM,KAAM,gBAAiBmB,QAAS+Q,IAC1CzJ,aAAae,QAAQ,YAAanB,KAAKC,UAAU4J,KAInDM,EAAY,WAEdpB,GAAW,GACXqB,YAAW,WACXnS,QAAQC,IAAIoR,GAEd,IAAMe,EAAgBH,WAAW3K,EAAiBA,EAAgB8J,EAAoB,KAE9EiB,EAAa,CACjB9Q,MACA8F,eACAiL,oBAAqBpB,EACrBC,kBAAmBA,EAAkB9G,IACrC/C,cAAe8K,EACf7K,YAAa8J,EACbxM,YAAauN,GAGjB,GAA4B,IAAvBxB,EAAYlM,OACfmM,EAAe,CAACwB,IACdvG,EAAS,CAACpM,KAAM,gBAAiBmB,QAAS,CAACwR,KAC3ClK,aAAae,QAAQ,YAAanB,KAAKC,UAAU,CAACqK,SAC/C,CACH,IAAIT,EAAe5T,EAAOsB,SAE3B,GADsBmS,EAAclQ,GAClBmD,OAAS,EAAG,CAC3B,IAAMmN,EAAYD,EAAaE,WAAU,SAAAxQ,GAAI,OAAIA,EAAKC,MAAQA,KACxDD,EAAOsQ,EAAaC,GAC1BvQ,EAAKiG,aAAe8J,EACpB/P,EAAKuD,YAAcoN,WAAW3Q,EAAKgG,cAAgBhG,EAAKiG,aACxDsJ,EAAee,GACf9F,EAAS,CAACpM,KAAM,gBAAiBmB,QAAS+Q,IAC1CzJ,aAAae,QAAQ,YAAanB,KAAKC,UAAU4J,QAC7C,CACJ,IAAMA,EAAe,GAAH,YAAOhB,GAAP,CAAoByB,IACtClK,aAAae,QAAQ,YAAanB,KAAKC,UAAU4J,IACjDf,EAAe,GAAD,YAAKD,GAAL,CAAkByB,KAChCvG,EAAS,CAACpM,KAAM,gBAAiBmB,QAAS+Q,KAGnDd,GAAW,GACXE,GAAS,KACD,MAGP,OACI,oCACqB,QAAnB1O,EAAK,WAAwBA,EAAMiQ,MAErC,kBAAC,GAAD,CAAgBvF,SAAO,EAACF,KAAG,EAACH,OAAK,EAC7ByD,SAAU9N,EAAMiQ,KAChB1M,MAAO,CAAC2M,SAAU,KAClBnC,YAAa6B,EACbzB,KAAOM,EAAwB,WAAhB,eAEdpB,GAAY6B,KACX7B,GAAW,kBAAC,gBAAD,QAGbrN,EAAMiQ,MAA4B,SAAnBjQ,EAAK,UACxB,kBAAC,GAAD,CAAgB0K,SAAO,EAACF,KAAG,EAACH,OAAK,EAC7ByD,SAAU9N,EAAMiQ,KAChB1M,MAAO,CAAC2M,SAAU,KAClBnC,YAAaqB,EACbjB,KAAM,UAELd,GAAY6B,KACX7B,GAAW,kBAAC,UAAD,OAGhBrN,EAAMiQ,MAA2B,QAAnBjQ,EAAK,SAClB,kBAACmQ,GAAD,CAAYpC,aAAW,EAACxJ,QAAS,kBAAMqL,MACpC5P,EAAMgO,UAGT,kBAACmC,GAAD,CAAY5L,QAAS,kBAAM6K,MACxBpP,EAAMgO,YAUbmC,GAAarQ,IAAOC,IAAV,M,k5BCpJT,IAAMqQ,GAAetQ,IAAOC,IAAV,KAEnB,GACA,GACkBM,GAyBXgQ,GAAUvQ,IAAOC,IAAV,KAId,GACkBM,GChClBiQ,GAAe,SAACtQ,GAAU,IACtBuQ,EAA+BvQ,EAA/BuQ,UAAWC,EAAoBxQ,EAApBwQ,SAAoBxQ,EAAVyQ,MAE7B,OADA/S,QAAQC,IAAI,aAAcqC,GAExB,oCACE,kBAACoQ,GAAD,CAAcM,aAAcH,GAC1B,kBAACF,GAAD,MAEA,4BACGG,GACCA,EAASlO,KAAI,SAACoN,EAAInW,GAAL,OACX,wBAAIuB,IAAKvB,GACP,kBAAC,GAAD,CAAU0U,MAAM,OAAO5I,GAAE,oBAAeqK,EAAGzQ,MACxCyQ,EAAGiB,uBAUtBL,GAAalC,aAAe,CAC1BmC,UAAW,aACXC,SAAU,GACVC,MAAO,QAGMH,UCoCAM,GA9DE,SAAC,GAAoE,Ifc1DC,EedT7C,EAAmE,EAAnEA,SAAU3I,EAAyD,EAAzDA,GAAIyL,EAAqD,EAArDA,SAAUN,EAA2C,EAA3CA,SAAUO,EAAiC,EAAjCA,UAAY9C,EAAqB,EAArBA,MAAOxK,EAAc,EAAdA,QAAc,EACnDL,oBAAS,GAD0C,WAC3E4N,EAD2E,KAClEC,EADkE,OAEjD7N,oBAAS,GAFwC,WAE3E1E,EAF2E,KAEjEwS,EAFiE,KAG5EC,EAAUC,uBACVjR,EAAWkR,wBAIX9N,EAAQ,CACV+N,WAAY,IACZC,YAAa,GACb9N,QAAS,OACTE,eAAgB,gBAChBC,WAAY,SACZqK,OfAoB4C,EeAG1Q,EAASqR,UfGxB,MAARX,EACK,IAGFA,EAAIY,MALG,gBAKU,MeP0BpM,GAA4B,YAAtBlF,EAASqR,WAAuC,IAAZR,EAAjF,UACF3Q,GACH,UAIAqR,EAAW,CACbzD,MAAQ9N,EAASqR,SAASnI,SAAShE,IAA6B,YAAtBlF,EAASqR,WAAuC,IAAZR,EAAvE,QAEL,SAGAW,EAAkB,WAChBV,GAAYD,GACRF,GACFI,GAAY,IAIhBnD,EAAc,SAAC6D,GACjBA,EAAEC,kBACDpO,GAAW0N,EAAQW,KAAKzM,IAQ/B,OACE,oCACW,SAAV4I,EACC,uBAAG8D,KAAM1M,EAAId,QAASwJ,EAAaiE,YAAaL,EAAiBM,WAAYN,EAAiBpO,MAAcmO,GACzG1D,GAGH,uBAAG+D,KAAM1M,EAAId,QAASwJ,EAAaiE,YAAaL,EAAiBM,WAAYN,EAAiBpO,MAAOA,GAClGyK,GAGF8C,IAAyB,IAAbpS,EACX,kBAAC,GAAD,CAAc6R,UAjBA,WACdW,GAAY,GACZxT,QAAQC,IAAI,YAewB8S,MAAOM,EAAWP,SAAUA,IAC9D,O,k7BC9DV,IAoCe0B,GApCMpS,IAAOC,IAAV,KAEZ,IAaA,SAAAC,GAAK,OAAIA,EAAMsE,KAAOpE,cAAb,S,6hCCVf,IA2CgBiS,GA3CI,SAACnS,GAAU,MAEKoD,mBAAS,IAFd,WAEnBuL,EAFmB,KAEVyD,EAFU,OAGKhP,oBAAS,GAHd,WAGnB4N,EAHmB,KAGVC,EAHU,KAK3B5F,qBAAU,WACPrL,EAAM2O,UACLjR,QAAQC,IAAI,WAAYqC,EAAM2O,SAC9ByD,EAAWpS,EAAM2O,YAElB,CAAC3O,IAVuB,IAahB6O,EAAwGF,EAAxGE,kBAAqC9J,GAAmE4J,EAArF0D,iBAAqF1D,EAAnE5J,cAAc+J,EAAqDH,EAArDG,iBAAkB9J,EAAmC2J,EAAnC3J,cAAe/F,EAAoB0P,EAApB1P,IAAKH,EAAe6P,EAAf7P,WACpG,OACI,yBAAKyE,MAAO,CAACE,QAAS,OAAQC,cAAe,SAAUG,aAAc,GAAIyO,UAAW,KAChF,kBAAC,GAAD,CAAc/N,QAAS,kBAAMvE,EAAMuS,WAAWtT,IAAM+S,YAAa,kBAAKf,GAAW,IAAOP,aAAc,kBAAMO,GAAW,KACnH,yBAEIuB,IAAK3D,EAAoB,GAAH,OAAMA,EAAkB9G,KAAQ,eACtD0K,IAAI,gBACJlP,MAAO,CAACmP,UAAW,OAEvB,kBAAC,OAAD,CAAKzE,MAAM,QAAQ1O,KAAM,GAAIgE,MAAO,CAACoP,SAAU,QAASC,OAAQ,GAAIC,MAAO,GAAIC,WAAY9B,EAAU,UAAY,SAAUrM,WAAY,sBAE3I,kBAACoO,GAAD,KACG,4BACE/S,EAAMgT,OAGX,wBAAIzP,MAAO,CAAC0P,WAAY,GAAIC,SAAU,GAAIZ,WAAY,GAAIzO,aAAc,KACnEkB,GAAgBA,GAErB,kBAACoO,GAAD,KACI,wBAAI5P,MAAO,CAAC6P,OAAQ,IAAKnF,MAAO,QAASgF,WAAY,GAAIC,SAAU,KAAMpU,GAAcA,EAAW,GAAG6R,eAChG7B,EAAmB,EAAI,wBAAIvL,MAAO,CAAC8P,QAAS,GAAKJ,WAAY,GAAIC,SAAU,GAAII,eAAgB,iBAAxE,MAAmGtO,EAAcE,QAAQ,IAAW,KAChK,wBAAI3B,MAAO,CAAC2P,SAAU,KAAtB,IACalO,GAAkBA,EAAgB8J,EAAmB,KAAK5J,QAAQ,OAQxF6N,GAAOjT,IAAOC,IAAV,MAeJoT,GAASrT,IAAOC,IAAV,KAUH,GACA,GAQI,I,6gBCjFd,IAuEewT,GAvEO,SAAC,GAA4C,IAA1C/K,EAA0C,EAA1CA,KAAMuF,EAAoC,EAApCA,YAAayF,EAAuB,EAAvBA,QAAYC,EAAW,2CAG7BrQ,mBAAS,IAHoB,WAG1DsQ,EAH0D,KAG9CC,EAH8C,OAI3BvQ,mBAAS,GAJkB,WAI1DwQ,EAJ0D,KAI7CC,EAJ6C,KAK3DC,EAAkBN,EAC1B9V,QAAQC,IAAI,cAAe6K,EAAKpG,QAE9BiJ,qBAAU,WACR,GAAI7C,GAAQA,EAAKpG,OAAS,EAAG,CAC3B,IAAM2R,EAASvL,EAAKpG,OAAS0R,EAC7BH,EAAc,KAAI5H,MAAMF,KAAKmI,KAAKD,SAEnC,CAACvL,EAAMoL,IAEVvI,qBAAU,WACR3N,QAAQC,IAAI,QAAS+V,KACpB,CAACA,IAOJ,OACE,oCACGlL,GACD,kBAACxH,GAAD,QAAeyS,EAAf,CAAqBxS,GAAI,UACtBuH,EAAKpG,OAAS,EACboG,EACGgD,OAGCoI,EAAc,GAAKE,EAAiBF,EAAcE,GAEnDxR,KAAI,SAACqM,EAASpV,GAAV,OACH,kBAAC,GAAD,CACEoV,QAASA,EACTqE,KAAK,MACLlY,IAAKvB,EACLgZ,WAAYxE,OAEX,CAACvF,GAAMlG,KAAI,SAACqM,EAASpV,GAAV,OAEd,kBAAC,GAAD,CACEoV,QAASA,EACTqE,KAAK,MACLlY,IAAKvB,EACLgZ,WAAYxE,QAK1BvF,GAEI,kBAACyL,GAAD,KACGzL,EAAKpG,OAAS,GACbsR,EAAWpR,KAAI,SAACoN,EAAInW,GAAL,OACb,kBAAC2a,GAAD,CACEC,KAAMP,EACNpZ,MAAOjB,EAAI,EACXuB,IAAKvB,EACLgL,QAAS,SAACqN,GAAD,OA3CF,SAACA,GAClBiC,EAAejC,EAAEwC,OAAO5Z,OA0CE6Z,CAAWzC,YAWnCqC,GAAOnU,IAAOC,IAAV,MASJmU,GAAMpU,IAAOsK,OAAV,MAQL,SAACpK,GAAD,OACAA,EAAMmU,MAAQnU,EAAMxF,OACpB0F,cADA,S,q4BC5FJ,IA+BeoU,GA/BAxU,IAAOC,IAAV,MAQN,SAAAC,GAAK,OAAIA,EAAMN,MAAQQ,cAAd,KACaG,EAClB,OAEJ,SAAAL,GAAK,OAAIA,EAAMvF,GAAKyF,cAAX,KACAF,EAAMvF,MAEf,SAAAuF,GAAK,OAAIA,EAAMuU,GAAKrU,cAAX,KACiBF,EAAMuU,MAEhC,SAAAvU,GAAK,OAAIA,EAAMP,GAAKS,cAAX,KACkBF,EAAMP,MAEjC,SAAAO,GAAK,OAAIA,EAAMR,MAAQU,cAAd,KACIF,EAAMR,SAEnB,SAAAQ,GAAK,OAAIA,EAAMT,MAAQW,cAAd,KACEF,EAAMT,KACLS,EAAMT,S,4kCC3BxB,IA6CeiV,GA7CF1U,IAAOC,IAAV,KAKkBM,IAKlB,SAAAL,GAAK,OAAIA,EAAMoN,MAAQpN,EAAMyU,QAAUvU,cAA9B,KACaG,KAkBJA,IAIlB,SAAAL,GAAK,OAAsB,IAAjBA,EAAMyU,QAAiBvU,cAAvB,SAIV,SAAAF,GAAK,OAAIA,EAAMoN,MAAQpN,EAAMyU,QAAUvU,cAA9B,KACaG,M,s0BCtChC,IA+BeqU,GA/BG5U,IAAO6U,MAAV,KAOStU,GACXA,IAIP,SAAAL,GAAK,OAAIA,EAAM4U,QAAU1U,cAAhB,SAGT,SAAAF,GAAK,OAAIA,EAAM6U,YAAc3U,cAApB,SAGT,SAAAF,GAAK,OAAoB,IAAhBA,EAAM8U,OAAmB5U,cAAzB,SAIT,SAAAF,GAAK,OAAIA,EAAMsK,KAAOpK,cAAb,KAIMG,O,iMC3BrB,IAQe0U,GARIjV,IAAOsK,OAAV,M,yhBCAhB,IA8Be4K,GA9BOlV,IAAOC,IAAV,MAab,SAAAC,GAAK,OAAgB,GAAZA,EAAMkB,IAAN,yPCEA+T,GAbA,SAACjV,GACZ,OACI,oCACI,kBAAC,GAASA,GACV,yBAAKuD,MAAO,CAAEE,QAAS,eAAgByR,UAAW,0BAA2BvC,SAAU,WAAYL,UAAW,KAC9G,kBAACzF,GAAD,KACK7M,EAAMmV,UCHjBC,GAAkB,SAAC,EAAoIC,GAAQ,IAA3IC,EAA2I,EAA3IA,cAAeC,EAA4H,EAA5HA,cAAeC,EAA6G,EAA7GA,aAAcL,EAA+F,EAA/FA,MAAON,EAAwF,EAAxFA,WAAYY,EAA4E,EAA5EA,WAAYC,EAAgE,EAAhEA,KAAiBlb,GAA+C,EAA1Dmb,UAA0D,EAA/Cnb,OAAOsa,EAAwC,EAAxCA,MAAOzH,EAAiC,EAAjCA,QAAiBoG,GAAgB,EAAxBvS,GAAwB,8IACjKxD,QAAQC,IAAI,OAAQ0X,GAapB,OACI,oCACER,GACF,yBAAKtR,MAAO,CAACE,QAAS,OAAQC,cAAe,SAAW9C,MAAO,SAC3D,kBAACiM,GAAD,CAAYvC,KAAG,EAAC/G,MAAO,CAAC0P,WAAY,KAC/BkC,GAEL,yBAAK5R,MAAO,CAACE,QAAS,OAAQC,cAAe,QACzC,kBAAC,GAAD,MACKlJ,MAAQA,EACR6a,IAAKA,EACLT,QAAM,GAAKnB,EAHhB,CAIKqB,MAAOA,EACPD,WAAYA,EACZe,SAAU,SAAChE,GAAD,OAAO4D,EAAa5D,IAC9BiE,QAAS,kBAAMnY,QAAQC,IAAI,gBAE/B,kBAAC,GAAD,CAAgB+M,SAAO,EAACJ,KAAG,EAAC1J,MAAO,OAAQuN,KAAMsH,EAAY1H,YAAawH,EAAehS,MAAO,CAAE3C,MAAO,IAAK6C,QAAS,eAAiByR,UAAW,yBAKxJI,GACJ,yBAAK/R,MAAO,CAACE,QAAS,OAAQC,cAAe,SAAW9C,MAAO,SAC3D,kBAACiM,GAAD,CAAYvC,KAAG,EAAC/G,MAAO,CAACgO,YAAa,GAAIuE,UAAW,WAC/CX,GAED,0BAAMY,SAAU,SAACnE,GACbA,EAAEC,iBACF0D,MAEZ,yBAAKhS,MAAO,CAACE,QAAS,OAAQC,cAAe,QAE7B,kBAAC,GAAD,MAAWlJ,MAAOA,EAAO6a,IAAKA,EAAKT,QAAM,GAAKnB,EAA9C,CAAoDqB,MAAOA,EAAOta,MAAOA,EAAOqa,WAAYA,EAAYe,SAAU,SAAChE,GAAD,OAAO4D,EAAa5D,IAAIiE,QAAS,kBAAMnY,QAAQC,IAAI,gBACrK,kBAAC,GAAD,CAAgBiD,MAAO,OAAQ8J,SAAO,EAACJ,KAAG,EAACC,IAAE,EAACzK,QAAM,EAAC1C,KAAK,SAASmG,MAAO,CAAE3C,MAAO,IAAK6C,QAAS,eAAiByR,UAAW,uBAC/G,IAAZ7H,EACG,yBAAKzI,UAAU,eAAf,IAA+B6Q,GA9CpD,kBAAC,KAAD,CACIrY,KAAK,YACL6Q,MAAM,UACNzN,OAAQ,GACRI,MAAO,GACPsN,QAAS,WAmDX2G,IAAeS,GACb,yBAAK/R,MAAO,CAACE,QAAS,OAAQC,cAAe,SAAW9C,MAAO8U,IAC3D,kBAAC7I,GAAD,CAAWtJ,MAAO,CAAC0P,WAAY,KAC1BkC,GAEL,kBAAC,GAAD,MAAW3a,MAAOA,EAAO6a,IAAKA,GAAS5B,EAAvC,CAA6CoB,WAAYA,EAAYe,SAAU,SAAChE,GAAD,OAAO4D,EAAa5D,IAAIiE,QAAS,kBAAMnY,QAAQC,IAAI,mBAOlJyX,GAAgBhH,aAAe,CAC3ByG,YAAY,EACZS,eAAe,EACf9a,MAAO,GACP6S,SAAS,GAIE2I,4BAAWZ,I,uoBCnF1B,IA6Bea,GA7BQ,SAAC,GAAyC,IAAxCC,EAAwC,EAAxCA,OAAQC,EAAgC,EAAhCA,QAASC,EAAuB,EAAvBA,SAAuB,wCAM7D,OACG,kBAACC,GAAD,CAAOC,QAASJ,EAAO/W,GAAIiX,SAAUA,IAAaF,EAAO/W,IACzD,kBAACoX,GAAD,CACCnZ,KAAK,QACLtD,KAAK,WACLqF,GAAI+W,EAAO/W,GACX3E,MAAO0b,EAAO/W,GACdyW,SAAU,kBAXU3W,EAWYiX,EAAO/W,GAVxCzB,QAAQC,IAAI,UAAWsB,QACvBkX,EAAQlX,GAFY,IAACA,KAarB,kBAACuX,GAAD,KACK,yBACIhE,IAAK0D,EAAOO,eAAe1O,IAC3BxE,MAAO,CAACmP,UAAW,GAAIxC,SAAU,IAAKqB,YAAa,MAEvD,kBAAC1E,GAAD,CAAWvI,KAAG,GACT4R,EAAO9R,iBADZ,MACiC8R,EAAOQ,qBAAqB,6BAD7D,aAEqBR,EAAOhX,cAAcgG,QAAQ,OASxDqR,GAASzW,IAAO6U,MAAV,MAMN0B,GAAQvW,IAAOqV,MAAV,MAQL,SAAAnV,GAAK,OAAIA,EAAMoW,UAAYlW,cAAlB,SAITsW,GAAgB1W,IAAOC,IAAV,M,8MC9CnB,IA4Be4W,GA5BE,SAAC,GAAgC,IAA/B7c,EAA+B,EAA/BA,KAAMqF,EAAyB,EAAzBA,GAAIyX,EAAqB,EAArBA,MAAO7V,EAAc,EAAdA,SAC1BoQ,EAAUC,uBAMhB,OACI,oCACA,kBAAC,GAAD,CAAe7M,QAAS,kBANX,SAACpF,GACdgS,EAAQW,KAAR,oBAA0B3S,IAKI0X,CAAS1X,IAAK+B,GAAIH,EAAW,KACvD,yBAAKyR,IAAKoE,EACVrT,MAAO,CAAC/C,OAAQO,EAAW,IAAM,IAAM,IACtCmU,UAAWnU,EAAW,IAAM,sCAAsC,qCACnE,yBAAKwC,MAAO,CAAC2R,UAAW,kCAAmCzR,QAAS,OAAQG,WAAY,WACtF7C,EAAW,KACb,oCACA,kBAAC,GAAD,CAAKjH,KAAMA,IACP,kBAAC2S,GAAD,KACK3S,QAYfoa,GAAMpU,IAAOC,IAAV,KAIcM,GAEjB,SAAAL,GAAK,MAAmB,UAAfA,EAAMlG,MAAN,sCACauG,EADb,aAGT,SAAAL,GAAK,MAAmB,YAAfA,EAAMlG,MAAN,sCACauG,EADb,aAGT,SAAAL,GAAK,OAAIA,EAAMe,SAAW,KAAjB,sD,ynBC7Cf,IAUM+V,GAAUC,oBAAH,MAMPC,GAAclX,IAAOC,IAAV,MAQXkX,GAASnX,IAAOC,IAAV,KASK+W,IAGFI,GApCI,WACf,OACI,kBAACF,GAAD,KACI,kBAACC,GAAD,KACI,yBAAKzE,IAAI,gBAAgBC,IAAI,iB,4jBCH7C,IAee0E,GAfE,WAAM,IAEXzY,EAAamM,uBAAY,SAACxM,GAAD,OAAWA,EAAMe,MAA1CV,SAER,OACI,kBAAC0Y,GAAD,CAAmBC,KAAM3Y,GACrB,4BACI,sCACA,qCACA,2CAQV0Y,GAAoBtX,IAAOC,IAAV,MAYrB,SAAAC,GAAK,OAAmB,IAAfA,EAAMqX,MAAiBnX,cAAvB,QAWEb,G,qNClCT,IAAMiY,GAAQ,CACV,CAACC,GAAI,EAAGpC,MAAO,WACf,CAACoC,GAAI,EAAGpC,MAAO,YACf,CAACoC,GAAI,EAAGpC,MAAO,WACf,CAACoC,GAAI,EAAGpC,MAAO,YAuKLqC,GAnKQ,WAEtB,IAeQ/b,EAASoP,uBAAY,SAAAxM,GAAK,OAAIA,EAAM5C,QAApCA,KAjBoB,EAkBMwP,qBAAWgC,GAhBxB,CACjBG,KAAM,EACNF,eAAe,EACfC,MAAO,KACPE,SAAS,EACTC,SAAU,GACVtP,QAAS,GACTuP,OAAQ,CACJ3D,UAAU,EACVgE,WAAY,GACZF,SAAU,GACV+J,sBAAuB,GACvB9J,SAAU,MAdU,WAkBrB+J,EAlBqB,KAkBVC,EAlBU,KAmBpBvK,EAAyHsK,EAAzHtK,KAAMF,EAAmHwK,EAAnHxK,cAAeC,EAAoGuK,EAApGvK,MAAgBE,GAAoFqK,EAA7F1Z,QAA6F0Z,EAApFrK,SAnBjB,EAmBqGqK,EAA3EnK,OAAUvR,EAnBpC,EAmBoCA,MAAO0R,EAnB3C,EAmB2CA,SAAU9D,EAnBrD,EAmBqDA,SAAU+D,EAnB/D,EAmB+DA,SAAU8J,EAnBzE,EAmByEA,sBAC/FjO,EAAW4B,wBAEbC,qBAAU,WACP,I9B5Ba7C,E8B4BPlC,EAAWX,GAAKa,cACtB,G9B7BagC,E8B6BGlC,G9B5BlBsR,KAAEjR,QAAQ6B,G8B4BoB,CACxBmP,EAAa,CAACva,KAAM,cACpB,IAAMya,EAAQ,qBAAH,OAAwBvR,EAASrH,KAC9C6Y,EAAQD,GAEVna,QAAQC,IAAI,gBAAiB2I,KAE7B,CAAC,CAAC4G,IAEL7B,qBAAU,WACN3N,QAAQC,IAAI,gBAAiB+Z,EAAWjc,KACzC,CAACic,IAEJrM,qBAAU,WACN0M,OAAOC,SAAS,EAAG,KACpB,CAAC5K,EAAMD,EAAOD,EAAeG,IAEhC,IAAMyK,EAAO,+BAAG,WAAMD,GAAN,eAAAnV,EAAA,+EAEUsH,GAAA,oBAAwB6N,IAFlC,OAEF5N,EAFE,OAGRvM,QAAQC,IAAI,iBAAkBsM,EAAI,IAClCT,EAAS,CAACpM,KAAM,mBAAoBmB,QAAS0L,EAAI,KAJzC,gDAMRvM,QAAQC,IAAR,MANQ,yDAAH,sDAqBXsa,EAAiB,+BAAG,WAAMrG,GAAN,mBAAAlP,EAAA,yDACtBkP,EAAEC,iBACF8F,EAAa,CAACva,KAAM,gBACJ,IAAbwM,EAHmB,oBAIf8D,IAAa+J,EAJE,uBAKd/Z,QAAQC,IAAI,yBALE,iCAQlBD,QAAQC,IAAI,wBACV0K,EAAO,CAACrM,MAAOA,EAAO0R,SAAUA,EAAUC,SAAUA,GATpC,mBAWRuK,GAAOtO,SAASvB,EAAMmB,GAXd,QAYdmO,EAAa,CAACva,KAAM,cAZN,kDAcdM,QAAQC,IAAR,MACAga,EAAa,CAACva,KAAM,aAAcmB,QAAS,EAAF,KAf3B,uCAmBlBb,QAAQC,IAAI,wBAAyB3B,EAAO0R,GACtCrF,EAAO,CAACuF,WAAY5R,EAAO0R,SAAUA,EAAUC,SAAUA,GApB7C,oBAsBQuK,GAAO3O,MAAMlB,EAAMmB,GAtB3B,QAuBS,OADlBxC,EAtBS,QAuBFG,OACZwQ,EAAa,CAACva,KAAM,aAAcmB,QAASyI,EAAS2C,UAEpDgO,EAAa,CAACva,KAAM,cAEpBM,QAAQC,IAAI,kBAAmBqJ,GA5BjB,mDA8BdtJ,QAAQC,IAAI,eAAZ,MACAga,EAAa,CAACva,KAAM,aAAcmB,QAAS,EAAF,KA/B3B,kEAAH,sDAyCnB,OACI,oCACI,kBAAC4Z,GAAD,KAEQb,GAAMhV,KAAI,SAAAoN,GAAE,OACZ,kBAAC,GAAD,CAAQyF,MAAOzF,EAAGyF,MAAO/H,KAAMA,EAAMqH,OAAQ/E,EAAG6H,GAAIzc,IAAK4U,EAAG6H,SAIxD,IAATnK,IAAeF,GAA2B,OAAVC,GAC/B,oCACI,kBAAC,GAAD,CACIqI,aAhEH,SAAC5D,GAAM,MACeA,EAAEwC,OAAjCta,EADgB,EAChBA,KAAMU,EADU,EACVA,MAAO4C,EADG,EACHA,KAAM+Y,EADH,EACGA,QAC3B,GAAa,aAAT/Y,EAGA,OAFAua,EAAa,CAACva,KAAM,sBACpBua,EAAa,CAACva,KAAM,eAAgBoQ,UAAW1T,EAAM2T,WAAY0I,IAGjEwB,EAAa,CAACva,KAAM,eAAgBoQ,UAAW1T,EAAM2T,WAAYjT,KA0DjD4d,YAAaH,EACbzO,SAAUmO,EACVnP,KAAMkP,EAAUnK,OAChBF,QAASqK,EAAUrK,QAAU,OAAI5B,MAK/B,IAAT2B,GAAcF,GAA0B,IAATE,IAAwB,IAAVD,IAC9C,oCACI,kBAAC,GAAD,CAAa1R,KAAMA,EAAMic,UAAWA,EAAWW,YA3B/C,SAAC/Z,GACbqZ,EAAa,CAACva,KAAMkB,KA0BiEqZ,aAAcA,KAIlF,IAATvK,GAEI,kBAACjM,GAAD,KACI,kBAACC,GAAD,KACI,kBAACwL,GAAD,iCAGA,kBAACpL,GAAD,CAASP,GAAG,UAEhB,kBAACI,GAAD,KACI,kBAAC,GAAD,CAAiBmI,SAAUA,EAAUmO,aAAcA,MAMtD,IAATvK,GACI,oCACA,kBAAC,GAAD,CAAWuK,aAAcA,KAKpB,IAATvK,GACI,oCACI,kBAAC,GAAD,CAAiBsK,UAAWA,EAAYlO,SAAUA,OAUxE2O,GAAQrY,IAAOC,IAAV,MC7IIuY,GAtCS,SAAC,GAAgB,IAAfZ,EAAe,EAAfA,UAQtB,OAHA7R,aAAae,QAAQ,YAAanB,KAAKC,UAAU,KAI7C,kBAACvE,GAAD,KACI,kBAACC,GAAD,KACG,kBAACwL,GAAD,0BAGK,kBAACpL,GAAD,OAER,kBAACH,GAAD,KACI,kBAACwL,GAAD,2DAGA,kBAACA,GAAD,0HAKJ,kBAACvL,GAAD,KACI,kBAACC,GAAD,KAEQmW,EAAUxK,eACV,kBAAC,GAAD,CAAgB5C,KAAG,EAACjG,WAAS,EAAC8J,KAAK,eAEvC,kBAAC,GAAD,CAAgB7D,KAAG,EAAC6D,KAAK,e,SCnB9BoK,GAdY,SAAAvY,GAAS,MAEcoD,oBAAS,GAFvB,WAE1BoV,EAF0B,KAETC,EAFS,KAShC,OANFpN,qBAAU,WACN,IAAM6B,EAAoC,OAApBvH,GAAKY,WAC3B7I,QAAQC,IAAI,mBAAoBgI,GAAKY,YACrCkS,EAAmBvL,KACpB,IAEM,CACHsL,oBCaOE,GAxBE,SAAC,GAAiB,IAAf1b,EAAe,EAAfA,SAAe,EACKoG,oBAAS,GADd,WACvBuV,EADuB,KACZC,EADY,OAEiBxV,mBAAS,MAF1B,WAEvByV,EAFuB,KAENC,EAFM,KAYzBC,EAAS,WACXH,GAAcD,IAGlB,MAAO,CACHA,YACAI,SACAhL,YAfc,SAAC5O,GACnBzB,QAAQC,IAAI,QAASwB,GACrB,IAAMiX,EAAWpZ,EAASA,SAAS+B,QAAO,SAAC4P,GAAD,OAAaA,EAAQxP,KAAOA,KACtE2Z,EAAmB1C,EAAS,IAC5B1Y,QAAQC,IAAI,WAAYkb,GACxBE,KAWIF,oBC6BOG,GAhDQ,SAAC,GAaf,IAXDxP,EAWC,EAXDA,SAWC,IAVDyP,WACK1L,OACKvR,EAQT,EARSA,MACA0R,EAOT,EAPSA,SACA9D,EAMT,EANSA,SACA+D,EAKT,EALSA,SACA8J,EAIT,EAJSA,sBAgCd,OA3BI/Z,QAAQC,IAAI,kBAAmBiM,GA2B5B,CACHqO,kBA1BmB,+BAAG,8BAAAvV,EAAA,yDACtB8G,EAAS,CAACpM,KAAM,gBACA,IAAbwM,EAFmB,oBAGf8D,IAAa+J,EAHE,uBAId/Z,QAAQC,IAAI,yBAJE,iCAOlBD,QAAQC,IAAI,wBACV0K,EAAO,CAACrM,MAAOA,EAAO0R,SAAUA,EAAUC,SAAUA,GARpC,SASbuK,GAAOtO,SAASvB,EAAMmB,GATT,OAUlBA,EAAS,CAACpM,KAAM,cAVE,+BAalBM,QAAQC,IAAI,wBAAyB3B,EAAO0R,GACtCrF,EAAO,CAACuF,WAAY5R,EAAO0R,SAAUA,EAAUC,SAAUA,GAd7C,oBAgBRuK,GAAO3O,MAAMlB,EAAMmB,GAhBX,QAiBdA,EAAS,CAACpM,KAAM,cAjBF,mDAmBdM,QAAQC,IAAR,MACA6L,EAAS,CAACpM,KAAM,aAAcmB,QAAS,EAAF,KApBvB,2DAAH,qDA2BnB2a,YAAY,EACZ5L,SAAU,KC7BH6L,GAhBU,WAAM,MACG/V,mBAAS,MADZ,WACtBgW,EADsB,KACZC,EADY,KAa7B,OAVAhO,qBAAU,WACR,IAAMiO,EAAqB,kBAAMD,EAAYtB,OAAOwB,aAEpD,OADAxB,OAAOyB,iBAAiB,SAAUF,GAC3B,kBAAMvB,OAAO0B,oBAAoB,SAAUH,MACjD,IAEHjO,qBAAU,WACNgO,EAAYtB,OAAOwB,cACpB,IAEI,CAACH,aCmDKM,GAzDG,SAAC1Z,GAGnB,IAAM2Z,EAASC,iBAAO,IAChBC,EAAQC,GAAMD,MAJS,EAMYzW,mBAAS,MANrB,WAMpB2W,EANoB,KAMPC,EANO,KAQzB3O,qBAAU,WACN,IAAI4O,EAAUja,EAAMwI,KAAKoB,SAAW,WAAa,QACjDoQ,EAAeC,GAEfvc,QAAQC,IAAI,SAAUgc,KACvB,CAAC,CAAE3Z,EAAMwI,KAAKoB,SAAU+P,IAM3B,OACI,kBAACxY,GAAD,KACQ,kBAACsL,GAAD,4BACA,0BACIsJ,SAAU,SAACnE,GAAD,OAAO5R,EAAMoY,YAAYxG,IACnCrO,MAAO,CAAE+O,UAAW,GAAI7O,QAAS,OAAQ7C,MAAO,OAAO8C,cAAe,WAGlEqW,GAAeF,EAAME,GAAazX,KAAI,SAACoN,EAAInW,GAAL,OAElC,kBAAC,GAAD,CACI2gB,YAAexK,EAAGwK,YAClB/E,MAAOzF,EAAGyF,MACV/X,KAAMsS,EAAGtS,KACTtD,KAAM4V,EAAG5V,KACT0b,aAAcxV,EAAMwV,aACpB1a,IAAKvB,EACLoc,UAAWjG,EAAGiG,UACdwE,SAAUzK,EAAGyK,SACb9E,IAAK,SAACzD,GAAD,OAAQ+H,EAAOM,QAAQ1gB,GAAKqY,QAIzC,6BACA,mEACuC,2BAAOxU,KAAK,WAAWtD,KAAK,WAAWqc,QAASnW,EAAMwI,KAAKoB,SAAWgM,SAAU5V,EAAMwV,gBAE7H,kBAACjU,GAAD,KACI,kBAAC,GAAD,CAAgBmJ,SAAO,EAACL,OAAK,EAACjN,KAAK,SAAS+Q,KAAMnO,EAAMwI,KAAKoB,SAAW,WAAa,UAAWY,KAAG,EAAC6C,UAASrN,EAAMqN,cAAiB5B,GAAW,kBAAC,QAAD,OAAyB,6BACxJ,eAAfzL,EAAM5C,MACP,kBAAC,GAAD,CAAgBiN,OAAK,EAACjN,KAAK,SAAS+Q,KAAK,iBAAiBd,QAAQ,QAAQhJ,WAAS,EAACmG,KAAG,EAACuD,YAAa,kBAAM/N,EAAMwJ,SAAS,CAACpM,KAAM,qBAAoB,kBAAC,cAAD,W,qkBC/CjL,IAqJegd,GArJK,SAAC,GAAiD,IAAhD3e,EAAgD,EAAhDA,KAAMic,EAA0C,EAA1CA,UAAWC,EAA+B,EAA/BA,aAAcU,EAAiB,EAAjBA,YAE1CwB,EAASC,GAATD,MAF2D,EAGlCzW,oBAAS,GAHyB,WAG1DiX,EAH0D,KAGjDC,EAHiD,OAIjClX,mBAAS,IAJwB,WAI1DmX,EAJ0D,KAIhDC,EAJgD,OAKlCpX,oBAAS,GALyB,WAK1DiK,EAL0D,KAKjDmB,EALiD,KAM1D1S,EAAkIL,EAAlIK,eAAgBC,EAAkHN,EAAlHM,mBAAoBE,EAA8FR,EAA9FQ,kBAAmBC,EAA2ET,EAA3ES,kBAAmBC,EAAwDV,EAAxDU,kBAAmBE,EAAqCZ,EAArCY,cAAeD,EAAsBX,EAAtBW,kBAC9GoN,EAAW4B,wBACX+F,EAAUC,wBAChB1T,QAAQC,IAAI,UAAWlC,GAEvB,IAAMgf,EAAoB,SAAC7I,GAAM,MACLA,EAAEwC,OAAlBta,EADqB,EACrBA,KAAMU,EADe,EACfA,MACdggB,GAAW,SAAAE,GAAM,gBAASA,GAAT,UAAkB5gB,EAAOU,QAO9C6Q,qBAAU,WACN3N,QAAQC,IAAI,eAAgBlC,EAAKM,oBACjB,IAAZN,EAAKwD,KAAwC,IAA3BxD,EAAKM,oBACvBue,GAAW,GAGfE,EAAW/e,KACZ,CAAC,CAAEA,IAEN,IAAMkf,EAAU,+BAAG,WAAM/I,GAAN,eAAAlP,EAAA,yDACf8L,GAAW,GACXoD,EAAEC,kBACC6F,EAAUxK,cAHE,wBAIXxP,QAAQC,IAAI,mBAJD,SAKOqM,GAAA,qBAAyBvO,EAAKwD,KAAO,MAAOsb,GALnD,OAKLtQ,EALK,OAMXvM,QAAQC,IAAI,eAAgBsM,GAC5BT,EAAS,CAACpM,KAAM,mBAAoBmB,QAAS0L,IAPlC,wBASXT,EAAS,CAACpM,KAAM,mBAAoBmB,QAASgc,IAC7C7c,QAAQC,IAAI,WAAY4c,GAVb,QAYfD,GAAW,GACX9L,GAAW,GAbI,4CAAH,sDA2GhB,OACI,qCACe,IAAZ6L,GAAqB5e,EAAKM,oBA3Fb,kBAACoF,GAAD,KACI,kBAACC,GAAD,KACI,kBAACwL,GAAD,wBAGA,kBAACpL,GAAD,CAASP,GAAG,UAEhB,kBAACI,GAAD,KACM5F,EAAKM,mBACP,oCACA,kBAAC0Q,GAAD,KACE3Q,EADF,IACoBC,EADpB,IACyCE,GAEzC,kBAACwQ,GAAD,KACEvQ,GAEF,kBAACuQ,GAAD,KACEtQ,GAEF,kBAACsQ,GAAD,KACEpQ,GAEF,kBAACoQ,GAAD,KACErQ,IAGA,kBAACqQ,GAAD,0CAGV,kBAACnL,GAAD,KACA,kBAACC,GAAD,KACI,kBAAC,GAAD,CAAgB+I,KAAG,EAACjG,WAAS,EAAC8J,KAAK,OAAOJ,YAAa,WA7D3EoD,EAAQyJ,WA6DmF,kBAAC,aAAD,OACvE,kBAAC,GAAD,CAAgBtQ,KAAG,EAACjG,WAAS,EAAC8J,KAAK,SAASJ,YAAa,kBAAMuM,GAAW,KAAO,kBAAC,SAAD,OACjF,kBAAC,GAAD,CAAgBhQ,KAAG,EAAC6D,KAAK,UAAUJ,YAAa,kBAAMsK,EAAY,eAAc,kBAAC,cAAD,YA8DnF,IAAZgC,IAAqB5e,EAAKM,qBArD3B,kBAACoF,GAAD,KACI,kBAACC,GAAD,KACI,kBAACwL,GAAD,yCACJ,kBAACpL,GAAD,OAEI,kBAACH,GAAD,KACI,0BAAM0U,SAAU,SAACnE,GAAD,OAAO+I,EAAW/I,KAC9B,yBAAKrO,MAAO,CAACE,QAAS,OAAQC,cAAe,MAAO9C,MAAO,OAAQia,SAAU,OAAQlX,eAAe,aAAcC,WAAY,eAE1HiW,EAAMiB,YAAYxY,KAAI,SAACoN,EAAInW,GAAL,OAClB,kBAAC,GAAD,CACI2gB,YAAaxK,EAAGwK,YAChB/E,MAAOzF,EAAGyF,MACVrb,KAAM4V,EAAG5V,KACTgB,IAAKvB,EACLic,aAAc,SAAC5D,GAAD,OAAO6I,EAAkB7I,IACvCuI,UAAQ,EACRzE,KAAMhG,EAAG9O,MACTpG,MAAO+f,EAAQ7K,EAAGlV,aAKzBkd,EAAUxK,eACX,kBAAC,GAAD,CACIgN,YAAY,oBACZ/E,MAAM,gBACNrb,KAAK,QACL0b,aAAc,SAAC5D,GAAD,OAAO6I,EAAkB7I,IACvCuI,UAAQ,EACRzE,KAAK,UAIjB,kBAACnU,GAAD,KACEmW,EAAUvK,MACP,kBAAC,GAAD,CAAgB7C,KAAG,EAACjG,WAAS,EAAC8J,KAAK,OAAOJ,YAAa,kBAAM4J,EAAa,CAACva,KAAM,wBAAuB,kBAAC,SAAD,OACvG,kBAAC,GAAD,CAAgBkN,KAAG,EAACjG,WAAS,EAAC8J,KAAK,SAASJ,YAAa,kBAAMuM,GAAW,KAAQ,kBAAC,SAAD,OAEpF,kBAAC,GAAD,CAAgBhQ,KAAG,EAAC6D,KAAK,OAAO/Q,KAAK,SAASiQ,QAASA,EAAU,OAAI5B,UC5DlFsP,GAvES,SAAC,GAA6B,IAA5BvR,EAA4B,EAA5BA,SAAUmO,EAAkB,EAAlBA,aAAkB,EACnBvU,mBAAS,IADU,WAC3C4E,EAD2C,KAClCgT,EADkC,OAElB5X,oBAAS,GAFS,WAEjCoL,GAFiC,aAGPpL,qBAHO,WAG3C6X,EAH2C,KAG5BC,EAH4B,KAI1Cxf,EAAWmP,uBAAY,SAAAxM,GAAK,OAAIA,EAAM3C,UAAtCA,OAER2P,qBAAU,WACNyM,MACD,IAEHzM,qBAAU,WACL,IAAM8P,EAAkBnT,EAAQoT,MAAK,SAAA1L,GAAE,OAAIA,EAAGzQ,MAAQgc,KACtDvd,QAAQC,IAAI,qBAAsBwd,GAClC,IAAIE,EAAe,EACnB,GAAIF,EAAkB,KACbjc,EAAsBic,EAAtBjc,cAAeC,EAAOgc,EAAPhc,GACfmc,GAAgB5f,EAAOsB,UAAY,IAAQkC,EAAgB,GAC5DxB,QAAQC,IAAI,cAAe2d,GAAgB5f,EAAOsB,WACnDqe,EAAe,GAEfA,EAAenc,EAEnBsK,EAAS,CAACpM,KAAM,cAAemB,QAAS,CAACW,cAAcmc,EAAclc,QACrEwY,EAAa,CAACva,KAAM,cAAemB,QAAS4c,IAC5Czd,QAAQC,IAAI,QAAS0d,MAE1B,CAACJ,IAEJ,IAAMnD,EAAO,+BAAG,4BAAApV,EAAA,+EAEasH,GAAW,aAAc,WAAOyB,EAAW,UAFxD,OAEF8P,EAFE,OAGR7d,QAAQC,IAAI,YAAa4d,GACzBP,EAAWO,GAEPD,GAAgB5f,EAAOsB,UAAY,GACnCke,EAAiBK,EAAO,GAAGtc,KAE3Bic,EAAiBK,EAAO,GAAGtc,KAE/BuP,GAAW,GAXH,kDAaRA,GAAW,GAbH,0DAAH,qDAiBPgN,EAAe,SAACvc,GAClBvB,QAAQC,IAAI,WAAYsB,GACxBic,EAAiBjc,IAGrB,OACI,oCACI,yBAAKsE,MAAO,CAACE,QAAS,OAAQC,cAAe,WAErCsE,EAAQ5F,OAAS,EAAI4F,EAAQ1F,KAAI,SAACoN,EAAInW,GAAL,OAC7B,kBAAC,GAAD,CAAgBkiB,OAAQR,EAAe7E,SAAU6E,EAAe9E,QAASqF,EAActF,OAAQxG,EAAI5U,IAAKvB,OAG5G,6DAKR,kBAACgI,GAAD,KACI,kBAAC,GAAD,CAAgB+I,KAAG,EAACjG,WAAS,EAAC8J,KAAK,OAAOJ,YAAa,kBAAM4J,EAAa,CAACva,KAAM,gBAAe,kBAAC,aAAD,OAChG,kBAAC,GAAD,CAAgBkN,KAAG,EAAC6D,KAAK,WAAWJ,YAAa,kBAAM4J,EAAa,CAACva,KAAM,oB,iMC7D3F,IA0Lese,GA1LG,SAAC,GAAmB,MAAlB/D,EAAkB,EAAlBA,aACRjc,EAAWmP,uBAAY,SAAAxM,GAAK,OAAIA,EAAM3C,UAAtCA,OACAD,EAASoP,uBAAY,SAAAxM,GAAK,OAAIA,EAAM5C,QAApCA,KAF0B,EAGE2H,oBAAS,GAHX,WAG1BuY,EAH0B,KAGfC,EAHe,OAIQxY,mBAAS,IAJjB,WAI1ByY,EAJ0B,KAIZC,EAJY,OAKE1Y,mBAAS,GALX,WAK1BzH,EAL0B,KAKfogB,EALe,OAMF3Y,mBAAS,MANP,WAM1BvH,EAN0B,KAMjBmgB,EANiB,KAO5BC,EAAWC,yBACXC,EAASC,uBAEPtgB,EAAkJL,EAAlJK,eAAgBC,EAAkIN,EAAlIM,mBAAoBE,EAA8GR,EAA9GQ,kBAAmBogB,EAA2F5gB,EAA3F4gB,eAAgBngB,EAA2ET,EAA3ES,kBAAsCE,GAAqCX,EAAxDU,kBAAwDV,EAArCW,mBAAmBC,EAAkBZ,EAAlBY,cAChI2B,EAAiCtC,EAAjCsC,QAAShB,EAAwBtB,EAAxBsB,SAAUiB,EAAcvC,EAAduC,UAE3BoN,qBAAU,WACN3N,QAAQC,IAAI,iBAAkBjC,EAAQ,OAAQD,GAC9C,IAAM6gB,EAAahB,GAAgBte,EAAUgB,GAC7C+d,EAAaO,EAAWpX,QAAQ,MACjC,CAACxJ,IAEH2P,qBAAU,WACP1P,EAAY,GAAK4gB,MAClB,CAAC5gB,IAEJ,IAAM4gB,EAAW,+BAAG,8CAAA7Z,EAAA,yDAAM8Z,EAAN,iCAGZ3gB,EAHY,wDAIV4gB,EAAW,CACbtZ,eAAgB1H,EAAKwD,IACrB+D,YAAarH,EACb+gB,WAAY,IAAIzY,KAChB0Y,kBAAkB,EAClBC,gBAAiBJ,EACjBtZ,YAAaxH,EACbmhB,cAAe7e,EACfmG,cAAelG,GAZH,kBAeS+L,GAAW,UAAW,OAAQyS,GAfvC,gBAeJtd,EAfI,EAeJA,GACR6c,EAAW7c,GAhBC,kDAkBZzB,QAAQC,IAAI,wBAAZ,MAlBY,QAoBhBD,QAAQC,IAAI,gBAAiB8e,GApBb,0DAAH,qDA2BXK,EAAqB,CACvBvZ,MAAO,CACHwZ,KAAK,CACD7J,SAAU,OACVjF,MAAO5N,EACP,gBAAiB,CACb4N,MAAO5N,KAGf2c,QAAS,GACTC,SAAU,IAEdC,gBAAgB,GAGdC,EAAgB,+BAAG,WAAMvL,GAAN,6CAAAlP,EAAA,yDACrBkP,EAAEC,iBACFnU,QAAQC,IAAI,cAAeiU,IACV,IAAd+J,EAHkB,wDAIrBC,GAAa,GAEPwB,EAAiB,CACnBtjB,KAAM,GAAF,OAAKgC,EAAL,YAAuBC,EAAvB,YAA6CE,GACjDD,MAAOqgB,EACP9B,QAAU,CACN8C,KAAKhhB,EACLihB,MAAOphB,EACPmC,MAAOhC,EACPkhB,YAAanhB,KAKbuM,EAAY,IAAIC,SACVC,OAAO,eAAgB,oBAE7BE,EAAiB,CACrBR,OAAQ,MACRN,QAASU,EACTM,SAAU,UAxBO,UA2BAX,MAAM,gCAAD,QAA4C,IAAV3M,GAAeuJ,QAAQ,IAAM6D,GA3BpE,eA2BfwS,EA3Be,iBA4BMA,EAAOpN,OA5Bb,eA4BfqP,EA5Be,OA6BrB9f,QAAQC,IAAI,mBAAoB6f,GAG1BC,EAAcxB,EAASyB,WAAWC,gBAhCnB,oBAoCkBxB,EAAOyB,oBAAoB,CAC1DxgB,KAAM,OACNygB,KAAMJ,EACNK,gBAAiBV,IAvCJ,aAoCXW,EApCW,QA0CQ3iB,eAAe,SA1CvB,0BA2CO2iB,EAAqBlgB,OAAS,GAA1C8L,EA3CK,EA2CLA,QACRjM,QAAQC,IAAI,0BAA2BgM,GAEvCiS,GAAa,GACbjS,GAAWmS,EAAgBnS,GA/Cd,4CAmDkBwS,EAAO6B,mBAAmBR,EAAc,CACvES,eAAgBF,EAAqBG,cAAc/e,KApDtC,eAmDXgf,EAnDW,OAuDbzgB,QAAQC,IAAIwgB,GAEN3V,EAAO,CACToU,iBAAiB,GA1DR,UA4DP5S,GAAA,kBAAsBnO,GAAW,MAAO2M,GA5DjC,eA6Db9K,QAAQC,IAAI,kCAAmClC,GAGzC2iB,EAAoB,IAAIjhB,gBACxBkhB,EAAYD,EAAkBvjB,OAAOY,EAAMC,EAAQC,EAAWE,EAAS,GAC7E6B,QAAQC,IAAI,uBAAwB0gB,IAEhC1V,EAAY,IAAIC,SACVC,OAAO,YAAa,4BAC9BF,EAAUE,OAAO,eAAgB,oBAE7BE,EAAiB,CACrBR,OAAQ,OACRN,QAASU,EACTN,KAAM5C,KAAKC,UAAU2Y,GACrBpV,SAAU,UA5EG,UA8EUX,MAAM,wEAAyES,GA9EzF,eA8EP/B,EA9EO,iBA+EQA,EAASmH,OA/EjB,QA+EPnS,EA/EO,OAgFb0B,QAAQC,IAAI,qBAAsB3B,GAElC2b,EAAa,CAACva,KAAM,qBAGpBwe,GAAa,GArFA,0DAuFjBle,QAAQC,IAAI,mBAAZ,MACIie,GAAa,GAxFA,8EAAH,sDA6FrB,OACI,kBAACza,GAAD,KACG,0BAAM4U,SAAU,SAACnE,GAAD,OAAOuL,EAAiBvL,KACxC,kBAACxQ,GAAD,KACI,kBAACwL,GAAD,wBAIJ,kBAACvL,GAAD,KACI,kBAACid,GAAD,KACI,kBAAC,eAAD,CAAaC,WAAY,SAAC3M,GAAD,OAAOlU,QAAQC,IAAIiU,EAAEpX,QAAQwN,QAAS8U,KAEnE,kBAACjQ,GAAD,CAAWE,QAAM,GACX8O,GAAgBA,GAEtB,yBAAKrJ,IAAI,uBAAuBjP,MAAO,CAAC3C,MAAO,UAEnD,kBAACU,GAAD,KACI,kBAACC,GAAD,KACI,kBAAC,IAAD,GAAgB8C,WAAS,EAACiG,KAAG,EAAClN,KAAK,UAAnC,6BAAqD,QAArD,qBAAyE,kBAAMua,EAAa,CAACva,KAAM,iBAAnG,IACA,kBAAC,GAAD,CAAgBiQ,QAASsO,EAAWve,KAAK,SAASkN,KAAG,EAAC6D,KAAM,QAAoBxS,SAU9F2iB,GAAqBxe,IAAOC,IAAV,KAIlB,GACYM,EACZ,IC1MAme,GAAQ,SAACxe,GACX,OACI,kBAACM,GAAD,CAASG,OAAK,EAACF,QAASP,EAAMkB,GAAIR,OAAQV,EAAMkB,GAAIV,OAAQR,EAAMQ,QAC9D,kBAACG,GAAD,CAASC,MAAQ,IAAKC,GAAI,IACtB,kBAAC,GAAD,CACIyJ,KAAMtK,EAAMkB,GACZsU,aAAcxV,EAAMwV,aACpBD,cAAevV,EAAMye,aACrBnJ,eAAa,EACbjI,QAASrN,EAAMqN,QACf7S,MAAOwF,EAAM0e,YACb5J,MAAO9U,EAAM8U,MACbW,WAAYzV,EAAM2e,QAClBxJ,MAAOnV,EAAMmV,MACb/X,KAAK,OACL8c,YAAala,EAAMka,YACnBrF,WAAY7U,EAAMkB,QAOtCsd,GAAMpQ,aAAe,CAClBuQ,QAAS,cACTne,OAAQ,IACR0Z,YAAa,wBACb1E,aAAc,aACdD,cAAe,cAGHiJ,U,oiDC7Bf,IA4BeI,GA5BD,SAAC,GAAD,IAAGjG,EAAH,EAAGA,UAAWkG,EAAd,EAAcA,KAASpL,EAAvB,oCACZkF,EACImG,KAASC,aACP,kBAAC,IAAMC,SAAP,KACE,kBAACC,GAAD,MAEA,kBAACC,GAAD,CACEta,UAAU,gBACVua,cAAA,EACAC,eAAA,EACAC,UAAW,EACXC,KAAK,UAGL,kBAACC,GAAD,CAAW3a,UAAU,SACrB,kBAAC4a,GAAD,CACEjb,QAASsa,GACV,kBAACY,GAAD,OACC,yBAAK7a,UAAU,iBAEd6O,EAAKzF,YAIZ0R,SAASrX,MAEX,MAIA4W,GAAenf,IAAOC,IAAV,MAWZmf,GAAepf,IAAOC,IAAV,MAYZwf,GAAYzf,IAAOC,IAAV,MAcTyf,GAAc1f,IAAOsK,OAAV,MAkBXqV,GAAQ3f,IAAOC,IAAV,M,unBC9EX,IA2De4f,GA3DQ,SAAC3f,GAEpB,IAAMmR,EAAUC,uBAER1V,EAAWmP,uBAAY,SAAAxM,GAAK,OAAIA,EAAM3C,UAAtCA,OAER2P,qBAAU,WACN3N,QAAQC,IAAI,gBAAiBjC,EAAOsB,YACrC,CAACtB,IAR0B,I1CKJkkB,EAAQxd,E0CLJ,EAUwGpC,EAAM2O,QAApIxP,EAVsB,EAUtBA,GAAI0P,EAVkB,EAUlBA,kBAAmB9J,EAVD,EAUCA,aAAc6J,EAVf,EAUeA,0BAA2BiR,EAV1C,EAU0CA,yBAA0B7a,EAVpE,EAUoEA,cAAe8J,EAVnF,EAUmFA,iBACjH,OACI,oCACI,kBAACgR,GAAD,KACI,yBAAKtN,IAAI,kBAAkBjP,MAAO,CAACoP,SAAU,WAAY/R,MAAO,IAAKmf,IAAK,EAAGlN,MAAO,EAAGQ,QAAS,GAAKD,OAAQ,KAC7G,kBAAC,GAAD,CAAc7P,MAAO,CAAC+O,UAAW,KAC3BzD,GACE,yBAAK2D,IAAK3D,EAAkB9G,OAGpC,kBAACiY,GAAD,KACI,kBAACxT,GAAD,CAAUjJ,MAAO,CAAC0c,KAAM,IAAKlb,GAC7B,kBAAC4H,GAAD,CAAUpJ,MAAO,CAAC0c,KAAM,IAAKrR,GAC7B,kBAAC/B,GAAD,CAAWtJ,MAAO,CAAC0c,KAAM,K1ClBP7d,E0CkBuD,K1ClB/Dwd,E0CkBqCC,G1CjBnDzd,OAASA,EAASwd,EAAOM,UAAU,EAAG9d,EAAS,GAAM,QAAUwd,EAAS,K0CkBpE,kBAAC,GAAD,CAAYrb,QAAS,kBAAMvE,EAAMmgB,YAAYhhB,KAA7C,eAEA,kBAACihB,GAAD,KACCtR,EAAmB,GAChB,yBAAKvL,MAAO,CAACE,QAAS,OAAQC,cAAe,MAAOE,WAAY,WAAYyP,QAAS,KACrF,kBAAC1G,GAAD,yBACA,kBAACH,GAAD,SAAmBxH,EAAeE,QAAQ,KAG9C,yBAAK3B,MAAO,CAACE,QAAS,OAAQC,cAAe,MAAOE,WAAY,aAChE,kBAAC+I,GAAD,KAAWmC,EAAmB,EAAI,cAAgB,UAClD,kBAACtC,GAAD,UAAmBxH,EAAiBA,EAAgB8J,EAAmB,KAAM5J,QAAQ,MAGrF,kBAAC3D,GAAD,KACI,kBAAC,GAAD,CAAYoN,QAAS3O,EAAM2O,QAAS0R,SAAS,QAC1C3kB,EAAOsB,SAASoF,OAAS,GACxB,kBAAC,GAAD,CAAgBuI,UAAQ,EAACN,OAAK,EAAC8D,KAAK,cAAc3D,KAAG,EACjDuD,YAAa,kBAAMoD,EAAQW,KAAK,aAEhC,kBAAC,UAAD,OAGR,kBAAC,GAAD,CAAgB3D,KAAK,YAAY3D,KAAG,EAChCuD,YAAa,kBAAM/N,EAAMmgB,YAAYhhB,KAErC,kBAAC,UAAD,YAWtB2gB,GAAchgB,IAAOC,IAAV,MAMXigB,GAAclgB,IAAOC,IAAV,MAWXqgB,GAAetgB,IAAOC,IAAV,M,0cCvFlB,IA8BMugB,GAAaxgB,IAAOC,IAAV,MASVwgB,GAAazgB,IAAO0gB,GAAV,MAMVC,GAAiB3gB,IAAO4gB,GAAV,MAML3e,GAnDA,WACX,OACI,oCACA,kBAACzB,GAAD,CAASE,OAAQ,KACb,yBAAKgS,IAAI,aAAaC,IAAI,QAAQlP,MAAO,CAACod,MAAO,QAAS/f,MAAO,QAASsU,UAAW,4BACrF,kBAACoL,GAAD,KACI,kBAACC,GAAD,KACI,kBAACE,GAAD,eAGA,kBAACA,GAAD,gBAIJ,kBAACF,GAAD,KACA,kBAACE,GAAD,eAGI,kBAACA,GAAD,oBCUL3f,GAvBF,SAAAd,GAET,IACQwR,EADQJ,wBACajR,SAArBqR,SACA4H,EAAaD,KAAbC,SAGR,OAFA1b,QAAQC,IAAI,WAAY6T,GAGpB,kBAAClR,GAAD,CAASZ,MAAI,EAACc,OAAQR,EAAMe,SAAW,IAAM,IAAM,KAC9CV,GAAmBiC,KAAI,SAACK,EAAGpJ,GAAJ,OACxB,kBAAC,GAAD,QAAYoJ,EAAZ,CAAe7H,IAAKvB,QAEhB,yBAAKiZ,IAAI,aAAaC,IAAI,QAAQlP,MAAO,CAACod,MAAO,QAAS/f,MAAO,QAASsU,UAAW,yBAA0B9B,OAAQ,OAC3H,kBAACvT,GAAD,KACI,kBAACwM,GAAD,CAAe9I,MAAO,CAAC2M,SAAU,IAAKgF,UAAW,sBAAjD,kDAIJ,yBAAK1C,IAAI,oBAAoBC,IAAI,WAAWlP,MAAO,CAACoP,SAAU,WAAYoN,IAAK,GAAIa,KAAMxH,EAAW,IAAM,EAAI,IAAK1G,UAAW,IAAKU,OAAQ,Y,ylBCnBvJ,IAgEeyN,GAhEO,SAAA7gB,GAAS,MAEWoD,mBAAS,IAFpB,WAEnB0d,EAFmB,KAEPC,EAFO,OAGK3d,oBAAS,GAHd,WAGnBiK,EAHmB,KAGVmB,EAHU,KAIrBhF,EAAW4B,wBACX+F,EAAUC,uBAEhB1T,QAAQC,IAAI,oBAAqBwT,GAEjC,IAAM6P,EAAe,SAAChkB,GAClB,IASMikB,EATO,IAAIC,KAAKlkB,EAAU,CAC5B0K,KAAM,CACF,eACA,2BACA,6BAEJyZ,cAAc,IAEEC,OAAON,EAAWO,MACdtiB,QAAO,SAAA2Q,GAAE,OAAIA,EAAG4R,MAAQ,MAC9Chf,KAAI,SAAA/I,GAAC,OAAIA,EAAEyF,QAEb,OADAtB,QAAQC,IAAI,aAAcsjB,GACnBA,GAGX5V,qBAAU,WAEN3N,QAAQC,IAAI,eAAgBmjB,KAC7B,CAACA,IAEJ,IAAMS,EAAO,+BAAG,8BAAA7e,EAAA,yDACRoe,EAAWO,KADH,wDAEZ7S,GAAW,GAEX9Q,QAAQC,IAAI,4BAA6BmjB,GAJ7B,SAKS9W,GAAW,YAAa,WAAOyB,EAAW,UALnD,OAKRzO,EALQ,OAONikB,EAAWD,EAAahkB,GAC9BU,QAAQC,IAAI,qBAAsBsjB,GAElCzX,EAAS,CAACpM,KAAM,gBAAiBmB,QAAS0iB,IAE1CF,EAAc,IACdvS,GAAW,GACX2C,EAAQW,KAAK,mBAdD,4CAAH,qDAiBb,OACM,kBAAC,GAAD,CACE5Q,GAAIlB,EAAMkB,GACVV,OAAQ,IACRkV,KAAK,OACLZ,OAAO,EACPzH,QAASA,EACT6M,YAAY,eACZyE,QAAQ,SACRD,YAAaoC,EAAWO,KACxBlM,MAAM,kDACNK,aAAc,SAAC5D,GAAOmP,EAAc,SAAID,GAAL,UAAkB,OAASlP,EAAEwC,OAAO5Z,UACvEikB,aAAc,kBAAM8C,QCpBjBC,GAxCK,SAACxhB,GAAU,IAEvBlB,EAAe+L,uBAAY,SAACxM,GAAD,OAAWA,EAAMS,YAAc,MAA1DA,WAMJ,OALJuM,qBAAU,WAEN3N,QAAQC,IAAI,YAAamB,KAC1B,CAACA,IAGI,oCACMkB,EAAMe,SAAW,IACnB,oCACJ,kBAACT,GAAD,CAASE,OAAQ,KACb,kBAAC2L,GAAD,CAAgB1L,OAAK,GAArB,cACI,yBACI+R,IAAI,aACJC,IAAI,QACJlP,MAAO,CAACod,MAAO,QAAS/f,MAAO,QAASsU,UAAW,yBAA0B9B,OAAQ,QAE7F,kBAACpS,GAAD,CAAYC,GAAI,UAERnC,GAAcA,EAAWwD,KAAI,SAACoN,EAAInW,GAAL,OACzB,kBAAC,GAAD,CAAUuB,IAAKvB,EAAGO,KAAM4V,EAAGiB,cAAeiG,MAAOlH,EAAG+R,eAAeC,QAAQC,UAAU5Z,IAAK5I,GAAIuQ,EAAGzQ,WAM7G,kBAAC+B,GAAD,CAAWE,IAAE,EAACD,GAAI,UAEVnC,GAAcA,EAAWwD,KAAI,SAACoN,EAAInW,GAAL,OACzB,kBAAC,GAAD,CAAUwH,SAAUf,EAAMe,SAAUjG,IAAKvB,EAAGO,KAAM4V,EAAGiB,cAAeiG,MAAOlH,EAAG+R,eAAeC,QAAQC,UAAU5Z,IAAK5I,GAAIuQ,EAAGzQ,Y,+NCXpI2iB,OArBf,YAAyD,IAAtBC,EAAsB,EAAjCC,UAAyBrO,EAAQ,sBAE/C+E,EAAoBD,KAApBC,gBAGR,OADA9a,QAAQC,IAAI,a,mWAAZ,IAA8B8V,IAE5B,kBAAC,QAAD,MAAOsO,OAAK,GAAKtO,EAAjB,CACCuO,OAAQ,SAAChiB,GAAD,OACNwY,EAIC,kBAAC,WAAD,CACEnT,GAAI,CACFmM,SAAU,gBACVnT,MAAO,CAAE4jB,KAAMjiB,EAAMG,aAL3B,kBAAC0hB,EAAc7hB,Q,wsBCZd,IAAMkiB,GAAapiB,IAAOC,IAAV,MASjB,SAAAC,GAAK,OAAIA,EAAMO,QAAUL,cAAhB,SAKFsB,GAAU1B,IAAOC,IAAV,KAGIM,IAClB,SAAAL,GAAK,OAAIA,EAAMiB,IAAMf,cAAZ,KACUF,EAAMiB,OAGlBkhB,GAAgBriB,IAAOC,IAAV,M,m5CCvB1B,IAAMqiB,GAAStiB,IAAOC,IAAV,MAWN,SAAAC,GAAK,OAAIA,EAAMe,SAAY,KAAOb,cAAzB,SAIT,SAAAF,GAAK,MAAI,mBAAmBI,KAAKJ,EAAMG,WAAaD,cAA3C,KACaG,MAEtB,SAAAL,GAAK,MAAI,WAAWI,KAAKJ,EAAMG,WAAaD,cAAnC,SAMFmiB,GAAUviB,IAAO0gB,GAAV,MAOd,SAAAxgB,GAAK,OAAIA,EAAMe,SAAY,KAAOb,cAAzB,SAML,SAAAF,GAAK,OAAIA,EAAMe,SAAY,KAAOb,cAAzB,SAKT,SAAAF,GAAK,OAAIA,EAAMe,SAAY,KAAOb,cAAzB,QAMFG,GAQF+hB,M,0JCzDR,IAAM1gB,GAAO5B,IAAOC,IAAV,M,q1BCkBjB,IAqJeuiB,GArJA,SAACtiB,GACd,IAAMwJ,EAAW4B,wBACX+F,EAAUC,wBACRoH,EAAoBD,KAApBC,gBAGAY,EAAaD,KAAbC,SAIR1b,QAAQC,IAAR,UAAeF,8DAAf,cAVwB,MAWQ2F,oBAAS,GAXjB,WAWPmf,GAXO,WAaxBlX,qBAAU,WACRkX,EAAY/J,GACZ9a,QAAQC,IAAI,gBAAiB6a,KAC5B,CAACA,IAEJnN,qBAAU,WACR3N,QAAQC,IAAI,YAAayb,KACxB,CAACA,IAGJ/N,qBAAU,WACR,GAAI5N,QAAQuR,QAAS,CACnB,IAAMC,EAAgBpJ,aAAaC,QAAQ,aACvCmJ,GAEFzF,EAAS,CACPpM,KAAM,qBACNmB,QAASkH,KAAKD,MAAMyJ,KAM1B,cAAC,4BAAAvM,EAAA,0DACK5D,IAAcA,EAAWsD,OAD9B,iEAE2B4H,GAAW,cAAe,WAAOyB,EAAW,UAFvE,OAEO+W,EAFP,OAGChZ,EAAS,CAAEpM,KAAM,mBAAoBmB,QAASikB,IAC9C9kB,QAAQC,IAAI,kBAAmB6kB,GAJhC,0CAAD,KAMC,IA1CqB,IA4ChB9mB,EAAWmP,uBAAY,SAACxM,GAAD,OAAWA,EAAM3C,UAAxCA,OACAgD,EAAamM,uBAAY,SAACxM,GAAD,OAAWA,EAAMe,MAA1CV,SACAI,EAAe+L,uBAAY,SAACxM,GAAD,OAAWA,EAAMS,YAAc,MAA1DA,WACArD,EAASoP,uBAAY,qBAAEpP,QAAvBA,KA/CgB,EAgDF2H,mBAAS,GAhDP,WAgDjBtI,EAhDiB,UAkDxB4C,QAAQC,IAAI,QAASjC,EAAQD,GAlDL,MAoDc2H,mBAAS,GApDvB,WAoDjBqf,EApDiB,KAoDJC,EApDI,KAqExB,OAdArX,qBAAU,WACR,IAAIsX,EAAUjnB,EAAOsB,SAErB,GADAU,QAAQC,IAAI,oBAAqBglB,GAC7BA,EAAQvgB,OAAS,EAAG,CACtB,IACMQ,EADS+f,EAAQrgB,KAAI,SAACtD,GAAD,OAAUA,EAAKuD,eACfE,QAAO,SAACC,EAAGC,GAAJ,OAAUD,EAAIC,KAChD+f,EAAe9f,EAAYsC,QAAQ,IACnCxH,QAAQC,IAAI,QAASiF,QAErB8f,EAAe,GAEjBhlB,QAAQC,IAAI,kBAAmBjC,EAAOsB,YACrC,CAACtB,IAGF,kBAACmE,GAAD,CAAWI,KAAK,EAAME,SAAUgR,EAAQhR,SAASqR,SAAU1W,IAAKA,GAC9D,kBAAC,GAAD,CAAQqF,SAAUgR,GAAWA,EAAQhR,SAASqR,UAC5C,kBAAC,GAAD,CAAUnM,GAAG,KACX,kBAAC,GAAD,KAAO,yBAAKmN,IAAI,gBAAgBjP,MAAO,CAAE3C,MAAO,GAAIwE,QAAS,GAAImM,YAAa,QAGhF,kBAAC8Q,GAAD,CAASthB,SAAUqY,GACjB,wBAAIxU,UAAU,QACZ,kBAAC,GAAD,CAAUS,GAAG,KAAb,UAIF,wBAAIT,UAAU,QACZ,kBAAC,GAAD,CAAUS,GAAG,YAAb,YAEF,wBAAIT,UAAU,QACZ,kBAAC,GAAD,CACES,GAAG,YACHyL,UAAQ,EACRN,SAAU1R,EACViS,UAAU,aACVtN,SAAS,GALX,eAWF,wBAAImB,UAAU,SAA4B,IAApB4T,EAA4B,kBAAC,GAAD,CAAUnT,GAAG,iBAAb,WAChD,4BAAQ9B,MAAO,CAAEqf,gBAAiB,2BAA4BC,OAAQ,OAAQvR,WAAY,QACxF/M,QAAS,WACP4M,EAAQW,KAAK,iBACboG,GAAOhO,OAAOV,KAHlB,aAMF,wBAAI5E,UAAU,QACZ,kBAAC,GAAD,CAAgB8F,SAAO,EAACpG,KAAG,EAAC6J,KAAK,cAAcd,QAAQ,QAAQU,YAAa,kBAAMoD,EAAQW,KAAK,iCAC7F,kBAAC,QAAD,QAGJ,4BACE,kBAAC,GAAD,CAAUzM,GAAG,WAEX,0BAAM9B,MAAO,CAAE0K,MAAO,OAAQiF,SAAU,KAAxC,IACUxX,GAAU+mB,GAEpB,yBAAKlf,MAAO,CAAE0P,WAAY,GAAIxP,QAAS,SACrC,kBAAC,gBAAD,CAAcwK,MAAO5N,EAA8Bd,KAAM,KAEvD7D,EAAOsB,SAASoF,OAAS,GACzB,kBAAC0gB,GAAD,KACGpnB,EAAOsB,SAASoF,WAM3B,wBAAIwC,UAAU,aACZ,uBAAGmN,KAAK,KACN,kBAAC,KAAD,CACEgR,UAAWC,KACXC,aAA0B,IAAbvkB,EAAqB,OAAS,UAC3CwkB,WAAwB,IAAbxkB,EAAqB,OAAS,UACzCa,KAAM,GACN4jB,aAAc,CAAE5R,aAAc,GAAI/N,QAAS,IAC3Ce,QAAS,WACPiF,EAAS,CAAEpM,MAAmB,IAAbsB,EAAoB,YAAc,uBAmC/DokB,IAnBehjB,IAAOC,IAAV,KAGIM,GAONP,IAAOC,IAAV,KAGSM,GAMEP,IAAOC,IAAV,KAEGM,IClLT+iB,GAVI,SAACpjB,GAChB,OACI,oCACA,kBAAC,GAAD,MACA,kBAAC,GAAD,MACKA,EAAMgO,W,ghBCFnB,IAaeqV,GAbE,SAAC,GAA2B,IAAfxB,EAAe,EAA1BC,UACf,gJAEQ,OACI,kBAAC,IAAM9C,SAAP,KACI,kBAAC,GAAS1iB,KAAK0D,OACf,kBAAC6hB,EAAcvlB,KAAK0D,YALpC,GAA8BsjB,IAAMzB,YCoIzBwB,MAAS,CAACvB,UA9HV,SAAC9hB,GAAU,IAEdtE,EAAWmP,uBAAY,SAAAxM,GAAK,OAAIA,EAAM3C,UAAtCA,OACA0d,EAAaD,KAAbC,SAEFjI,EAAUC,wBALM,EAOUhO,mBAAS,GAPnB,WAOdpF,EAPc,KAOLulB,EAPK,OAQMngB,mBAAS,GARf,WAQdrF,EARc,KAQPylB,EARO,KAWtBnY,qBAAU,WACF3N,QAAQC,IAAI,iBAAkBjC,EAAOsC,SACrCulB,EAAW7nB,EAAOsC,SAAW,GACjCwlB,EAASlI,GAAgB5f,EAAOsB,SAAUgB,MAC3C,CAACtC,IAEJ2P,qBAAU,WACNmY,EAASlI,GAAgB5f,EAAOsB,SAAUgB,MAC3C,CAACA,IAEJN,QAAQC,IAAI,eAAgBjC,GAU5B,OACI,oCACA,kBAAC4E,GAAD,CAASG,OAAK,EAACwN,MAAO,QAASzN,OAAQ,IAAME,OAAQ0Y,EAAW,KAC5D,kBAACzY,GAAD,KACI,kBAAC6L,GAAD,oBACA,kBAAC2V,GAAD,KACA,kBAACD,GAAD,KACM9I,EAAW,KACb,oCACA,kBAAC3M,GAAD,CAAUlJ,MAAO,CAAC0c,KAAM,IAAxB,WACI,kBAACxT,GAAD,CAAUlJ,MAAO,CAAC0c,KAAM,IAAxB,SACJ,kBAACxT,GAAD,CAAUlJ,MAAO,CAAC0c,KAAM,IAAxB,YACA,kBAACxT,GAAD,CAAUlJ,MAAO,CAAC0c,KAAM,IAAxB,WAIA,kBAAC,GAAD,MACJ,kBAACiC,GAAD,MAEKxmB,EAAOsB,SAASoF,OAAS,EAAK1G,EAAOsB,SAASsF,KAAI,SAAAoN,GAAE,OAEjD,kBAACwS,GAAD,CAAYpnB,IAAK4U,EAAGzQ,KAChB,kBAAC,GAAD,CAAcqF,KAAG,EAACf,MAAO,CAAC0c,KAAM,EAAG1O,YAAa6H,EAAW,IAAM,GAAK,KAClE,yBAAK5G,IAAK9C,EAAGb,kBACbtL,MAAO,CAACE,QAAS,QAASiP,UAAW,OAAQxC,SAAU,OAAQtP,MAAO,OAAQJ,OAAQ,WAGzF4Y,EAAW,KACR,yBAAK7V,MAAO,CAAC0c,KAAM,EAAGwD,aAAc,KAC/B/T,EAAG3K,aADR,IACsB,6BACjB2K,EAAGM,qBAGZ,yBAAKzM,MAAO,CAAC0c,KAAM,EAAG7a,OAAQ,IAA9B,IACYsK,EAAG1K,eAEf,yBAAKzB,MAAO,CAAC0c,KAAM,GAAI1O,YAAa6H,EAAW,IAAM,GAAK,GAAI3V,QAAS,OAAQE,eAAgB,eAAgBC,WAAY,WACtHwV,EAAW,KACR,kBAAC,GAAD,CAAWzK,QAASe,EAAI2Q,SAAS,SAASpQ,MAAM,GAC5C,kBAAC,eAAD,CAAahC,MAAM,OAAO1O,KAAM,MAGvCmQ,EAAGzK,YAEHmU,EAAW,KACR,kBAAC,GAAD,CAAWzK,QAASe,EAAI2Q,SAAS,MAAMpQ,MAAM,GACzC,kBAAC,cAAD,CAAYhC,MAAM,aAAa1O,KAAM,OAIjD,yBAAKgE,MAAO,CAAC0c,KAAM,EAAG1O,YAAa6H,EAAW,IAAM,GAAI,GAAI3V,QAAS,OAAQG,WAAY,SAAUD,eAAgB,iBAAnH,IACW+L,EAAGnN,YAAY2C,QAAQ,QAIrC,kBAACuH,GAAD,kDACL,kBAACyV,GAAD,KACI,kBAAC,GAAD,OAEJ,kBAACA,GAAD,CAAY3hB,QAAM,GAAlB,aACyBvC,EAAQkH,QAAQ,IAEzC,kBAACgd,GAAD,CAAY3hB,QAAM,GAAlB,iBAC4B,GAAK2E,QAAQ,IAEzC,kBAACgd,GAAD,CAAY3hB,QAAM,GACd,kBAACkM,GAAD,gBACmB1O,EAAMmH,QAAQ,KAGrC,kBAACgd,GAAD,KACK9I,EAAW,KACR,kBAAC,GAAD,CAAgBjL,KAAK,OAAO3D,KAAG,EAACnG,WAAS,EACrC0J,YAAa,WAhFrCoD,EAAQyJ,UAkFYrX,MAAO,CAACgO,YAAa,SAEjB,kBAAC,aAAD,OAGJ,kBAAC,GAAD,CAAgBpD,KAAK,kBAAkB3D,KAAG,EACtCuD,YAAa,kBArFvBhG,EAqFsC,iBApFpDoJ,EAAQW,KAAK/J,GADA,IAACA,GAuFMxE,MAAO,CAACgO,YAAa,OAEjB,kBAAC,cAAD,eC/HjB,SAASmS,KAAc,IAC5BlS,EAAaH,wBAAbG,SAMR,OAJAnG,qBAAU,WACR0M,OAAOC,SAAS,EAAG,KAClB,CAACxG,IAEG,K,qkBCDT,IAyFemS,GAzFE,SAAC3jB,GAEd,IAAMwJ,EAAW4B,wBACX+F,EAAUC,wBAEhB/F,qBAAU,WACN,IACMuY,EADQ,IAAIC,gBAAgB7jB,EAAMG,SAASihB,QACpBhnB,IAAI,YACjC0pB,EAAc,CAAC1mB,KAAM,eAAgBoQ,UAAW,WAAYC,WAAYmW,MACzE,CAAC5jB,EAAMG,SAASihB,SAEnB,IAyBMtjB,EAAe,CACjBuP,SAAS,EACTC,SAAU,GACVJ,eAAe,EACfK,OAAQ,CACJ3D,SAAUA,EACVgE,WAAY,GACZF,SAAU,GACV+J,sBAAuB,GACvB9J,SAAU,KA7CM,EAiDc1C,sBAtCjB,SAAC5M,EAAOC,GACzB,OAAOA,EAAOlB,MACV,IAAK,eACJ,gBACOiB,GADP,IAEIkP,OAAQ,SACDlP,EAAMkP,QADP,UAEEjP,EAAOkP,UAAalP,EAAOmP,eAGxC,IAAK,aACD,gBACOpP,GADP,IAEIgP,SAAS,IAEjB,IAAK,YACD,gBACOhP,GADP,IAEIgP,SAAS,IAEjB,QACI,OAAOhP,KAiB4CP,GAjDvC,WAiDhBmb,EAjDgB,KAiDJ6K,EAjDI,KAkDMzW,GAAoF4L,EAA1G/L,cAA0G+L,EAA3F9L,MAA2F8L,EAApF5L,SAlDN,EAkD0F4L,EAA3E1L,OAA2B3D,GAlD1C,EAkDyB5N,MAlDzB,EAkDgC0R,SAlDhC,EAkD0C9D,UAlD1C,KAkDoD+D,SAlDpD,EAkD8D8J,sBAElCuB,GAAe,CAACxP,WAAUyP,gBAAtEhB,EApDgB,EAoDhBA,kBAaFG,GAjEkB,EAoDG9K,SApDH,EAoDa4L,WAapB,+BAAG,WAAOtH,GAAP,SAAAlP,EAAA,6DAChBkP,EAAEC,iBACFiS,EAAc,CAAC1mB,KAAM,eAFL,SAGX6a,EAAkBgB,EAAW1L,OAAQ/D,GAH1B,OAIhBsa,EAAc,CAAC1mB,KAAM,cACrB+T,EAAQW,KAAK,WALG,2CAAH,uDASjB,OACI,oCACA,kBAACjS,GAAD,KACI,kBAAC,GAAD,CACAzC,KAAK,aACLoL,KAAMyQ,EAAW1L,OACjBiI,aAzBa,SAAC5D,GAAM,MACeA,EAAEwC,OAAjCta,EADgB,EAChBA,KAAMU,EADU,EACVA,MAAO4C,EADG,EACHA,KAAM+Y,EADH,EACGA,QACd,aAAT/Y,GAIA0mB,EAAc,CAAC1mB,KAAM,eAAgBoQ,UAAW1T,EAAM2T,WAAYjT,IAClEkD,QAAQC,IAAI,eAAgBsb,EAAW1L,OAAOvR,QAJ9C8nB,EAAc,CAAC1mB,KAAM,eAAgBoQ,UAAW1T,EAAM2T,WAAY0I,KAuBlEiC,YAAaA,EACb/K,QAASA,EAAU,OAAI5B,O,grBC3EpB,SAASsY,GAAS/jB,GAC/B,IAAIgkB,EAAUC,EACRjnB,EAAW6N,uBAAY,SAACxM,GAAD,OAAWA,EAAMrB,YACtCoc,EAAaD,KAAbC,SACR1b,QAAQC,IAAI,YAAaX,GAErBA,EAASA,WACVgnB,EAAWhnB,EAASA,SAAS+B,QAC5B,SAAC2Q,GAAD,OAAgC,IAAxBA,EAAG2C,oBAGd4R,EAAUjnB,aAAH,EAAGA,EAAUA,SAAS2O,MAAK,SAACjJ,EAAGC,GAAJ,OACjCD,EAAEwhB,sBAAwBvhB,EAAEuhB,sBAAwB,GAAK,MAI3D,IAAM1a,EAAW4B,wBACX+F,EAAUC,uBAjBsB,EAmBRsH,GAAS,CAACG,kBAAiB7b,aAAjD2b,EAnB8B,EAmB9BA,UAAWI,EAnBmB,EAmBnBA,OAnBmB,EAoBQ3V,mBAAS,IApBjB,WAoB/ByV,EApB+B,KAoBdC,EApBc,OAqBA1V,mBAAS,IArBT,WAqB/BkL,EArB+B,KAqBlBC,EArBkB,OAsBFnL,mBAA4B,QAAnB+N,EAAQ7S,QAtBf,WAsB9Bqd,EAtB8B,KAsBnBC,EAtBmB,OA4BHxY,mBAAS,CAAC,MAAS,KA5BhB,WA4B/B+gB,EA5B+B,KA4BpBC,EA5BoB,KA8BtC/Y,qBAAU,WAER,GADA3N,QAAQC,IAAI,SAPCF,mCAOiB0T,GAC1B1T,QAAQuR,QAAS,CACnB,IAAMC,EAAgBpJ,aAAaC,QAAQ,aACvCmJ,IACFV,EAAe9I,KAAKD,MAAMyJ,IAC1BzF,EAAS,CACPpM,KAAM,qBACNmB,QAASkH,KAAKD,MAAMyJ,MAItBjS,EAASA,SAASoF,QAA6B,SAAnB+O,EAAQ7S,OACtCsd,GAAa,GAGfyI,MACC,CAAC,CAAElT,EAAQ7S,SAEd,IAAM+lB,EAAQ,+BAAG,4BAAA3hB,EAAA,6DACfkZ,GAAa,GADE,SAEG5R,GAAW,YAAa,WAAOyB,EAAW,UAF7C,QAETxB,EAFS,UAIbT,EAAS,CAAEpM,KAAM,iBAAkBmB,QAAS0L,IAC5C2R,GAAa,IAEfle,QAAQC,IAAI,kBAAmBsM,GAE/BvM,QAAQC,IAAI,cAAeqC,GATZ,2CAAH,qDAYdqL,qBAAU,WACR3N,QAAQC,IAAI,eAAgB2Q,KAC3B,CAACA,IAEJ,IAAMP,EAAc,SAAC5O,GACnBzB,QAAQC,IAAI,SACZ,IAAMyY,EAAWpZ,EAASA,SAAS+B,QAAO,SAAC4P,GAAD,OAAaA,EAAQxP,KAAOA,KACtE2Z,EAAmB1C,EAAS,IAC5B1Y,QAAQC,IAAI,WAAYkb,GACxBE,KAOF,OACE,oCAEE4C,EAAY,kBAAC,GAAD,MAEd,oCACE,kBAAC,GAAD,CAAM5a,SAAUqY,EAAUlY,GAAIkY,EAAW,KACvC,yBACE5G,IAAI,aACJC,IAAI,QACJlP,MAAO,CACLod,MAAO,QACP/f,MAAO,QACPsU,UAAW,uBAGbkE,EAAW,KACX,yBACE5G,IAAI,gBACJC,IAAI,cACJlP,MAAO,CACLod,MAAO,OACP/f,MAAO,QACPsU,UAAW,uBAIhBkE,EAAW,IACZ,oCACE,yBACExU,UAAU,WACV4N,IAAI,aACJC,IAAI,mBACJlP,MAAO,CACLoP,SAAU,WACV/R,MAAO,QACPsU,UAAW,qBACX6K,IAAK,OAIV1f,GAAiBiC,KAAI,SAACK,EAAGpJ,GAAJ,OACpB,kBAAC,GAAD,QAAYoJ,EAAZ,CAAe7H,IAAKvB,QAEtB,yBACEgK,MAAO,CAAEwc,IAAK,IAAKa,KAAM,QAAShgB,MAAO,IAAK+R,SAAU,aAExD,kBAACtG,GAAD,sDAGA,kBAACC,GAAD,2CACA,kBAAC,GAAD,CAAU5B,SAAO,EAACJ,KAAG,EAAC/G,MAAO,CAAC0P,WAAY,OAAQX,UAAW,SAC3D,yBAAK1N,UAAU,eAAf,iBAOJ,oCACE,yBACEA,UAAU,WACV4N,IAAI,oBACJC,IAAI,mBACJlP,MAAO,CACLoP,SAAU,WACVzC,SAAU,QACVgF,UAAW,qBACX6K,IAAK,IACLa,KAAM,QAMd,kBAAC/gB,GAAD,KACGuZ,EAAW,KACZ,kBAACkL,GAAD,KACGjkB,GAAiBiC,KAAI,SAACK,EAAGpJ,GAAJ,OACpB,kBAAC,GAAD,QAAYoJ,EAAZ,CAAe7H,IAAKvB,SAIxB,kBAAC,GAAD,CAAe2H,GAAIkY,EAAW,MAC9B,kBAACjN,GAAD,0BACA,kBAAC,GAAD,CAAeqH,QAAS,EAAGhL,KAAMwb,EAAUjW,YAAaA,IACxD,kBAAC,GAAD,CAAahN,SAAUqY,IACvB,kBAACjN,GAAD,8BACA,kBAAC,GAAD,CAAeqH,QAAS,EAAGhL,KAAMyb,EAASlW,YAAaA,KAEzD,yBAAKxK,MAAO,CAAE+O,UAAW,WACzB,kBAAC,GAAD,CACEoD,KAAK,OACLlV,OAAQ,IACRsU,OAAO,EACPzH,SAAS,EACTsR,QAAQ,YACRzE,YAAY,qBACZ/E,MAAM,mDACNK,aAAc,SAAC5D,GAAOwS,EAAa,SAAID,GAAL,UAAiB,QAAUvS,EAAEwC,OAAO5Z,UACtEikB,aAAc,WAAQ/gB,QAAQC,IAAI,eAAgBwmB,OAGpD,kBAAC,GAAD,CAAQ3jB,OAAQ,MAChB,kBAAC,GAAD,CAAOmY,UAAWA,EAAWkG,KAAM9F,GACjC,kBAAC,GAAD,CAAgBpK,QAASkK,EAAiBsH,YA7G5B,SAAChhB,GACnBgS,EAAQW,KAAR,mBAAyB3S,UAoH7B,IAAMmlB,GAAUxkB,IAAOC,IAAV,MC3HEsjB,MAAS,CAAEvB,UAzEH,SAAC9hB,GAAU,IAGlBf,EAEVe,EAHFyR,MACEhK,OAAUxI,IAIRuK,EAAW4B,wBACX+F,EAAUC,uBAEVpU,EAAW6N,uBAAY,SAAAxM,GAAK,OAAIA,EAAMrB,YAVZ,EAWgBoG,mBAAS,IAXzB,WAWzBmhB,EAXyB,KAWPC,EAXO,OAY4B9L,GAAS,CAAC1b,aAA9D2b,EAZwB,EAYxBA,UAAWI,EAZa,EAYbA,OAAQhL,EAZK,EAYLA,YAAa8K,EAZR,EAYQA,gBAZR,EAaIzV,mBAA4B,QAAnB+N,EAAQ7S,QAbrB,WAaxBqd,EAbwB,KAabC,EAba,KAehCvQ,qBAAU,WACR,cAAC,sBAAA3I,EAAA,sEACS2hB,IADT,OAEGI,IACH7I,GAAa,GAHb,0CAAD,GAKAle,QAAQC,IAAI,kBAAmBX,KAC9B,CAACA,EAAUiC,EAAKkS,EAAQ7S,SAG3B,IAAM6hB,EAAc,SAAChhB,GACnBgS,EAAQW,KAAR,mBAAyB3S,KAGrBklB,EAAQ,+BAAG,4BAAA3hB,EAAA,2DACX1F,EAASA,SAASoF,OAAS,GADhB,iEAEI4H,GAAA,YAAwB,WAAOyB,EAAW,UAF9C,OAETjD,EAFS,OAGfgB,EAAS,CAAEpM,KAAM,iBAAkBmB,QAASiK,IAH7B,2CAAH,qDAMRic,EAAqB,WACzB,IAAMxD,EAAWjkB,EAASA,SAAS+B,QAAO,SAAA4P,GAAO,OAAIA,EAAQ7P,WAAW,GAAGG,MAAQA,KACnFulB,EAAoBvD,GACpBvjB,QAAQC,IAAI,YAAasjB,EAAUhiB,IA0BvC,OACE,oCAEC0c,EAPC,kBAAC,GAAD,MAjBA,oCACE,kBAAC9b,GAAD,KAEI0kB,GACA,kBAAC,GAAD,CAAe/Q,QAAS,EAAGhL,KAAM+b,EAAkBxW,YAAaA,KAGpE,kBAAC,GAAD,MACA,kBAAC,GAAD,CAAO4K,UAAWA,EAAWkG,KAAM9F,GACjC,kBAAC,GAAD,CAAgBpK,QAASkK,EAAiBsH,YAAaA,U,uvBClD/D,IA6GeuE,GA7GM,WAAM,IACfhpB,EAAWmP,uBAAY,SAAAxM,GAAK,OAAIA,EAAM3C,UAAtCA,OADe,EAEK0H,mBAAS,GAFd,WAEfrF,EAFe,KAERylB,EAFQ,OAGSpgB,mBAAS,GAHlB,WAGfpF,EAHe,KAGNulB,EAHM,OASWtY,qBAAWgC,GAJxB,CACjBG,KAAM,IANa,WAShBsK,EATgB,UAWvBrM,qBAAU,WACFiQ,GAAgB5f,EAAOsB,UAAY,IAAMtB,EAAOsC,QAAU,GAC1DN,QAAQC,IAAI,kBAAmBjC,EAAOsC,SACtCulB,EAAW7nB,EAAOsC,SAAW,IAE7BulB,EAAW,GAEfC,EAASlI,GAAgB5f,EAAOsB,SAAUgB,MAC3C,CAACtC,IAEJ2P,qBAAU,WACNmY,EAASlI,GAAgB5f,EAAOsB,SAAUgB,MAC3C,CAACA,IASJ,OACI,oCACI,yBAAKwU,IAAI,kBAAkBjP,MAAO,CAAEoP,SAAU,WAAYE,MAAO,EAAGkN,IAAK,EAAGnf,MAAO,IAAKwS,OAAQ,KACpG,kBAAC9S,GAAD,CAASG,OAAK,EAACD,OAAQ,MACnB,kBAACX,GAAD,KACQ,kBAAC2M,GAAD,iBACJ,kBAACmY,GAAD,KACI,kBAACC,GAAD,KACI,kBAAC,GAAD,OAEiB,KAAnBlN,EAAUtK,MACZ,kBAACyX,GAAD,CAAethB,MAAO,CAACuhB,WAAY,sBACvC,kBAAC3C,GAAD,CAAe5e,MAAO,CAAC2R,UAAW,uBAClC,kBAACgN,GAAD,KACI,kBAACzV,GAAD,CAAUlJ,MAAO,CAAC0c,KAAM,IAAxB,gBAEJ,yBAAK1c,MAAO,CAACmP,UAAW,MAEnBhX,EAAOsB,SAASoF,OAAS,EAAK1G,EAAOsB,SAASsF,KAAI,SAAAoN,GAAE,OAEjD,kBAACwS,GAAD,CAAYpnB,IAAK4U,EAAGzQ,KACpB,kBAAC4N,GAAD,CAAWtJ,MAAO,CAAC0c,KAAM,GAAI3V,KAAG,GAC3BoF,EAAGzK,YADR,MAGI,kBAAC,GAAD,CAAcX,KAAG,EAACf,MAAO,CAAC0c,KAAM,EAAG1O,YAAa,KAC5C,yBAAKiB,IAAK9C,EAAGb,kBACbtL,MAAO,CAACE,QAAS,QAASiP,UAAW,OAAQxC,SAAU,OAAQtP,MAAO,OAAQJ,OAAQ,WAM1F,yBAAK+C,MAAO,CAAC0c,KAAM,EAAGwD,aAAc,KACpC,kBAAC5W,GAAD,KACK6C,EAAG3K,eAGR,yBAAKxB,MAAO,CAAC0c,KAAM,EAAG1O,YAAa,GAAI9N,QAAS,OAAQG,WAAY,SAAUD,eAAgB,iBAC1F,kBAACkJ,GAAD,SACY6C,EAAGnN,YAAY2C,QAAQ,SAK1C,kBAACuH,GAAD,mDAGL,kBAACyV,GAAD,KACI,kBAAC,GAAD,OAEJ,kBAACA,GAAD,CAAY3hB,QAAM,GACV,kBAAC,GAAD,CAAiBsU,YAAU,EAACY,WAAW,QAAQN,MAAM,gCAAgC/X,KAAK,OAAO8c,YAAY,cAAc1E,aAAc,gBAEjJ,kBAAC0M,GAAD,CAAY3hB,QAAM,GAAlB,eAC2B+a,GAAgB5f,EAAOsB,UAAUkI,QAAQ,IAEpE,kBAACgd,GAAD,CAAY3hB,QAAM,GAAlB,aACyBvC,EAAQkH,QAAQ,IAEzC,kBAACgd,GAAD,CAAY3hB,QAAM,GAAlB,iBAC4B,GAAK2E,QAAQ,IAEzC,kBAACgd,GAAD,KACI,kBAAC1V,GAAD,gBACmBzO,EAAMmH,QAAQ,YAenDyf,GAAkB7kB,IAAOC,IAAV,MAOf6kB,GAAkB9kB,IAAOC,IAAV,MAOf8kB,GAAgB/kB,IAAOC,IAAV,KAEb,IASQD,IAAOC,IAAV,KAIN,I,8KC3IJ,IAiGcglB,GAjGM,SAAC/kB,GAAU,IAEpBf,EAAQ+lB,sBAAR/lB,IACCf,EAAoB2M,uBAAY,kBAA2C,CAAE3M,eAA7C,EAAGA,eAAiBA,mBAApDA,eAHmB,EAIMkF,mBAAS,GAJf,WAIpB2L,EAJoB,KAIVkW,EAJU,KAKtBzb,EAAW4B,wBACX+F,EAAUC,uBAEhB/F,qBAAU,WACNyM,MACD,CAAC7Y,IAEJ,IAAM6Y,EAAO,+BAAG,4BAAApV,EAAA,sEACMsH,GAAA,uBAA2B/K,GAAO,WAAOwM,EAAW,UAD1D,OACNxB,EADM,OAEZvM,QAAQC,IAAI,iBAAkBsM,GAC9BT,EAAS,CAACpM,KAAM,gBAAiBmB,QAAS0L,EAAI,KAHlC,2CAAH,qDAMPib,EAAmBC,uBAAY,WAChC,IAAMC,EAAcrW,GAAY,EAAIA,EAAW,EAAIA,EACnDrR,QAAQC,IAAIynB,GACZH,EAAYG,MAGXC,EAAmBF,uBAAY,WACjCznB,QAAQC,IAAI,aACZ,IAAMynB,EAAcrW,EAAW,IAAMA,EAAW,EAAIA,EACnDrR,QAAQC,IAAIynB,GACbH,EAAYG,MAGRrgB,EAA0H7G,EAA1H6G,aAAc6J,EAA4G1Q,EAA5G0Q,0BAA2BC,EAAiF3Q,EAAjF2Q,kBAAmBgR,EAA8D3hB,EAA9D2hB,yBAA0B7a,EAAoC9G,EAApC8G,cAAe8J,EAAqB5Q,EAArB4Q,iBAE7G,OACI,oCACI,yBAAK0D,IAAI,kBAAkBjP,MAAO,CAAEoP,SAAU,WAAYE,MAAO,EAAGkN,IAAK,GAAInf,MAAO,IAAKwS,OAAQ,KACrG,kBAACvT,GAAD,KACI,kBAAC6jB,GAAD,MACA,kBAAC/iB,GAAD,KACI,kBAACL,GAAD,CAASG,OAAK,EAACD,OAAQ,MAEftC,GACA,oCACI,yBAAKqF,MAAO,CAACC,QAAS,qBAAsB0M,SAAU,IAAKkD,OAAQ,IAAMT,SAAU,aAC/E,kBAACnG,GAAD,KAAWzH,GACX,kBAAC0H,GAAD,CAAUhM,OAAK,GAAEmO,IAErB,yBAAKrL,MAAO,CAACE,QAAS,OAAQC,cAAe,SAAU4hB,YAAa,MAAQ1kB,MAAO,OAAQJ,OAAQ,IAAK4S,OAAQ,IAAMT,SAAU,aAC5H,yBAAKxT,GAAG,WAAWoE,MAAO,CAAC0c,KAAM,EAAGqF,YAAa,EAAG7hB,QAAS,OAAQC,cAAe,SAAUC,eAAgB,gBAAiBmS,UAAW,UACtI,kBAAC,GAAD,KACI,yBAAKtD,IAAK3D,GAAqB,GAAJ,OAAOA,EAAkB9G,QAEpD,yBAAKxE,MAAO,CAAC0c,KAAM,EAAG3N,UAAW,KAC5BxD,EAAmB,GAChB,yBAAKvL,MAAO,CAACE,QAAS,OAAQC,cAAe,MAAOE,WAAY,WAAYyP,QAAS,GAAK1P,eAAgB,aAC1G,kBAACgJ,GAAD,yBACA,kBAACH,GAAD,UAAoBxH,EAAeE,QAAQ,KAG/C,yBAAK3B,MAAO,CAACE,QAAS,OAAQC,cAAe,MAAOE,WAAY,WAAYD,eAAgB,aAC5F,kBAACgJ,GAAD,KAAWmC,EAAmB,EAAI,cAAgB,UAClD,kBAACtC,GAAD,WAAoBxH,EAAiBA,EAAgB8J,EAAmB,KAAM5J,QAAQ,MAG1F,yBAAK3B,MAAO,CAAC0c,KAAM,EAAGxc,QAAS,OAAQC,cAAe,MAAOE,WAAY,SAAUD,eAAgB,WAAY/C,MAAO,OAAQwE,OAAQ,aAClI,kBAACyH,GAAD,iBACF,kBAAC0Y,GAAD,CAAchhB,QAAS,kBAAM2gB,MACzB,kBAAC,eAAD,CAAajX,MAAM,OAAO1O,KAAM,MAHtC,IAImBwP,EACjB,kBAACwW,GAAD,CAAchhB,QAAS,kBAAM8gB,MAC5B,kBAAC,cAAD,CAAYpX,MAAM,OAAO1O,KAAM,OAGlC,yBAAKgE,MAAO,CAAC0c,KAAM,IACf,kBAAC,GAAD,CAAWlR,SAAUA,EAAUJ,QAASzQ,EAAgBmiB,SAAS,UAG7E,yBAAKlhB,GAAG,YAAYoE,MAAO,CAAC0c,KAAM,EAAGqF,YAAa,IAAK7B,aAAc,MACjE,kBAAChX,GAAD,CAAU/M,MAAI,GAAd,uBACI,yBAAK6D,MAAO,CAACiiB,UAAW,MACpB,kBAAC3Y,GAAD,KAAYgT,IAEhB,kBAACte,GAAD,KACI,kBAAC,GAAD,CAAiB+I,KAAG,EAAC6D,KAAK,QAAO,kBAAC,aAAD,OACjC,kBAAC,GAAD,CAAgB7D,KAAG,EAACI,SAAO,EAACyD,KAAK,cAAcJ,YAAa,kBAAMoD,EAAQW,KAAK,aAAY,kBAAC,cAAD,gBAejIyT,GAAezlB,IAAOsK,OAAV,MC9DHiZ,MAAS,CAAEvB,UAxCJ,SAAA9hB,GAEDoL,wBAAjB,IACM+F,EAAUC,uBACZjT,EAAgB0M,uBAAY,SAAAxM,GAAK,OAAIA,EAAK,cAAkBF,cAAc,MACxEnB,EAAW6N,uBAAY,SAAAxM,GAAK,OAAIA,EAAMrB,YALjB,EAOiC0b,GAAS,CAAC1b,aAA9D2b,EAPmB,EAOnBA,UAAWI,EAPQ,EAORA,OAAQhL,EAPA,EAOAA,YAAa8K,EAPb,EAOaA,gBAExCxN,qBAAU,WACN3N,QAAQC,IAAI,eAAgBQ,KAC7B,CAACA,IAMJ,OACI,oCACI,kBAAC,GAAD,MACMA,EACE,kBAAC0B,GAAD,KACI,kBAACsM,GAAD,2CACA,kBAAC,GAAD,CAAeqH,QAAS,EAAGhL,KAAMrK,EAAe4P,YAAaA,KAGjE,kBAAClO,GAAD,KACI,kBAACS,GAAD,CAASG,OAAK,EAACD,OAAQ,KACnB,kBAAC2L,GAAD,oCAIhB,kBAAC,GAAD,MACA,kBAAC,GAAD,CAAOwM,UAAWA,EAAWkG,KAAM9F,GAC/B,kBAAC,GAAD,CAAgBpK,QAASkK,EAAiBsH,YArBpC,SAAChhB,GACnBgS,EAAQW,KAAR,mBAAyB3S,Y,oBC8HdsmB,GA/IK,SAAAzlB,GAAS,IAIbf,EAEVe,EAHFyR,MACEhK,OAAUxI,IAIRkS,EAAUC,uBARW,EASChO,wBAASqI,GATV,WASnB1I,EATmB,KASZ2iB,EATY,KAW3Bra,qBAAU,WACRyM,MACC,IAEH,IAAMA,EAAO,+BAAG,4BAAApV,EAAA,sEACMsH,GAAA,kBAAsB/K,GAAO,WAAOwM,EAAW,UADrD,OACR1I,EADQ,OAEd2iB,EAAS3iB,GAFK,2CAAH,qDAKbsI,qBAAU,WACR3N,QAAQC,IAAI,UAAWoF,KACtB,CAACA,IAEJ,IAcIG,EACAF,EAEEoB,EALsB,EAQtBlI,EACAC,EACAJ,EACAE,EACAI,EACAD,EA+EJ,OACI,6BACA,kBAACyD,GAAD,KACE,kBAACS,GAAD,CAASG,OAAK,GACd,4BAAQ8C,MAAO,CAACM,aAAc,QAASU,QAAS,kBAAM4M,EAAQW,KAAK,YAAnE,QACA,4BAAQvO,MAAO,CAACM,aAAc,QAASU,QAAS,WA7GhC,IAChBohB,KAAM,IAAIC,KAAM,IAAK,KAAM,OAC7BC,KAAKnG,SAASoG,cAAc,YAChC,CACIC,SAAU,SAASC,GACf,IAAIjb,EAAY4a,EAAIM,SAASC,mBAC7BF,EAAIG,WAAWpb,GACfib,EAAII,KAAJ,UAAYnnB,EAAZ,cAsGF,oBACE,yBAAKE,GAAG,UAAUoE,MAAO,CAAC/C,OAAQ,QAASI,MAAO,QAAS4C,QAAS,QAC9DT,IAjGZG,EAaIH,EAbJG,YACAF,EAYID,EAZJC,YAEEoB,EAUErB,EAXJoB,cACEC,iBALsB,EAepBrB,EARJI,eACEjH,EARsB,EAQtBA,kBACAC,EATsB,EAStBA,kBACAJ,EAVsB,EAUtBA,mBACAE,EAXsB,EAWtBA,kBACAI,EAZsB,EAYtBA,cACAD,EAbsB,EAatBA,kBAIA,kBAACqF,GAAD,CAAStC,GAAG,WACV,kBAACuC,GAAD,KACE,kBAACiL,GAAD,KACE,yBAAK6F,IAAI,YAAYjP,MAAO,CAAC3C,MAAO,WAAW,6BADjD,YAKF,kBAACe,GAAD,KACI,kBAACkL,GAAD,CAAWvI,KAAG,GACXvI,EADH,IACwBE,GAExB,kBAAC4Q,GAAD,CAAWvI,KAAG,GACbpI,GAED,kBAAC2Q,GAAD,CAAWvI,KAAG,GACbnI,GAED,kBAAC0Q,GAAD,CAAWvI,KAAG,GACbjI,GAED,kBAACwQ,GAAD,CAAWvI,KAAG,GACblI,IAGL,kBAACwF,GAAD,KACE,kBAACiL,GAAD,CAAWvI,KAAG,EAAC0I,OAAK,GAApB,QAID9J,GAAeA,EAAYlG,SAASsF,KAAI,SAACtD,EAAMzF,GAAP,OACvC,uBAAGuB,IAAKvB,GACN,kBAACsT,GAAD,CAAWvI,KAAG,GACXtF,EAAK+F,kBAIZ,kBAAC8H,GAAD,CAAWvI,KAAG,GAAd,YACYF,IAGZ,kBAACvC,GAAD,KACE,kBAACgL,GAAD,CAAWvI,KAAG,EAAC0I,OAAK,GAApB,YAGC9J,GAAeA,EAAYlG,SAASsF,KAAI,SAACtD,EAAMzF,GAAP,OACrC,kBAACsT,GAAD,CAAWvI,KAAG,EAACxJ,IAAKvB,GACjByF,EAAKiG,iBAId,kBAACnD,GAAD,KACE,kBAAC+K,GAAD,CAAWvI,KAAG,EAAC0I,OAAK,GAApB,SAGC9J,GAAeA,EAAYlG,SAASsF,KAAI,SAACtD,EAAMzF,GAAP,OACvC,kBAACsT,GAAD,CAAWvI,KAAG,EAACxJ,IAAKvB,GAApB,KACWyF,EAAKuD,YAAY2C,QAAQ,OAGtC,kBAAC2H,GAAD,CAAWvI,KAAG,GAAd,KACWpB,EAAYlF,QAAQkH,QAAQ,KAGzC,kBAAC,GAAD,KACE,kBAAC2H,GAAD,eAEF,kBAAC7K,GAAD,KACE,kBAAC6K,GAAD,CAAWG,OAAK,GAAhB,KACWhK,W,SCpHjBqjB,I,MAAQC,sBAAYznB,IAGpB0nB,GAAgBC,sBAAW/oB,oCAwBlBgpB,GApBH,kBACV,kBAAC,WAAD,CAAUJ,MAAOA,IACf,kBAAC,YAAD,CAAUlK,OAAQoK,IACd,kBAAC,SAAD,KACE,kBAAC,GAAD,CAAYtY,MAAM,SAChB,kBAAC,QAAD,CAAO8T,OAAK,EAAC2E,KAAK,IAAI5E,UAAWiC,KACjC,kBAAC,QAAD,CAAO2C,KAAK,kBAAkB5E,UAAW6E,KACzC,kBAAC,QAAD,CAAOD,KAAK,UAAU5E,UAAW8E,KACjC,kBAAC,QAAD,CAAO7E,OAAK,EAAC2E,KAAK,YAAY5E,UAAW4C,KACzC,kBAAC,QAAD,CAAOgC,KAAK,gBAAgB3E,OAAK,EAACD,UAAWiD,KAC7C,kBAAC,QAAD,CAAO2B,KAAK,iBAAiB5E,UAAW+E,KACxC,kBAAC,QAAD,CAAOH,KAAK,gBAAgB5E,UAAW6B,KACvC,kBAAC,GAAD,CAAc+C,KAAK,SAASL,OAAK,EAACvE,UAAWlX,KAC7C,kBAAC,GAAD,CAAc8b,KAAK,uBAAuB5E,UAAW2D,U,sCC9B3DtJ,GAAS,I,QAAI2K,GAAOrpB,oCAE1B,kCAAe,WAAMspB,EAAK9c,GAAX,iBAAAvH,EAAA,sEAECskB,EAAWD,EAAIlP,MAAfmP,OACRtpB,QAAQC,IAAIqpB,GAHL,SAIqB7K,GAAO8K,eAAepsB,OAAO,CACrDmsB,SACAE,SAAU,QANP,OAIDC,EAJC,OASPld,EAAI9C,OAAO,KAAKigB,KAAKD,EAAcE,eAT5B,gDAWPpd,EAAI9C,OAAO,KAAKF,KAAK,CAACqgB,WAAY,IAAK3d,QAAS,KAAIA,UAX7C,yDAAf,wDCEM+c,GAAOnrB,EAAQ,IAOfgsB,GAAShsB,EAAQkC,IACjB+pB,GAAuDd,GAAK7e,KAAK4f,UAAW,mBAG5EC,GAASC,OACfD,GACGE,QAAQ,gBACRC,IAAIF,KAAO,OAAQH,KACnBptB,IAAI,uBAbmB,SAAC2sB,EAAK9c,GAC9BvM,QAAQC,IAAI,kBAAmBopB,EAAIlP,MAAMrP,MACzCyB,EAAI9C,OAAO,KAAKF,KAAKxB,KAAKD,MAAMuhB,EAAIlP,MAAMrP,UAYzCpO,IAAI,uBAAwB0tB,IAC5B1tB,IAAI,MAAM,SAAC2sB,EAAK9c,GACf,IAAM8d,EAAU,GACVC,EAASC,0BACb,kBAAC,eAAD,CAAcF,QAASA,EAAS5nB,SAAU4mB,EAAIhf,KAC5C,kBAAC,GAAD,QAIAggB,EAAQhgB,IACVkC,EAAIhB,SAAS8e,EAAQhgB,KAErBkC,EAAI9C,OAAO,KAAKigB,KAAhB,gSASIG,GAAOW,OAAOhoB,IAAd,uCACoCqnB,GAAOW,OAAOhoB,IADlD,MAEI,GAXR,qBAcI,uBACoBqnB,GAAOW,OAAOC,GADlC,sBAdJ,6DAoBmBH,EApBnB,oCA2BSN","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 37);\n","module.exports = require(\"react\");","module.exports = require(\"styled-components\");","module.exports = require(\"@babel/runtime/helpers/taggedTemplateLiteral\");","module.exports = require(\"@babel/runtime/helpers/slicedToArray\");","module.exports = require(\"@babel/runtime/regenerator\");","module.exports = require(\"react-redux\");","module.exports = require(\"react-feather\");","module.exports = require(\"@babel/runtime/helpers/asyncToGenerator\");","module.exports = require(\"@babel/runtime/helpers/defineProperty\");","module.exports = require(\"react-router-dom\");","module.exports = require(\"@babel/runtime/helpers/extends\");","module.exports = require(\"react-router\");","module.exports = require(\"@babel/runtime/helpers/objectWithoutProperties\");","module.exports = require(\"@babel/runtime/helpers/toConsumableArray\");","module.exports = require(\"@stripe/react-stripe-js\");","module.exports = require(\"react-loader-spinner\");","module.exports = require(\"redux\");","module.exports = require(\"lodash\");","module.exports = require(\"moment\");","module.exports = require(\"@babel/runtime/helpers/getPrototypeOf\");","module.exports = require(\"express\");","module.exports = require(\"http\");","module.exports = require(\"universal-cookie\");","\n\n\nfunction Order(user, basket, cartTotal) {\n\n}\n\n\nfunction OrderConfirmation(user, basket, cartTotal, orderId) {\n    const { customer_title, customer_firstname, customer_lastname, email, customer_address1, customer_address2, customer_postcode, customer_town } = user\n    this.message_sent = false\n    this.to_address = email\n    this.from_address = \"sales@chunkysoap.co.uk\"\n    this.message_subject = \"Thankyou for your order\"\n    this.message_text = \"Please see your chunky soap order details below\"\n    this.message_body = {\n        customer_name: customer_firstname,\n        order_id: orderId,\n        cart_total: cartTotal,\n        products: basket.products,\n        email_banner_image: \"https://chunksysoap-1.s3.eu-west-2.amazonaws.com/email_header.png\"\n    }\n    this.email_template_name = 'confirmation'\n}\n\nfunction OrderFactory() {\n    this.create = (user, basket, cartTotal, orderId, type) => {\n        switch (type) {\n            case 1:\n                return new OrderConfirmation(user, basket, cartTotal, orderId)\n                break;\n            case 2:\n                return new Order(user, basket)\n                break;\n            default:\n                return {}\n        }\n    }\n}\n\nmodule.exports = {\n    OrderFactory\n}\n","module.exports = require(\"react-dom\");","module.exports = require(\"fuse.js\");","module.exports = require(\"react-useanimations\");","module.exports = require(\"react-useanimations/lib/menu2\");","module.exports = require(\"@babel/runtime/helpers/classCallCheck\");","module.exports = require(\"@babel/runtime/helpers/createClass\");","module.exports = require(\"@babel/runtime/helpers/inherits\");","module.exports = require(\"@babel/runtime/helpers/possibleConstructorReturn\");","module.exports = require(\"jspdf\");","module.exports = require(\"@stripe/stripe-js\");","module.exports = require(\"react-dom/server\");","module.exports = require(\"stripe\");","import http from 'http';\n\nlet app = require('./server').default;\n\nconst server = http.createServer(app);\n\nlet currentApp = app;\n\nserver\n  .listen(process.env.PORT || 3000, () => {\n    console.log('🚀 started');\n  })\n  .on('error', error => {\n    console.log(error);\n  });\n\nif (module.hot) {\n  console.log('✅  Server-side HMR Enabled!');\n\n  module.hot.accept('./server', () => {\n    console.log('🔁  HMR Reloading `./server`...');\n\n    try {\n      app = require('./server').default;\n      server.removeListener('request', currentApp);\n      server.on('request', app);\n      currentApp = app;\n    } catch (error) {\n      console.error(error);\n    }\n  });\n}\n","module.exports = require(\"promise-retry\");","// Exports\nmodule.exports = {};\n","// Exports\nmodule.exports = {};\n","module.exports = require(\"path\");","const initialState = {\n    products: [],\n}\nexport default function productReducer(state = initialState, action) {\n    console.log(\"FETCH\", action.payload)\n    console.log(\"CATEGORIES \", state.categories)\n    console.log(\"state should be \", action.payload)\n    switch(action.type) {\n        case 'FETCH_PRODUCTS':\n            return {\n                ...state,\n                products: action.payload\n            }\n        default:\n            return state;\n    } \n}","const initialState = {\n    user: {}\n}\n\nexport default function userReducer(state = initialState, action) {\n    switch(action.type) {\n        case 'SET_USER_SESSION':\n            return {\n                ...state,\n                user: action.payload\n            }\n        case 'END_USER_SESSION':\n            return {\n                ...state,\n                user: {}\n            }\n        default:\n            return state;\n    }\n}","const initialState = {\n    basket: {\n        products: [],\n        total: 0,\n        postage: 0,\n        carrierId: null\n    }\n}\n\nexport default function basketReducer(state=initialState, action) {\n    console.log(\"ADDING\", action.payload)\n    // console.log(\"BASKET SHOULD CONTAIN \", [...state.basket.concat(action.payload)])\n    // console.log(\"STATE FROM REDUCER \", {\n    //             ...state,\n    //             basket: {\n    //                 products: state.basket.products.filter(item => item._id != action.payload._id)\n    //             }})\n    switch(action.type) {\n        case 'SET_INITIAL_BASKET':\n            return {\n               ...state,\n                basket: {\n                    products:action.payload\n                }\n            }\n        case 'EMPTY_BASKET':\n            return {\n                ...state,\n                basket: initialState.basket\n            }\n        case 'ADD_TO_BASKET':\n            return {\n                ...state,\n                basket: { products: action.payload }\n            }\n        case 'REMOVE_FROM_BASKET':\n            return {\n                ...state,\n                basket: {\n                    products: state.basket.products.filter(item => item._id != action.payload._id )\n                }\n            }\n        case 'UPDATE_TOTAL': \n             return {\n                 ...state,\n                 total: action.payload\n             }\n        case 'SET_POSTAGE' :\n            return {\n                ...state,\n                basket: {\n                    ...state.basket,\n                    postage: action.payload.shipping_cost,\n                    carrierId: action.payload.id \n                }\n            }\n            default:\n                return state\n    } \n}","\nconst initialState = {\n    currentProduct: {},\n}\nexport default function currentProductReducer(state = initialState, action) {\n    switch(action.type) {\n        case 'FETCH_PRODUCT':\n            return {\n                ...state,\n                currentProduct: action.payload\n            }\n        default:\n            return state;\n    } \n}","const initialState = {\n    searchResults: []\n}\nconst searchReducer = (state = initialState , action) => {\n    switch(action.type) {\n       case 'UPDATE_SEARCH':\n           return {\n               ...state,\n               searchResults: action.payload\n           }\n        default: \n        return state\n    }\n}\n\nexport default searchReducer","const initialState = {\n    orders: {}\n}\n\nconst ordersReducer = (state = initialState, action) => {\n    switch(action.type) {\n        case 'GET_ORDERS': \n            return {\n                ...state,\n                orders: action.payload\n            }\n        default:\n            return state\n    }\n}\n\nexport default ordersReducer","const initialState = {\n    showMenu: false,\n    showCategoryMenu: false\n}\nconst uiReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case 'SHOW_MENU':\n            return {\n                ...state,\n                showMenu: true\n            }\n        case 'HIDE_MENU':\n            return {\n                ...state,\n                showMenu: false\n            }\n        case 'TOGGLE_CATEGORY':\n            return {\n                ...state,\n                showCategoryMenu: !state.showCategoryMenu\n            }\n\n        default:\n            return state\n    }\n}\n\nexport default uiReducer","import { combineReducers } from 'redux';\nimport productReducer from './productReducer';\nimport userReducer from './userReducer';\nimport basketReducer from './basketReducer'\nimport categoryReducer from './categoryReducer'\nimport currentProductReducer from './currentProductReducer';\nimport searchReducer from './searchReducer'\nimport ordersReducer from './ordersReducer'\nimport uiReducer from './uiReducer'\n\nexport default combineReducers({\n    currentProduct:currentProductReducer,\n    products: productReducer ,\n    basket: basketReducer,\n    categories: categoryReducer,\n    user: userReducer,\n    searchResults: searchReducer,\n    orders: ordersReducer,\n    ui: uiReducer\n})","const initialState = {\n  categories: [\n    { name: \"soaps\", id: 1 },\n    { name: \"Shampoo\", id: 2 },\n    { name: \"Creams\", id: 3 },\n    { name: \"fragrances\", id: 4 },\n    { name: \"body care\", id: 5 },\n  ],\n};\n\nexport default function categoryReducer(state = [], action) {\n  switch (action.type) {\n    case \"FETCH_CATEGORIES\":\n      return {\n        ...state, \n        categories: action.payload\n      };\n    default:\n      return state;\n  }\n}\n","\n\n    export const palette = {\n        primaryColor: '#95DCCB',\n        primaryColor1: '#79CBB7',\n        secondayColor: '#F19AFF',\n        secondaryColor1: '#E963FF',\n        tertiaryColor1: '#61E1FF',\n        tertiaryColor: '#77E5FF',\n        darkfont: '#1E1C1C',\n        colorGray1: '#0D0D0D',\n        colorGray2: '#1E1C1C',\n        colorGray3:'#535151',\n        colorGray4: '#837D7D',\n        colorGray5: '#A3A3A3',\n        colorGray6: '#C2C1C1',\n        colorGray7: '#DBDBDB',\n        colorGray8: '#F7F2F2',\n        colorGray9: '#FBFAFA',\n        colorGray10: '#C4C4C4',\n        gray1: '#F6F2F2'\n}\n\n    export const fonts = {\n        small: '22px'\n    }\n// export default vars\n\n\nexport const heroBubbles = [{size: 230, opac: 0.6, x: 10, t: 500},\n                   {size: 170, opac: 0.4, x: 200, t:680},\n                   {size: 190, opac: 0.2, x:1160, t:530},\n                   {size: 120, opac: 0.3, x:800, t: 690},\n                   {size: 60, opac: 0.2, x:920, t: 790},\n                   {size: 50, opac: 0.7, x: 80, t: 900, dark: 'yes'},\n                   {size: 120, opac: 0.7, x: 160, t: 950, dark: 'yes'},\n                  ]\n\nexport const headerBubbles = [{size: 30, opac: 0.2, x: 290, t: 310},\n                   {size: 90, opac: 0.4, x: 350, t:320},\n                   {size: 60, opac: 0.2, x:850, t:130},\n                   {size: 120, opac: 0.2, x:750, t: 190},\n                   {size: 30, opac: 0.2, x:910, t: 230},\n                   {size: 120, opac: 0.2, x:990, t: 320},\n                   {size: 30, opac: 0.2, x: 380, t: 390, dark: 'yes'},\n                   {size: 100, opac: 0.1, x: 260, t: 400, dark: 'yes'},\n                  ]\n\nexport const bodyBubbles = [\n                    {size: 30, opac: 0.2, x: 290, t: 1110, dark: 'yes'},\n                   {size: 90, opac: 0.2, x: 350, t:1120, dark: 'yes'},\n                   {size: 60, opac: 0.2, x:850, t:1030, dark: 'yes'},\n                   {size: 120, opac: 0.2, x:750, t: 1090, dark: 'yes'},\n                   {size: 30, opac: 0.4, x:910, t: 1130, dark: 'yes'},\n                   {size: 120, opac: 0.2, x:990, t: 1220, dark: 'yes'},\n                   {size: 40, opac: 0.4, x: 210, t: 1260, dark: 'yes'},\n                   {size: 120, opac: 0.2, x: 260, t: 1300, dark: 'yes'},\n                   {size: 120, opac: 0.2, x:1290, t: 1020, dark: 'yes'},\n                   {size: 40, opac: 0.4, x: 1210, t: 1260, dark: 'yes'},\n                   {size: 60, opac: 0.2, x: 1400, t: 1300, dark: 'yes'},\n                   {size: 30, opac: 0.2, x: 350, t:1520, dark: 'yes'},\n                    {size: 30, opac: 0.2, x: 290, t: 1910, dark: 'yes'},\n                   {size: 90, opac: 0.2, x: 350, t:1920, dark: 'yes'},\n                   {size: 60, opac: 0.2, x:850, t:1830, dark: 'yes'},\n                   {size: 120, opac: 0.2, x:750, t: 1890, dark: 'yes'},\n                   {size: 30, opac: 0.4, x:910, t: 1930, dark: 'yes'},\n                   {size: 120, opac: 0.2, x:990, t: 1920, dark: 'yes'},\n                   {size: 40, opac: 0.4, x: 210, t: 1960, dark: 'yes'},\n                   {size: 120, opac: 0.2, x: 260, t: 2100, dark: 'yes'},\n                   {size: 120, opac: 0.2, x:1290, t: 1820, dark: 'yes'},\n                   {size: 40, opac: 0.4, x: 1210, t: 2060, dark: 'yes'},\n                   {size: 60, opac: 0.2, x: 1400, t: 2000, dark: 'yes'},\n                   {size: 30, opac: 0.2, x: 350, t: 2320, dark: 'yes'},\n                  ]","import styled, { css } from 'styled-components'\nimport * as vars from './variables'\n\nexport const Container = styled.div`\n  width: 100%;\n  margin-left: auto;\n  margin-right: auto;\n  overflowX: hidden;\n  position: relative;\n  ${props => props.nav === true && css`\n        width: 100%;\n  `}\n  ${props => props.location && /product|checkout/.test(props.location) && (props.nav === true)  && css`\n        max-width: 100%;\n        background-color: ${vars.palette.primaryColor};\n        `\n}\n`\nexport const Section = styled.div`\n    max-width: 100vw;\n    background-color: ${vars.palette.primaryColor};\n    min-height: 0px;\n    padding: 50px 50px 50px 50px;\n    overflowX: hidden;\n    z-index: -1;\n    ${props => props.narrow && css`\n        padding: 0px 50px 50px 50px;\n        `}\n    ${props => props.height && css`\n      height: ${props.height}px;\n    `}\n    ${props => props.dark && css`\n      background-color: ${vars.palette.primaryColor};\n    `}\n    ${props => props.light && css`\n      background-color: white;\n    `}\n    ${props => props.mobile && `\n        padding: 50px 15px 50px 15px\n        width: 100vw;\n    `}\n    overflow: hidden;\n`\n\nexport const Wrapper = styled.div`\n    max-width: 1294px;\n    margin: 0px auto;\n    overflow: hidden;\n    ${props => props.width && css`\n        max-Width: ${props.width}px;\n    `}\n    ${props => props.mt && css`\n    margin-top: ${props.mt}px;\n    `}\n`\n\nexport const Hero = styled.div`\n    width: 100%;\n    height: 800px;\n    color: white;\n    overflow: hidden;\n    background-color: ${vars.palette.primaryColor};\n    ${props => props.viewPort < 963 && css`\n        height: 520px;\n    `}\n`\n\nexport const SlideGrid = styled.div`\n    position: relative;\n    max-width: 100vw;\n    margin: 0px auto;\n    padding: 140px 100px 40px 100px;\n    background-color: white;\n    display: flex;\n    flex-flow: row wrap;\n    justify-content: space-around;\n    overflowX: hidden;\n    z-index: 2;\n\n    &:nth-child() {\n        margin-left: 150px;\n    }\n    background-color: transparent;\n    ${props => props.dark && `\n        background-color: ${vars.palette.primaryColor};\n    `}\n    ${props => props.mb && `\n        margin-bottom: ${props.mb};\n    `}\n    ${props => props.sm && `\n        position: absolute;\n        top: 230px;\n        padding: 0 0 0 0;\n        left: 50%;\n        flex-direction: row;\n        flex-wrap: nowrap;\n        justify-content:  center ;\n        width: 90vw;\n        max-width: 90vw;\n        transform: translateX(-50%);\n    `}\n`\nexport const Frame = styled.div`\n    margin: 120px auto 50px auto;\n    max-width: 650px;\n    padding: 40px 50px;\n    border: 1px solid #DBDBDB;\n    border-radius: 25px;\n    min-height: 320px;\n    display: flex;\n    justify-content: space-between;\n    flex-direction: column;\n`\nexport const FrameHeader = styled.div`\n        padding: 20px 0px;\n        flex: 1;\n`\n\nexport const FrameBody = styled.div`\n    flex: 6;\n`\n\nexport const FrameFooter = styled.div`\n    flex: 0.5;\n    height: 70px;\n    ${'' /* border-top: 1px gray solid; */}\n    display: flex;\n    justify-content: space-between;\n    margin-top: 30px;\n    padding: 20px 0px;\n    border-top: 1px solid ${vars.palette.colorGray7};\n`\nexport const ButtonRow = styled.div`\n    margin-top: 20px;\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-end;\n    float: right;\n    width: 100%;\n`\nexport const Divider = styled.div`\n    width: 100%;\n    height: 1px;\n    background-color: ${vars.palette.colorGray7};\n    ${props => props.mb && css`\n        margin-bottom: ${props.mb};\n    `}\n`\n\nexport const Invoice = styled.div`\n     width: 591px;\n     height: 538px;\n     padding: 4px;\n     display: grid;\n     grid-template-columns: 1fr 1fr 1fr 1fr;\n     grid-template-rows: 0.3fr 1.6fr 0.6fr 1fr;\n     gap: 0px 0px;\n     grid-template-areas:\n    \"Logo Logo Address Address\"\n    \"Product_name Product_name product_qty product_total\"\n    \"footer footer footer footer\";\n`\n\nexport const Logo = styled.div`\n                    grid-area: Logo;\n                    display: flex;\n                    flex-direction: row;\n                    padding: 0px 20px;\n                    border-bottom: 1px solid #333;\n                    `\nexport const Address = styled.div`\n                grid-area: Address;\n                padding: 20px;\n                border-bottom: 1px solid #333;\n                `\n\nexport const ProductName = styled.div` padding: 50px 20px; grid-area: Product_name`\nexport const ProductQty = styled.div`grid-area: product_qty; padding: 50px 20px;`\nexport const ProductTotal = styled.div` grid-area: product_total; padding: 50px 20px;`\nexport const Footer = styled.div` grid-area: footer;\n                border-top: 1px solid #333;\n                padding: 20px;\n`\nexport const FooterTotal = styled.div` grid-area: 3 / 4 / 4 / 5; padding: 20px 20px; `","import _, { stubString } from 'lodash'\nimport moment from 'moment'\n\nexport const getCartTotal = (cart, postage = 0, tax = 0) => {\n  if (cart.length) {\n        const totals = cart.map(item => item.total_price)\n        const tmpValue = totals.reduce((a, b) => a + b) \n        const basketValue = (tmpValue + postage + tax)\n        // .toFixed(2)\n    return basketValue\n  }\n  return 0.00\n}\n\nexport const isEmpty = (data) => {\n  return _.isEmpty(data)\n}\n\nexport const createExcerpt = (string, length) => {\n  return string.length > length ? string.substring(0, length - 3 ) + '...  ' : string + \" \"\n}\n\nexport const pathMatches = (str) => {\n  // console.log(\"PATH \" , str)\n    const regex = /^\\/([^?\\/]+)/;\n    if (str === '/') {\n      return \"/\" // str.match(regex)\n    }\n    // console.log(\"PATH MATCH \", str.match(regex)[0])\n    return str.match(regex)[0];\n}\n\nexport const convertDate = (date) => {\n  console.log('FN DATE', date)\n  console.log(moment(Date(date)).format('dd MMM Do'))\n  return moment(date).format('ddd MMM Do')\n}","import React, { useState } from 'react'\nimport styled from 'styled-components'\nimport * as fn from '../../helpers/functions'\nimport { OrderItemDetail } from './'\nimport * as vars from '../../styles/variables'\nimport { MoreHorizontal, ChevronUp } from 'react-feather'\n\n\nconst OrderListItem = ({ order }) => {\n    const { order_total, createdAt, _id, order_items } = order\n    const { customer_firstname, customer_lastname } = order.order_customer\n\n    const [currentItem, setCurrentItem] = useState(null)\n\n\n\n    console.log(\"ORDER_ITEM \", order_total)\n    return <div>\n        <div style={{ padding: '5px 90px', display: 'flex', flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', marginBottom: \"1px\", justifyItems: 'left', borderBottom: `2px solid ${vars.palette.colorGray10}` }}>\n            <div>\n                {fn.convertDate(createdAt)}\n            </div>\n            <div>\n                $ {order_total}\n            </div>\n            <div>\n                {customer_firstname} {customer_lastname}\n            </div>\n            <div>\n                {order.order_carrier.shipping_carrier}\n            </div>\n            <div>\n                <button secondary sml onClick={() => {\n                    currentItem === _id ? setCurrentItem(null) : setCurrentItem(_id)\n                }}>{currentItem === null ? <MoreHorizontal /> : <ChevronUp />}</button>\n            </div>\n        </div>\n\n        <div>\n            <OrderItemDetail items={order_items} id={_id} item={currentItem} />\n        </div>\n\n    </div>\n}\n\nexport default OrderListItem","import React, { useEffect, useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport { FileText } from 'react-feather'\n\nconst OrderItemDetail = (props) => {\n\n\n    const { products } = props.items\n    const { item, id } = props\n    console.log(\"ORDER DEETS \", props)\n    const renderItems = () => {\n        return (\n            <>\n            <div style={{display: \"flex\", flexDirection: 'row', justifyContent: 'space-between', marginBottom: '10px', borderBottom: '1px solid black'}}>\n                <div style={{width: '100%'}}>\n                    Product\n                </div>\n                <div style={{width: '100%'}}>\n                    Price\n                </div>\n                <div style={{width: '100%'}}>\n                   Quantity \n                </div>\n                <div style={{width: '100%'}}>\n                   Total Price\n                </div>\n            </div>\n            { \n            products && products.map((item, i) => (\n                <div style={{display: 'flex', justifyContent: 'space-between', flexBasis: 1, flexGrow: 1}} key={item._id}>\n                    <div style={{width: '100%'}} >\n                        {item.product_name}\n                    </div>\n                    <div style={{width: '100%'}}>\n                        ${item.product_price}\n                    </div>\n                    <div style={{width: '100%'}}>\n                        {item.product_qty}\n                    </div>\n                    <div style={{width: '100%'}}>\n                        ${item.total_price.toFixed(2)}\n                    </div>\n                    </div>\n            ))\n            }\n            <div style={{display: 'flex', flexDirection: 'row', borderTop: '1px solid black', margin: '10px 0px', justifyContent: 'space-around', padding: '10px 0px', alignItems: 'center'}} >\n                <div style={{width: '100%'}}></div>\n                <div style={{width: '100%'}}></div>\n                <div style={{width: '100%'}}></div>\n                <div style={{width: '100%', }}><Link to={`/admin/invoices/${id}`}>\n                View Invoice: <FileText />\n                </Link>\n                </div>\n            </div>\n            </>\n        )\n    }\n\n    return (\n        <div style={{marginBotton: '50', padding: '10px 90px', transition: 'all 0.3s ease-in'}} className={ item === id ? 'visible' : 'hidden'}>\n        {\n         renderItems()\n        }\n        </div>\n    )\n}\n\nexport default OrderItemDetail","import { isEmpty } from 'lodash';\nimport Cookies from 'universal-cookie'\n\nconst cookies = new Cookies()\n\n\nconst TOKEN_KEY = 'jwtToken';\nconst USER_INFO = 'userInfo';\n\nconst parse = JSON.parse;\nconst stringify = JSON.stringify;\n\nconst auth = {\n  /**\n   * Remove an item from the used storage\n   * @param  {String} key [description]\n   */\n  clear(key) {\n    if (localStorage && localStorage.getItem(key)) {\n      return localStorage.removeItem(key);\n    }\n\n    if (sessionStorage && sessionStorage.getItem(key)) {\n      return sessionStorage.removeItem(key);\n    }\n\n    return null;\n  },\n\n  /**\n   * Clear all app storage\n   */\n  clearAppStorage() {\n    if (localStorage) {\n      return localStorage.clear();\n    }\n\n    if (sessionStorage) {\n     return sessionStorage.clear();\n    }\n  },\n\n  /**\n   * Clear all user info\n   * @param {*} tokenKey \n   * @returns \n   */\n\n  clearUser() {\n      console.log(\"TOKEN CLEARER \")\n      this.clearUserInfo()\n      this.clearToken()\n  },\n\n  clearToken(tokenKey = TOKEN_KEY) {\n    return auth.clear(tokenKey);\n  },\n\n  clearUserInfo(userInfo = USER_INFO) {\n    return auth.clear(userInfo);\n  },\n\n  /**\n   * Returns data from storage\n   * @param  {String} key Item to get from the storage\n   * @return {String|Object}     Data from the storage\n   */\n  get(key) {\n    if (localStorage && localStorage.getItem(key)) {\n      return parse(localStorage.getItem(key)) || null;\n    }\n\n    if (sessionStorage && sessionStorage.getItem(key)) {\n      return parse(sessionStorage.getItem(key)) || null;\n    }\n\n    return null;\n  },\n\n  getToken(tokenKey = TOKEN_KEY) {\n    return auth.get(tokenKey);\n  },\n\n  getUserInfo(userInfo = USER_INFO) {\n    return auth.get(userInfo);\n  },\n\n  /**\n   * Set data in storage\n   * @param {String|Object}  value    The data to store\n   * @param {String}  key\n   * @param {Boolean} isLocalStorage  Defines if we need to store in localStorage or sessionStorage\n   */\n  set(value, key, isLocalStorage) {\n    if (isEmpty(value)) {\n      return null;\n    }\n\n    cookies.set(key, stringify(value))\n\n    if (isLocalStorage && localStorage) {\n      return localStorage.setItem(key, stringify(value));\n    }\n    \n    if (sessionStorage) {\n      return sessionStorage.setItem(key, stringify(value));\n    }\n\n    return null;\n  },\n\n  setToken(value = '', isLocalStorage = false, tokenKey = TOKEN_KEY) {\n    return auth.set(value, tokenKey, isLocalStorage);\n  },\n\n  setUserInfo(value = '', isLocalStorage = false, userInfo = USER_INFO) {\n    return auth.set(value, userInfo, isLocalStorage);\n  },\n};\n\nexport default auth;","// import 'whatwg-fetch';\nimport auth from './auth';\n/**\n * Parses the JSON returned by a network request\n *\n * @param  {object} response A response from a network request\n *\n * @return {object}          The parsed JSON from the request\n */\nfunction parseJSON(response) {\n  return response.json ? response.json() : response;\n}\n\n/**\n * Checks if a network request came back fine, and throws an error if not\n *\n * @param  {object} response   A response from a network request\n *\n * @return {object|undefined} Returns either the response, or throws an error\n */\nfunction checkStatus(response) {\n  if (response.status >= 200 && response.status < 300) {\n    return response;\n  }\n\n  return parseJSON(response).then(responseFormatted => {\n    const error = new Error(response.statusText);\n    error.response = response;\n    error.response.payload = responseFormatted;\n    throw error;\n  });\n}\n\n/**\n * Format query params\n *\n * @param params\n * @returns {string}\n */\nfunction formatQueryParams(params) {\n  return Object.keys(params)\n    .map(k => `${encodeURIComponent(k)}=${encodeURIComponent(params[k])}`)\n    .join('&');\n}\n\n/**\n * Requests a URL, returning a promise\n *\n * @param  {string} url       The URL we want to request\n * @param  {object} [options] The options we want to pass to \"fetch\"\n *\n * @return {object}           The response data\n */\nexport default function request(\n  url,\n  options = {},\n  stringify = true\n) {\n  // Set headers\n  console.log(\"REQUEST FUNCTION \", url, options)\n  if (stringify) {\n\n    options.headers = Object.assign(\n      {\n        'Content-Type': 'application/json',\n      },\n      options.headers,\n      {}\n    );\n  }\n\n  const token = auth.getToken();\n\n  if (token) {\n    options.headers = Object.assign(\n      {\n        Authorization: `Bearer ${token}`,\n      },\n      options.headers\n    );\n  }\n\n  if (options && options.params) {\n    const params = formatQueryParams(options.params);\n    url = `${url}?${params}`;\n  }\n\n  // Stringify body object\n  if (options && options.body && stringify) {\n    options.body = JSON.stringify(options.body);\n  }\n\n  return fetch(url, options)\n    .then(checkStatus)\n    .then(parseJSON);\n}","// import { fn } from '.';\nconst promiseRetry = require('promise-retry')\n\nexport default {\n  /**\n   * ( uses fetch to make authorized api requests )\n   *\n   * @param {*} url\n   * @param {*} method\n   * @param {*} data\n   * @returns\n   */\n  async send(url, method, data, type = \"protected\") {\n    // const apiAddress = process.env.RAZZLE_API_URI \n    const apiAddress = process.env.NODE_ENV === 'production' ? process.env.RAZZLE_API_URI : \"https://chunky-soap-api.herokuapp.com\" // \"http://localhost:1337\";\n    // fn.getApiAddress()\n    const token = await JSON.parse(sessionStorage.getItem(\"jwtToken\"));\n    // await fn.getTokenFromStorage('sessionToken')\n    console.log(\"TOKEN \", token);\n    const baseURL = `${apiAddress}`;\n    let myHeaders = new Headers();\n    myHeaders.append(\"Content-Type\", \"application/json\");\n    if (token !== \"\" && type !== \"public\") {\n      myHeaders.append(\"Authorization\", `Bearer ${token}`);\n    }\n\n    var raw = JSON.stringify(data);\n    console.log(\"raw data \", raw);\n    var requestOptions = {\n      method: method,\n      headers: myHeaders,\n      mode: 'cors',\n      credentials: 'omit',\n      body: raw,\n      redirect: \"follow\",\n    };\n\n\n  /**\n   * (retryFetch returns fetch which recursively calls itself if the request fails)\n   *\n   * @param {*} url\n   * @param {*} options\n   * @param {integer} retries\n   * @returns fetch\n   */\n\n      const retryFetch = (url, options, retries = 4) => {\n        const retryCodes = [404, 401, 408, 500, 502, 503, 504, 522, 524]\n        return fetch(url,  options)\n        .then(response => {\n          console.log('STATUS', response.status)\n          if(response.status === 200) return response.json()\n          if (retries > 0 && retryCodes.includes(response.status)) {\n            console.log('retries ', retries)\n            return retryFetch(url, options, retries - 1)\n          } else {\n            throw new Error(response)\n          }\n        })\n        .catch(err => {\n          console.log(err)\n          if (retries !== 0) {\n            return retryFetch(url, options, retries - 1)\n          }\n        })\n      } \n\n       return retryFetch(`${baseURL}${url}`, requestOptions)\n\n  },\n};\n\n","import { auth, request, myApi } from './'\n\n\n export default {\n\n    async login(body, dispatch) {\n    const API_URI = process.env.NODE_ENV === 'production' ? process.env.RAZZLE_API_URI :'http://localhost:1337'\n    // const API_URI = 'http://localhost:1337'\n        try {\n            console.log(\"STRAPI LOGIN \", body)\n            const response = await request(`${API_URI}/auth/local/`, { method: 'POST', body})\n            console.log(\"STRAPI RESPONSE \", response)\n            // TODO: use cookies to avoid serverside issues\n            auth.setToken(response.jwt, body.rememberMe);\n            auth.setUserInfo(response.user, body.rememberMe);\n            dispatch({type: \"SET_USER_SESSION\", payload: response})\n            return response\n        }catch(err) {\n            return {status: 400, message: err}\n        }\n    },\n\n    async register(body, dispatch) {\n    const API_URI = process.env.NODE_ENV === 'production' ? process.env.RAZZLE_API_URI :'http://localhost:1337'\n    // const API_URI = 'http://localhost:1337'\n        try {\n            const response = await request(`${API_URI}/auth/local/register/`, { method: 'POST', body})\n            auth.setToken(response.jwt, body.rememberMe);\n            auth.setUserInfo(response.user, body.rememberMe);\n            console.log(\"NEW USER \", response.user)\n            this.createCustomer(response.user.id, dispatch)\n        } catch(err) {\n            return(err)\n        }\n    },\n\n    async createCustomer(_id, dispatch) {\n        console.log(\"CREATING CUSTOMER\")\n        const customer = {\n            customer_title: \"\",\n            customer_firstname: \"\",\n            customer_lastname: \"\",\n            customer_address1: \"\",\n            customer_address2: \"\",\n            customer_town: \"\",\n            customer_postcode: \"\",\n            customer_created: new Date(),\n            user: _id\n        }\n        try {\n            const res = await myApi.send('/customers', 'POST', customer)\n            dispatch({type: \"SET_USER_SESSION\", payload: res})\n        } catch (err) {\n            return(err)\n        }\n    },\n\n    logout(dispatch) {\n        console.log('LOGGING_OUT')\n        auth.clearUser()\n        dispatch({type: 'END_USER_SESSION'})\n    }\n}\n","import styled, { css } from 'styled-components'\nimport * as vars from '../variables'\n\nconst  WxButton = styled.button`\n    transition: all 0.3s ease-out;\n    position: relative;\n    padding: 8px 25px;\n    border-radius: 50px;\n    background-color: ${vars.palette.colorGray10};\n    border: none;\n    color: white;\n    font-weight: 400;\n    cursor: pointer;\n    z-index: 1000;\n    overflow: hidden;\n    margin: 0px 10px;\n    ${props => props.width && css`\n        width: props.width !important;\n    `}\n    & .button-content >* {\n        font-weight: 400;\n        font-size: 18px;\n    }\n    ${props => props.fixed && css`\n        min-width: 190px;\n        max-height: 42px;\n        `}\n    ${props => props.big && css`\n        font-size: 28px;\n        min-height: 50px;\n        font-weight: 600;\n        padding: 8px 50px;\n        & .button-content {\n            height: 70px;\n            transition: all 0.1s ease-in;\n            display: flex;\n            flex-direction: column;\n            justify-content: space-between;\n            transform: translateY(5px);\n        }\n        & .button-content >* {\n            font-weight: 600;\n            font-size: 20px;\n        }\n            &:hover {\n                background-color: ${vars.palette.secondaryColor1};\n            }\n\n        &:hover .button-content {\n            transform: translateY(-37px);\n        }\n\n        `}\n        ${props => props.xl && css`\n            min-height: 62px;\n            min-width: 240px;\n            border-radius: 0px 50px 50px 0px;\n            padding: 5px 20px;\n            transition: all 0.5s ease-in;\n            &:hover {\n                background-color: ${vars.palette.secondaryColor1};\n            }\n            &:hover .button-content {\n                transform: translateY(5px);\n            }\n        `}\n    ${props => props.med && css`\n        font-size: 24px;\n        font-weight: 500;\n        & .button-content {\n            height: 70px;\n            transition: all 0.1s ease-in;\n            display: flex;\n            flex-direction: column;\n            justify-content: space-between;\n            transform: translateY(1px);\n        }\n        & .button-content >* {\n            font-weight: 600;\n            font-size: 20px;\n        }\n\n        &:hover .button-content {\n            transform: translateY(-39px);\n        }\n        `}\n    ${props => props.sml && css`\n        font-size: 18px;\n        font-weight: 400;\n        & .button-content {\n            height: 70px;\n            transition: all 0.1s ease-in;\n            display: flex;\n            flex-direction: column;\n            justify-content: space-between;\n            transform: translateY(3px);\n        }\n        & .button-content >* {\n            font-weight: 400;\n            font-size: 18px;\n        }\n\n        &:hover .button-content {\n            transform: translateY(-39px);\n        }\n        `}\n    ${props => props.disabled && css`\n        opacity: 0.3;\n        `}\n    ${props => props.primary && css`\n        background-color: ${vars.palette.secondayColor}\n    `}\n    ${props => props.secondary && css`\n        background-color: ${vars.palette.primaryColor};\n    `}\n    ${props => props.tertiary && css `\n        background-color: ${vars.palette.tertiaryColor}\n    `}\n    ${'' /* &:hover .button-content {\n        transition: all 0.1s ease-in-out;\n    } */}\n`\n\n\nexport default WxButton;","import React, { useEffect, useState, useReducer } from 'react'\nimport { useDispatch, useSelector} from 'react-redux'\nimport { Section } from '../styles/layout'\nimport { OrderListItem } from '../components/admin'\nimport { myApi } from '../helpers'\nimport * as fn from '../helpers/functions'\nimport  WxButton from '../styles/components/button'\n\nconst AdminPage = () => {\n\n    const orders = useSelector((state) => state.orders.orders)\n\n    const initialState = {\n        numberPerPage: 6,\n        pageCount: 1,\n        currentData: [] \n    }\n\n    const paginationReducer = (state=initialState, action) => {\n        console.log(\"PAGE REDUCER \", action.payload)\n        switch(action.type) {\n            case 'GET_DATA':\n                return {\n                    ...state,\n                    currentData: action.payload\n                }\n            case 'PREV_PAGE':\n                return {\n                    ...state,\n                    pageCount: state.pageCount - 1\n                }\n            case 'NEXT_PAGE':\n                return {\n                    ...state,\n                    pageCount: state.pageCount + 1\n                }\n            case 'SET_PAGE':\n                return {\n                    ...state,\n                    pageCount: action.payload\n                }\n                default:\n                return state\n        }\n    }\n    const [ paginationState, paginationDispatch] = useReducer(paginationReducer, initialState)\n\n\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        callApi()\n    }, [])\n\n    useEffect(() => {\n        if (orders.length > 0) {\n            const paginatedOrders = orders.slice((paginationState.pageCount - 1) * paginationState.numberPerPage, paginationState.pageCount * paginationState.numberPerPage)\n            console.log(\"Mounted paginated \", paginatedOrders)\n            paginationDispatch({type: 'GET_DATA', payload: paginatedOrders})\n            console.log(\"MOUNTED state \", paginationState)\n        }\n        console.log(\"Mounted: \", orders, paginationState)\n    }, [orders, paginationState.pageCount])\n\n\n    const renderOrderList = (data) => {\n        return data.length > 0 && data.sort((a,b) => a.createdAt - b.createdAt).map((order, i) => (\n            <OrderListItem order={order} key={i} />\n        ))\n    }\n\n    const renderButtons = (data) => {\n        const { pageCount } = paginationState\n        const numberOfPages = Math.round(data.length / paginationState.numberPerPage) + 1\n        return (\n            <>\n           { paginationState.pageCount > 1 && <WxButton secondary onClick={() => paginationDispatch({type: 'PREV_PAGE'})}>PREV</WxButton>}\n            {  numberOfPages > 0 && new Array(numberOfPages).fill().map((a, index) => \n                pageCount === index+1 ? <WxButton primary sml onClick={() => { paginationDispatch({type: 'SET_PAGE', payload: index+1})}}>{index+1}</WxButton>\n                :<WxButton sml onClick={() => { paginationDispatch({type: 'SET_PAGE', payload: index+1})}}>{index+1}</WxButton>\n             )}\n           { paginationState.pageCount < numberOfPages && <WxButton secondary=\"true\" onClick={() => paginationDispatch({type: 'NEXT_PAGE'})}>NEXT</WxButton>}\n            </>\n        )\n    }\n\n    const callApi = async () => {\n        const orders = await myApi.send('/orders', 'GET', undefined, 'public')\n        dispatch({ type: 'GET_ORDERS', payload: orders })\n    }\n    return (\n        <Section light>\n            <h1>Orders</h1>\n            <div style={{ display: 'flex', justifyContent: 'space-around', alignContent: 'right', marginBottom: 20 }}>\n                <div>\n                    Date\n            </div>\n                <div>Amount</div>\n                <div>Customer</div>\n                <div>Shipping</div>\n                <div></div>\n            </div>\n            {\n                paginationState.currentData.length > 0 && renderOrderList(paginationState.currentData)\n            }\n            <div style={{display: 'flex'}}>\n                {\n                    orders.length > 0 && renderButtons(orders)\n                }\n            </div>\n        </Section>\n    )\n}\n\nexport default AdminPage","import styled, { css } from 'styled-components';\nimport * as vars from './variables'\n\nexport const SectionHeading = styled.h1`\n    text-align: center;\n    padding-top: 40px;\n    height: 45.2px;\n    font-size: clamp(2rem, 5vw, 3rem);\n    font-weight: 400;\n    color: ${vars.palette.colorGray4};\n    background-color: white;\n    z-index: 21000;\n    ${props => props.light && css`\n        color: white;\n        background-color: ${vars.palette.primaryColor};\n        padding-top: 0px;\n        height: 19px;\n    `}\n`\n\nexport const BannerHeading = styled.h1`\n    margin-top: 50px;\n    text-align: left;\n    font-size: 58px;\n    font-weight: 600;\n    color: white;\n    line-height: 100%;\n`\nexport const BannerHeading2 = styled.h3`\n    font-size: 32px;\n    color: white;\n    font-weight: 400;\n    line-height: 200%;\n`\nexport const Heading1 = styled.h1`\n    font-size: 3rem;\n    font-weight: 600;\n    margin-bottom: 5px;\n    color: ${vars.palette.colorGray3};\n    ${props => props.light && css`\n        color: white;\n    `}\n`\nexport const Heading2 = styled.h2`\n    font-size: 1.75rem;\n    ${'' /* line-height: 20px; */}\n    font-weight: 400;\n    margin-bottom: 5px;\n    color: ${vars.palette.colorGray4};\n    ${props => props.dark && css`\n        color: ${vars.palette.colorGray1};\n    ` }\n`\n\nexport const Heading3 = styled.h1`\n    font-size: 1.375rem;\n    font-weight: 600;\n    margin-bottom: 5px;\n    color: ${vars.palette.colorGray3};\n    ${props => props.light && css`\n        color: white;\n    `}\n`\nexport const SubHeading1 = styled.h3`\n    font-size: 1.75rem;\n    font-weight: 400;\n    margin-bottom: 15px;\n    color: ${vars.palette.colorGray6};\n`\n\nexport const Paragraph = styled.p`\n    font-size: 1.25rem;\n    font-weight: 400;\n    margin-bottom: 20px;\n    margin-top: 20px;\n    font-style: italic;\n    ${props => props.sml && `\n        font-size: 16px;\n        margin-bottom: 5px;\n        margin-top: 5px;\n    `}\n    ${props => props.narrow &&`\n        margin-bottom: 20px;\n        margin-top: 20px;\n    `}\n    ${props => props.centered &&`\n        text-align: center;\n    `}\n    color: ${vars.palette.colorGray3};\n    ${props => props.big && css `\n        font-size: 24px;\n        color: ${vars.palette.colorGray4};\n        font-weight: 600;\n    `}\n    ${props => props.danger && css`\n            color: red;\n    `}\n    ${props => props.heavy&& css`\n            font-weight: 600;\n            margin-bottom: 10px;\n    `}\n`","const initialState = {\n    step: 1\n}\n\nconst checkoutReducer = (state, action) => {\n    switch(action.type) {\n        case 'STANDARD_CHECKOUT':\n        return {\n            ...state,\n            authenticated: false,\n            guest: null,\n            step: 1\n        }\n        case 'GUEST_CHECKOUT':\n        return {\n            ...state,\n            guest: true,\n            step: 1\n        }\n        case 'NEXT_STEP':\n        return {\n            ...state,\n            step: state.step + 1\n        }\n        case 'PREV_STEP':\n            return {\n                ...state,\n                step: state.step - 1\n            }\n        case \"LOGGING_IN\":\n            return {\n                ...state,\n                authenticated: false,\n                // guest: false,\n                loading: true,\n            }\n        case \"LOGIN_FAIL\":\n            return {\n                ...state,\n                loading: false,\n                step: 1,\n                guest: null,\n                errorMsg: action.payload,\n                authenticated: false\n            }\n        case \"LOGGED_IN\":\n            return {\n                ...state,\n                authenticated: true,\n                guest: false,\n                loading: false,\n                fields: {}\n            }\n        case \"CHECKOUT_SUCCESS\": \n            return {\n                ...state,\n                step: 4,\n                loading: false\n            }\n        case \"SET_POSTAGE\":\n            return {\n                ...state,\n                loading: false,\n                postage: action.payload\n            }\n\n        case 'UPDATE_FIELD':\n            console.log(\"UPDATING IN REDUCER\", action.fieldName, action.fieldValue)\n            return {\n                ...state,\n            fields: {\n                         ...state.fields,\n                         [action.fieldName] : action.fieldValue\n                   }\n                }\n        case 'CLEAR_FIELDS': \n                return {\n                    ...state,\n                    fields: {\n                    ...state.fields,\n                        password: '',\n                        username: '',\n                        identifier: ''\n                    }\n                }\n        default:\n            return state\n    }\n}\n\nexport default checkoutReducer","import React from 'react'\nimport WxButton from '../../styles/components/button'\nimport { Check } from 'react-feather'\nimport Loader from 'react-loader-spinner'\n\nconst AnimatedButton = ({...props}) => {\n\n  const renderLoader = () => {\n      return (\n        <Loader\n            type=\"ThreeDots\"\n            color=\"#FFFFFF\"\n            height={29}\n            width={29}\n            timeout={30000} //3 secs\n        />\n      )\n  }\n    return (\n        <>\n        {props.withIcon ? \n        <div onClick={() => props.handleClick()}>\n            {props.children}\n        </div>\n        :\n        <WxButton fixed {...props} onClick={() => props.handleClick()} >\n          <div className=\"button-content\">\n            {props.styled && \n              <div>\n                {props.children}\n              </div>\n            }\n                <div>\n                    {props.loading === true ? renderLoader() : props.text }\n                </div>\n                <div>\n                    {props.children || <Check />}\n                </div> \n           </div>\n        </WxButton>\n        }\n        </>\n    )\n}\n\n  AnimatedButton.defaultProps = {\n    handleClick: () => {},\n    loading: 'false'\n}\n\nexport default AnimatedButton\n","import React, { useEffect, useState } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport styled from 'styled-components'\nimport Button from '../../styles/components/button'\nimport AnimatedButton from '../ui/AnimatedButton'\nimport Loader from 'react-loader-spinner'\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\"\nimport { ShoppingCart, Trash2 } from 'react-feather'\n\nconst AddToCart = props  => {\n    \n    const { basket } = useSelector(state => state.basket)\n\n    const dispatch = useDispatch()\n    const [ currentCart, setCurrentCart ] = useState([])\n    const [ loading, setLoading ] = useState(false)\n    const [ added, setAdded ] = useState(false)\n    const { _id, product_name, product_short_description, product_price, product_picture_1, product_discount } = props.product\n    const { quantity = 1} = props\n  useEffect(() => {\n    if (process.browser) {\n      const cartInStorage = localStorage.getItem('soap-cart')\n        if (cartInStorage) {\n          setCurrentCart(JSON.parse(cartInStorage))\n          dispatch({type: 'SET_INITIAL_BASKET', payload: JSON.parse(cartInStorage)})\n        }\n    }\n  }, [])\n\n  const renderLoader = () => {\n      return (\n        <Loader\n            type=\"ThreeDots\"\n            color=\"#FFFFFF\"\n            height={29}\n            width={29}\n            timeout={30000} //3 secs\n        />\n      )\n  }\n\n  const checkIfInCart = (_id) => {\n        //  return  currentCart.filter(item => item._id === _id)\n         return  basket.products.filter(item => item._id === _id)\n  }\n\n  const removeFromCart = () => {\n            const itemsInCart = checkIfInCart(_id)\n        // find index of item in basket array\n            const newCartArray = basket.products\n            const itemIndex = newCartArray.findIndex(item => item._id === _id)\n            const item = newCartArray[itemIndex]\n          if(itemsInCart[0].product_qty == 1) {\n            const newArray = newCartArray.filter(el => el != item)\n            dispatch({type: 'REMOVE_FROM_BASKET', payload: item})\n            localStorage.setItem('soap-cart', JSON.stringify(newArray))\n          } else {\n            item.product_qty--\n            item.total_price = parseFloat(item.product_price * item.product_qty)\n            setCurrentCart(newCartArray)\n            dispatch({type: 'ADD_TO_BASKET', payload: newCartArray})\n            localStorage.setItem('soap-cart', JSON.stringify(newCartArray))\n          }\n  }\n\n    const addToCart = () => {\n\n        setLoading(true)\n        setTimeout(() => {\n        console.log(quantity)\n       \n      const adjustedPrice = parseFloat(product_price - (product_price * product_discount) / 100)\n\n        const newProduct = {\n          _id,\n          product_name,\n          product_description: product_short_description,\n          product_picture_1: product_picture_1.url,\n          product_price: adjustedPrice,\n          product_qty: quantity,\n          total_price: adjustedPrice\n        }\n\n      if ( currentCart.length === 0 ) {\n        setCurrentCart([newProduct])\n          dispatch({type: 'ADD_TO_BASKET', payload: [newProduct]})\n          localStorage.setItem('soap-cart', JSON.stringify([newProduct]))\n      } else {\n          let newCartArray = basket.products\n         const productInCart = checkIfInCart(_id)\n         if (productInCart.length > 0) {\n            const itemIndex = newCartArray.findIndex(item => item._id === _id)\n            const item = newCartArray[itemIndex]\n            item.product_qty += quantity \n            item.total_price = parseFloat(item.product_price * item.product_qty)\n            setCurrentCart(newCartArray)\n            dispatch({type: 'ADD_TO_BASKET', payload: newCartArray})\n            localStorage.setItem('soap-cart', JSON.stringify(newCartArray))\n         } else {\n            const newCartArray = [...currentCart, newProduct]\n            localStorage.setItem('soap-cart', JSON.stringify(newCartArray))\n            setCurrentCart([...currentCart, newProduct])\n            dispatch({type: 'ADD_TO_BASKET', payload: newCartArray})\n         }\n      }\n   setLoading(false)\n   setAdded(true)\n        }, 2000)\n  }\n\n    return (\n        <>\n        {(props.function === 'add' && !props.icon) && \n\n        <AnimatedButton primary med fixed \n            withIcon={props.icon}\n            style={{maxWidth: 200}} \n            handleClick={addToCart} \n            text={!added ? 'Add to cart' : 'Add more'}\n        >\n            {loading &&  renderLoader() }\n            {!loading && <ShoppingCart />}\n        </AnimatedButton>\n        }\n        { (!props.icon && !props.function === 'add') &&\n        <AnimatedButton primary med fixed \n            withIcon={props.icon}\n            style={{maxWidth: 200}} \n            handleClick={removeFromCart} \n            text={'Remove'}\n        >\n            {loading &&  renderLoader() }\n            {!loading && <Trash2/>}\n        </AnimatedButton>\n        }\n        {props.icon && props.function === 'add' ?\n          <IconButton handleClick onClick={() => addToCart()}>\n            {props.children}\n          </IconButton>\n          :\n          <IconButton onClick={() => removeFromCart()}>\n            {props.children}\n          </IconButton>\n        }\n\n        </>\n    )\n}\n\nexport default AddToCart\n\nconst IconButton = styled.div`\n  cursor: pointer;\n`","import styled, { css } from 'styled-components'\nimport * as vars from '../variables'\n\nexport const CategoryMenu = styled.div`\n    max-width: 400px;\n    ${'' /* height: 100px; */}\n    ${'' /* background-color: white; */}\n    background-color: ${vars.palette.secondayColor};\n    z-index: 3000;\n    position: absolute;\n    top: 60px;\n    border-radius: 20px;\n    box-shadow: 4px 4px 12px rgba(0,0,0, 0.2);\n    transform: translateX(-150px);\n    color: white;\n    padding: 20px 20px;\n    & ul {\n        list-style: none;\n        margin-left: 20px;\n        display: flex;\n        flex-direction: row;\n        max-width: 90%;\n        justify-content: space-between;\n        flex-flow: wrap;\n    }\n\n    & ul > li {\n        font-size: 24px;\n        margin-top: 10px;\n        margin-right: 10px;\n    }\n`\nexport const Pointer = styled.div`\n    width: 20px;\n    height: 20px;\n    z-index: 2000;\n    ${'' /* background-color: white; */}\n    background-color: ${vars.palette.secondayColor};\n    margin-left: 53%;\n    margin-top: -25px;\n    transform: rotate(45deg);\n`","import React, { useState } from \"react\";\nimport { CategoryMenu, Pointer } from \"../../styles/ui/dropMenu\";\nimport PageLink from \"./PageLink\";\nimport { Heading1, Heading2, Paragraph } from \"../../styles/typography\";\n\nconst DropDownMenu = (props) => {\n  const { closeMenu, menuData, title } = props;\n  console.log(\"MENU DATA \", props);\n  return (\n    <>\n      <CategoryMenu onMouseLeave={closeMenu}>\n        <Pointer />\n        {/* <Heading2 light>{title}</Heading2> */}\n        <ul>\n          {menuData &&\n            menuData.map((el, i) => (\n              <li key={i}>\n                <PageLink color=\"dark\" to={`/category/${el._id}`}>\n                  {el.category_name}\n                </PageLink>\n              </li>\n            ))}\n        </ul>\n      </CategoryMenu>\n    </>\n  );\n};\n\nDropDownMenu.defaultProps = {\n  closeMenu: () => {},\n  menuData: [],\n  title: \"menu\",\n};\n\nexport default DropDownMenu;\n\n","// import { useRouter } from 'next/router'\nimport React from 'react'\nimport { useState, useEffect } from 'react'\nimport { useHistory, useLocation } from 'react-router-dom'\nimport DropDownMenu from '../ui/DropDownMenu'\nimport  * as fn  from '../../helpers/functions'\nimport * as vars from '../../styles/variables'\n\nconst PageLink = ({children, to, withMenu, menuData, menuTitle , color, display }) => {\n    const [hovered, setHovered ] = useState(false)\n    const [showMenu, setShowMenu ] = useState(false)\n    const history = useHistory()\n    const location = useLocation()\n\n    // console.log(\"ROUTING\", \"Location: \", location, \"History: \", history)\n\n    const style = {\n        fontWeight: 600,\n        marginRight: 10,\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        color: (fn.pathMatches(location.pathname) === to && location.pathname !== '/basket') || hovered === true \n        ? `${vars.palette.secondayColor}` \n        : 'black',\n    }\n\n\n    const altStyle = {\n        color: (location.pathname.includes(to) && location.pathname !== '/basket') || hovered === true \n        ? `white` \n        : 'black',\n    }\n\n    const handleMouseOver = () => {\n            setHovered(!hovered)\n            if (withMenu) {\n              setShowMenu(true)\n            }\n    }\n\n    const handleClick = (e) => {\n        e.preventDefault()\n        !display && history.push(to)\n    }\n\n    const closeMenu = () => {\n        setShowMenu(false)\n        console.log(\"COLSING\")\n    }\n\n  return (\n    <>\n    {color === 'dark' ? \n      <a href={to} onClick={handleClick} onMouseOver={handleMouseOver} onMouseOut={handleMouseOver} style={style, altStyle }>\n        {children}\n      </a>\n    :\n      <a href={to} onClick={handleClick} onMouseOver={handleMouseOver} onMouseOut={handleMouseOver} style={style }>\n        {children}\n      </a>\n    }\n      {withMenu && showMenu === true ? \n        <DropDownMenu closeMenu={closeMenu} title={menuTitle} menuData={menuData}/> \n        : null\n      }\n    </>\n  )\n}\n\nexport default PageLink\n","import styled, { css } from 'styled-components'\n\nconst ProductFrame = styled.div`\n  &, :after { \n    ${'' /* margin-top: 20px; */}\n    height: 330px;\n    width: 340px;\n    min-width: 340px;\n    border-radius: 80px;\n    background-color: #CCEAE3;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    z-index: 7;\n    transition: all 0.2s ease-in;\n    position: relative;\n    ${props => props.sml && css`\n      height: 70px;\n      max-width: 70px;\n      min-width: 70px;\n      border-radius: 15px\n    `}\n   }\n    &::after {\n        content:''; \n        transform: rotate(20deg);\n         z-index: -10;\n         position: absolute;\n         opacity: 0.3;\n         transition: all .5s ease-in;\n         box-shadow: rgba(149, 220, 203, 0.2) 0px 2px 13px, inset rgba(149, 220, 203, 0.2) 0px -1px 12px;\n    }\n    &:hover {\n        transform: rotate(-4deg);\n    }\n`\n\nexport default ProductFrame;","// import { useRouter } from 'next/router'\nimport React, { useEffect, useState } from 'react'\nimport styled from 'styled-components'\nimport ProductFrame from '../../styles/ui/productFrame'\nimport { Eye } from 'react-feather'\n// import { Router } from 'next/router'\n\nconst ProductItem = (props) => {\n\n    const [ product, setProduct ] = useState({})\n    const [ hovered, setHovered ] = useState(false)\n\n    useEffect(() => {\n    if(props.product) {\n        console.log(\"PRODUCT \", props.product)\n        setProduct(props.product)\n    }\n    }, [props])\n\n\n        const {product_picture_1, product_featured, product_name, product_discount, product_price, _id, categories } = product\n    return (\n        <div style={{display: 'flex', flexDirection: 'column', marginBottom: 25, marginTop: 25}}>\n            <ProductFrame onClick={() => props.clickEvent(_id)} onMouseOver={()=> setHovered(true)} onMouseLeave={() => setHovered(false)}>\n                <img \n                    // src={props.image ? `http://localhost:1337${props.image.url}` : '/noimage.png'} \n                    src={product_picture_1 ? `${product_picture_1.url}` : '/noimage.png'} \n                    alt=\"product-image\" \n                    style={{maxHeight: 250}}    \n                    />\n                <Eye color='white' size={36} style={{position: 'fixed', bottom: 30, right: 40, visibility: hovered ? 'visible' : 'hidden', transition: 'all 0.5 ease-in'}}/>\n            </ProductFrame>\n            <Pill>\n               <h2>\n                {props.info}\n               </h2> \n            </Pill>\n            <h2 style={{marginLeft: 10, fontSize: 24, marginTop: -15, marginBottom: 10}}>\n                {product_name && product_name}\n            </h2>\n            <Prices>\n                <h3 style={{zIndex: 300, color: 'white', marginLeft: 15, fontSize: 20}}>{categories && categories[0].category_name}</h3>\n                    {product_discount > 0 ? <h3 style={{opacity: 0.3, marginLeft: 45, fontSize: 20, textDecoration: 'line-through'}}>&pound;  {product_price.toFixed(2)}</h3> : null}\n                <h3 style={{fontSize: 20}}>\n                    &pound;{(product_price) - (product_price * product_discount / 100).toFixed(2)}\n                </h3>\n            </Prices>\n        </div>\n    )\n}\n export default ProductItem\n\n const Pill = styled.div`\n       &, ::after {\n        position: relative;\n        text-align: center;\n        padding: 15px 15px;\n        border-radius: 50px;\n        max-height: 20px;\n        max-width: 60px;\n        color: white;\n        background-color: #F9B233;\n        z-index: 10;\n        transform: translate(300px, -280px);\n       }\n `\n\n const Prices = styled.div`\n        &, ::before{\n        position: relative;\n        padding: 15px 25px 15px 0px ;\n        border-radius: 50px;\n        max-width: 360px;\n        min-width: 360px;\n        height: 20px;\n        background-color: #F6F2F2;\n        display: flex;\n        ${'' /* margin-top: 10px; */}\n        ${'' /* z-index: 200; */}\n        justify-content: space-between;\n        }\n        &::before {\n            content: '';\n            background-color: #EFB4F9;\n            min-width: 130px;\n            transform: translateY(-14px);\n            ${'' /* z-index: 300; */}\n            position: absolute;\n            color: white;\n        }\n\n        `","import React, { useEffect, useState } from \"react\";\nimport styled, { css } from \"styled-components\";\nimport ProductItem from \"./ProductItem\";\nimport { SlideGrid } from \"../../styles/layout\";\n\nconst ProductSlider = ({ data, handleClick, perPage, ...rest }) => {\n  // TODO: Add dots with data array slice\n\n  const [sliceArray, setSliceArray] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const productsPerPage = perPage;\nconsole.log(\"DATA LENGTH\", data.length)\n\n  useEffect(() => {\n    if (data && data.length > 0) {\n      const slices = data.length / productsPerPage;\n      setSliceArray([...Array(Math.ceil(slices))]);\n    }\n  }, [data, currentPage]);\n\n  useEffect(() => {\n    console.log('SLICE', sliceArray)\n  }, [sliceArray])\n\n  const selectPage = (e) => {\n    setCurrentPage(e.target.value);\n  };\n\n\n  return (\n    <>\n     { data &&\n      <SlideGrid {...rest} mb={'100px'}>\n        {data.length > 0 ? \n          data\n            .slice(\n             // currentPage === 1 ? 0 : currentPage * productsPerPage,\n             // productsPerPage\n             (currentPage - 1) * productsPerPage, currentPage * productsPerPage\n            )\n            .map((product, i) => (\n              <ProductItem\n                product={product}\n                info=\"New\"\n                key={i}\n                clickEvent={handleClick}\n              />\n            )) : [data].map((product, i) => (\n\n              <ProductItem\n                product={product}\n                info=\"New\"\n                key={i}\n                clickEvent={handleClick}\n                />\n            ))}\n      </SlideGrid >\n}\n{ data && \n\n      <Dots>\n        {data.length > 3 &&\n          sliceArray.map((el, i) => (\n            <Dot\n              page={currentPage}\n              value={i + 1}\n              key={i}\n              onClick={(e) => selectPage(e)}\n            />\n          ))}\n      </Dots>\n}\n    </>\n  );\n};\n\nexport default ProductSlider;\n\nconst Dots = styled.div`\n  display: flex;\n  height: 50px;\n  width: 100%;\n  flex-direction: row;\n  justify-content: center;\n  z-index: 9;\n  transform: translateY(-90px);\n`;\nconst Dot = styled.button`\n  border: none;\n  border-radius: 50%;\n  background-color: gray;\n  cursor: pointer;\n  width: 15px;\n  height: 15px;\n  margin: 8px;\n  ${(props) =>\n    props.page == props.value &&\n    css`\n      background-color: black;\n    `}\n`;\n\n","import styled, { css, keyframes } from 'styled-components'\nimport * as vars from '../../styles/variables'\n\n\nconst Bubble = styled.div`\n    height: 100px;\n    width: 100px;\n    border-radius: 50%;\n    background-color: white;\n    opacity: 0.5;\n    position: absolute;\n    z-index: 1;\n    ${props => props.dark && css`\n        background-color: ${vars.palette.primaryColor1};\n        ${'' /* background-color: red; */}\n    `}\n    ${props => props.t && css`\n        top: ${props.t}px;\n    `}\n    ${props => props.y && css`\n        transform: translateY(${props.y});\n    `}\n    ${props => props.x && css`\n         transform: translateX(${props.x}px);\n    `}\n    ${props => props.opac && css`\n        opacity: ${props.opac};\n    `}\n    ${props => props.size && css`\n        width: ${props.size}px;\n        height: ${props.size}px;\n    `}\n`\n\n\nexport default Bubble\n","import styled, { css } from 'styled-components'\nimport * as vars from '../variables'\n\nconst Step = styled.div`\n&{\n        height: 36px;\n        width: 36px;\n        border-radius: 50%;\n        background-color: ${vars.palette.colorGray6};\n        position: relative;\n        display: inline-block;\n        margin-right: 150px;\n        flex-shrink: 4;\n        ${props => props.step >= props.number && css`\n            background-color: ${vars.palette.primaryColor};\n           `}\n        }\n}\n    &::before {\n        content: '';\n        position: absolute;\n        border-radius: 50%;\n        border: 3px solid white;\n        width: 22px;\n        height: 22px;\n        top: 4px;\n        left: 4px;\n    }\n    &::after {\n        content: '';\n        width: 150px;\n        height: 3px;\n        background-color: ${vars.palette.colorGray6};\n        position: absolute;\n        transform: translate(-168px, 15px);\n\n        ${props => (props.number === 1) && css`\n            width: 0px;\n           ` }\n\n        ${props => props.step >= props.number && css`\n            background-color: ${vars.palette.primaryColor};\n            }\n            `\n    }\n`\n\n\nexport default Step","import styled, { css } from 'styled-components'\nimport * as vars from '../variables'\n\nconst TextInput = styled.input`\n    height: 55px;\n    max-width: 100%;\n    display: inline-block;\n    border: none;\n    border-radius: 50px;\n    z-index: 1000;\n    background-color: ${vars.palette.colorGray8};\n    color: ${vars.palette.colorGray4};\n    padding: 0px 50px;\n    margin: 0px 5px 10px 0px;\n    min-width: 100px;\n    ${props => props.inline && css`\n        width: 100%; \n    `}\n    ${props => props.withButton && css`\n        height: 50px;\n    `}\n    ${props => props.valid === false && css`\n        height: 48px;\n        color: orange;\n    `}\n    ${props => props.big && css `\n        height: 62px;\n        font-size: 28px;\n        ::placeholder {\n            color: ${vars.palette.colorGray10};\n        }\n    `} \n`\n\nexport default TextInput","import styled from 'styled-components'\n\nconst LinkButton = styled.button`\nbackground: none!important;\nborder: none;\npadding: 0!important;\ncolor: #069;\ntext-decoration: underline;\ncursor: pointer;\n`\nexport default LinkButton","import styled from 'styled-components'\n\nconst CategoryFrame = styled.div`\n    z-index: 100000;\n    position: relative;\n    width: 300px;\n    height: 300px;\n    border: 12px solid white;\n    border-radius: 75px;\n    background-color: green;\n    transform: rotate(-10deg) translateY(-300px);\n    background-color: #CCEAE3;\n    margin-left: 100px;\n    cursor: pointer;\n    text-align:center;\n    ${props => props.sm == true && `\n        min-width: 100px;\n        width: 100px;\n        height: 100px;\n        border-radius: 25px;\n        border: 7px solid white;\n        margin-left: 2.0vw;\n        &:first-of-type {\n            margin-left: 95px;\n        }\n    `}\n    transition: all 0.2s ease-in;\n        &:hover {\n            transform: rotate(-10deg) translateY(-300px) scale(1.03);\n        }\n`\n\nexport default CategoryFrame","import React from 'react'\nimport { Step  } from '../../styles/ui/'\nimport { Paragraph } from '../../styles/typography'\n\nconst WxStep = (props) => {\n    return (\n        < >\n            <Step {...props}/>\n            <div style={{ display: 'inline-block', transform: 'translate(-200px, 50px)', position: 'absolute', marginTop: 10}}>\n            <Paragraph>\n                {props.label}\n            </Paragraph>\n        </div>\n        </>\n    )\n}\n\nexport default WxStep","import React, { forwardRef } from 'react' \nimport { Paragraph } from '../../styles/typography'\nimport { TextInput } from '../../styles/ui'\nimport { AnimatedButton } from '../ui'\nimport Loader from 'react-loader-spinner'\n// import WxButton from \"../styles/components/button\";\n\nconst SimpleTextInput = ({withBigButton, submitHandler, handleChange, label, withButton, buttonText, cols, direction, value, valid, loading, sm , ...rest }, ref) => {\n    console.log(\"REF \", ref)\n  const renderLoader = () => {\n      return (\n        <Loader\n            type=\"ThreeDots\"\n            color=\"#FFFFFF\"\n            height={49}\n            width={29}\n            timeout={30000} //3 secs\n        />\n      )\n  }\n\n    return (\n        <>\n        { withButton && \n        <div style={{display: 'flex', flexDirection: 'column' , width: '100%'}}>\n            <Paragraph  big style={{marginLeft: 10}}>\n                {label}\n            </Paragraph>\n            <div style={{display: 'flex', flexDirection: 'row'  }}>\n                <TextInput \n                     value={ value} \n                     ref={ref} \n                     inline {...rest} \n                     valid={valid} \n                     withButton={withButton} \n                     onChange={(e) => handleChange(e)}\n                     onFocus={() => console.log(\"focussed\")} \n                 />\n                 <AnimatedButton primary big width={'50px'} text={buttonText} handleClick={submitHandler} style={{ width: 100, display: 'inline-block' , transform: 'translateX(-60px)'}}/> \n            </div>\n        </div>\n        }\n        {\n            withBigButton &&\n        <div style={{display: 'flex', flexDirection: 'column' , width: '100%'}}>\n            <Paragraph  big style={{marginRight: 10, textAlign: 'center'}}>\n                {label}\n            </Paragraph>\n                <form onSubmit={(e) => {\n                    e.preventDefault()\n                    submitHandler()\n                }}>\n        <div style={{display: 'flex', flexDirection: 'row'  }}>\n\n                        <TextInput value={value} ref={ref} inline {...rest} valid={valid} value={value} withButton={withButton} onChange={(e) => handleChange(e)} onFocus={() => console.log(\"focussed\")}  />\n                        <AnimatedButton width={'50px'} primary big xl styled type=\"submit\" style={{ width: 100, display: 'inline-block' , transform: 'translateX(-60px)'}}> \n                        { loading === false ?\n                             <div className=\"script-font\"> {buttonText}</div>\n                            : \n                                renderLoader()\n                         } \n                        </AnimatedButton>\n                    </div>\n                </form>\n        </div>\n        }\n        {\n         !withButton && !withBigButton &&\n            <div style={{display: 'flex', flexDirection: 'column',  width: cols }}>\n                <Paragraph style={{marginLeft: 10}}>\n                    {label}\n                </Paragraph>\n                <TextInput value={value} ref={ref} {...rest} withButton={withButton} onChange={(e) => handleChange(e)} onFocus={() => console.log(\"focussed\")}  />\n            </div>\n        }\n        </>\n    )\n}\n\nSimpleTextInput.defaultProps = {\n    withButton: false,\n    withBigButton: false,\n    value: '',\n    loading: false\n}\n\n\nexport default forwardRef(SimpleTextInput)","import React, {useState, useEffect} from 'react'\nimport styled, {css} from 'styled-components'\nimport { SubHeading1, Paragraph } from '../../styles/typography'\n\nconst ShippingOption = ({option, checked, selected, ...rest}) => {\n    \n   const handleSelection = (_id) => {\n       console.log(\"touched\", _id)\n       checked(_id)\n   }\n    return (\n       <Label htmlFor={option.id} selected={selected === option.id}>\n       <Option\n        type='radio'\n        name='delivery'\n        id={option.id}\n        value={option.id}\n        onChange={() => handleSelection(option.id)}\n       />\n       <CarrierOption>\n            <img \n                src={option.shipping_image.url}\n                style={{maxHeight: 60, maxWidth: 100, marginRight: 20}}\n            />\n            <Paragraph sml>\n                {option.shipping_carrier} - {option.shipping_description}<br />\n                Price:  &pound; {option.shipping_cost.toFixed(2)}\n            </Paragraph>\n       </CarrierOption>\n       </Label>\n    )\n}\n\nexport default ShippingOption\n\nconst Option = styled.input`\n     opacity: 0;\n     position: fixed;\n     width: 0;\n`\n\nconst Label = styled.label`\n    width: 550px;\n    height: 60px;\n    padding: 10px 40px;\n    border: 3px #F7F2F2 solid;\n    border-radius: 10px;\n    margin: 10px 0px 10px 0px;\n    cursor: pointer;\n    ${props => props.selected && css`\n        border: 2px #79CBB7 solid;\n    `}\n`\nconst CarrierOption = styled.div`\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-start;\n    align-items: center;\n`\n","import React from 'react'\nimport styled from 'styled-components'\nimport { useHistory } from 'react-router-dom'\nimport { CategoryFrame } from '../../styles/ui'\nimport { Heading2 } from '../../styles/typography'\nimport * as vars from '../../styles/variables'\n\nconst Category = ({name, id, image, viewPort })=> {\n    const history = useHistory()\n\n    const navigate = (id) => {\n        history.push(`/category/${id}`)\n    }\n\n    return (\n        <>\n        <CategoryFrame onClick={() => navigate(id)} sm={viewPort < 916 ? true : false} >\n            <img src={image} \n            style={{height: viewPort < 916 ? 100 : 250,\n             transform: viewPort < 916 ? 'rotate(10deg) translate(-10px, 5px)':'rotate(10deg) translateY(20px);' }} />\n            <div style={{transform: 'translateY(150px) rotate(10deg)', display: 'flex', alignItems: 'center'}}>\n            { viewPort > 916 &&\n            <>\n            <Dot name={name} />\n                <Heading2>\n                    {name}\n                </Heading2>\n            </>\n            }\n            </div>\n        </CategoryFrame>   \n        </>\n    )\n}\n\nexport default Category\n\nconst Dot = styled.div`\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n    background-color:${vars.palette.secondayColor};\n    margin-right: 20px;\n    ${props => props.name === 'Soaps' &&`\n        background-color: ${vars.palette.tertiaryColor}\n    `}\n    ${props => props.name === 'Shampoo' &&`\n        background-color: ${vars.palette.primaryColor}\n    `}\n    ${props => props.viewPort < 400 &&`\n        transform: translateY(-100px);\n\n    `}\n`","import React from 'react';\nimport styled, { keyframes } from 'styled-components'\n\n\nconst PageLoader = () => {\n    return (\n        <LoadingPage>\n            <Loader>\n                <img src='/logo-big.svg' alt='loading..' />\n            </Loader>\n        </LoadingPage>\n    )\n}\n\nconst breathe = keyframes`\n    0% { opacity: 0.3 }\n    50% { opacity: 1; }\n    100% { opacity: 0.3; }\n`\n\nconst LoadingPage = styled.div`\n    position: absolute;\n    top: 0;\n    z-index: 10000;\n    min-height: 100vh;\n    min-width: 100vw;\n    background-color: white;\n`\nconst Loader = styled.div`\n    position: absolute;\n    padding: 0px;\n    margin: 0px;\n    left: 50%;\n    top: 50%;\n    margin-right: -50%;\n    transform: translate(-50%, -50%);\n    text-align: center;\n    animation: ${breathe} 3s infinite ease-out;\n`\n\nexport default PageLoader","import React from 'react'\nimport styled, { css } from 'styled-components'\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { palette } from '../../styles/variables'\n\nconst SideMenu = () => {\n\n    const { showMenu } = useSelector((state) => state.ui)\n\n    return (\n        <SideMenuContainer show={showMenu}>\n            <ul>\n                <li>Creams</li>\n                <li>Soaps</li>\n                <li>Shampoos</li>\n            </ul>\n        </SideMenuContainer>\n    )\n}\n\nexport default SideMenu\n\nconst SideMenuContainer = styled.div`\npadding: 150px 0px 150px 10px;\nwidth: 100vw;\nposition: absolute;\ntop: -10px;\nbottom: 0;\nleft: -120vw;\nbackground-color: rgba(250,250,250, 0.9);\nz-index: 1500;\ntransition: all 0.2s ease-in;\nbox-shadow: 20px 10px 8px rgba(0,0,0, 0.2);\nfont-size: 24px;\n${props => props.show === true && css`\n left: 0px;\n`}\n\n& ul {\n    list-style: none;\n    font-size: 25px;\n    margin-left: 20px;\n}\n\n& ul > li {\n    color: ${palette.secondaryColor1}\n    font-size: 1.5rem;\n    margin-top: 10px;\n}\n`","import React, {useReducer, useEffect} from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { WxStep} from '../components/ui'\nimport { SubHeading1 } from '../styles/typography'\nimport { checkoutReducer, LoginForm, EditBilling, ShippingOptions, StripePay, CheckoutSuccess } from './'\nimport styled from 'styled-components'\nimport { auth, myApi, strapi } from '../helpers/'\nimport { FrameHeader , Frame, FrameBody, Divider} from '../styles/layout'\nimport * as fn from '../helpers/functions'\n\n\n    const steps = [\n        {no: 1, label: 'Account'},   \n        {no: 2, label: 'Shipping'},   \n        {no: 3, label: 'Payment'},   \n        {no: 4, label: 'Success'},   \n    ]\n\n\n    const CheckoutSteps = () => {\n\n    const initialState = {\n        step: 1,\n        authenticated: false,\n        guest: null,\n        loading: false,\n        errorMsg: '',\n        postage: {},\n        fields: {\n            register: false,\n            identifier: '',\n            password: '',\n            password_confirmation: '',\n            username: ''\n        },\n    }\n    const { user } = useSelector(state => state.user)\n    const [cartState, cartDispatch] = useReducer(checkoutReducer, initialState)\n    const { step, authenticated, guest, postage, loading, fields: { email, password, register, username, password_confirmation } } = cartState\n    const dispatch = useDispatch()\n\n        useEffect(() => {\n           const userInfo = auth.getUserInfo()\n           if (!fn.isEmpty(userInfo) ) {\n               cartDispatch({type: 'LOGGED_IN'})\n               const query = `?_where[user._id]=${userInfo._id}`\n             apiCall(query)\n           }\n           console.log(\"USER SESSION \", userInfo)\n\n        }, [,authenticated])\n\n        useEffect(() => {\n            console.log(\"CART DATA IS \", cartState, user)\n        }, [cartState])\n\n        useEffect(() => {\n            window.scrollTo(0, 0);\n        }, [step, guest, authenticated, loading]);\n\n        const apiCall = async(query) => {\n            try {\n                const res = await myApi.send(`/customers${query}`)\n                console.log(\"CUSTOMER INFO \", res[0])\n                dispatch({type: \"SET_USER_SESSION\", payload: res[0] })\n            } catch (err) {\n                console.log(err)\n            }\n        }\n\n    const handleChange = (e) => {\n        const { name, value, type, checked } = e.target\n        if (type === 'checkbox') {\n            cartDispatch({type: 'CLEAR_FIELDS'})\n            cartDispatch({type: 'UPDATE_FIELD', fieldName: name, fieldValue: checked })\n            return\n        }\n            cartDispatch({type: 'UPDATE_FIELD', fieldName: name, fieldValue: value})\n    }\n\n    \n    const handleStrapiLogin = async(e) => {\n        e.preventDefault()\n        cartDispatch({type: 'LOGGING_IN'})\n        if(register === true) {\n            if(password !== password_confirmation) {\n                console.log(\"PASSWORDS MUST MATCH \")\n                return\n            }\n            console.log(\"REGISTERING NEW USER\")\n        const body = {email: email, password: password, username: username};\n            try {\n                await strapi.register(body, dispatch)\n                cartDispatch({type: 'LOGGED_IN'})\n            }catch(err) {\n                console.log(err)\n                cartDispatch({type: 'LOGIN_FAIL', payload: err})\n            }\n\n        } else {\n            console.log(\"LOGGING IN USER with \", email, password)\n            const body = {identifier: email, password: password, username: username};\n            try {\n               const response = await strapi.login(body, dispatch)\n               if (response.status === 400 ) {\n                cartDispatch({type: 'LOGIN_FAIL', payload: response.message})\n               } else {\n                cartDispatch({type: 'LOGGED_IN'})\n               }\n                console.log('LOGIN RESPONSE ', response)\n            } catch (err) {\n                console.log('LOGIN ERROR ', err)\n                cartDispatch({type: 'LOGIN_FAIL', payload: err})\n            }\n        }\n    }\n\n    \n    const buttonClick = (action) => {\n            cartDispatch({type: action})\n    }  \n\n        return (\n            <>\n                <Steps>\n                    {\n                        steps.map(el => \n                        <WxStep label={el.label} step={step} number={el.no} key={el.no}/>\n                        )\n                    }\n                </Steps>\n                { (step === 1 && !authenticated && guest === null) &&\n                    <>\n                        <LoginForm \n                            handleChange={handleChange}\n                            handleLogin={handleStrapiLogin} \n                            dispatch={cartDispatch} \n                            data={cartState.fields}\n                            loading={cartState.loading ? 1 : undefined}\n                            />\n                    </>\n                }\n                {\n                    (step === 1 && authenticated || step === 1 && guest === true) &&\n                    <>\n                        <EditBilling user={user} cartState={cartState} buttonClick={buttonClick} cartDispatch={cartDispatch} />\n                    </>\n                }\n                {\n                    step === 2 && \n                    (\n                        <Frame>\n                            <FrameHeader>\n                                <SubHeading1>\n                                    Choose a Shipping Option\n                                </SubHeading1>\n                                <Divider mb='10px'/>\n                            </FrameHeader>\n                            <FrameBody>\n                                <ShippingOptions dispatch={dispatch} cartDispatch={cartDispatch} />\n                            </FrameBody>\n                        </Frame>\n                    )\n                }\n                {\n                    step === 3 && (\n                        <>\n                        <StripePay cartDispatch={cartDispatch} />\n                        </>\n                    )\n                }\n                {\n                    step === 4 && (\n                        <>\n                            <CheckoutSuccess cartState={cartState}  dispatch={dispatch} />\n                        </>\n                    )\n                }\n            </>\n        )\n    }\n\n   export default CheckoutSteps\n\nconst Steps = styled.div`\n   min-width: 750px;\n   margin-top: 10px;\n   margin-right: auto;\n   margin-left: auto;\n   text-align: center;\n   transform: translateX(80px);\n`\n","import React from 'react'\nimport { AnimatedButton } from './ui'\nimport { Frame, FrameHeader, FrameBody, FrameFooter, Divider, ButtonRow } from '../styles/layout'\nimport { SubHeading1, Paragraph } from '../styles/typography'\n\nconst CheckoutSuccess = ({cartState}) => {\n\n    //TODO:\n    // Delete cart State\n    // remove cart data from local storage\n    localStorage.setItem('soap-cart', JSON.stringify([]))\n    // Send confirmation email with cart details\n\n    return (\n        <Frame>\n            <FrameHeader>\n               <SubHeading1>\n                    Congratulations!!\n               </SubHeading1> \n                    <Divider />\n            </FrameHeader>\n            <FrameBody>\n                <Paragraph>\n                    Thankyou for shopping with the Chunky Soap Company\n                </Paragraph>\n                <Paragraph>\n                    Your order has been successfully processed & a confirmation email\n                    has been sent to your registered email address\n                </Paragraph>\n            </FrameBody>\n            <FrameFooter>\n                <ButtonRow>\n                    {\n                        cartState.authenticated && \n                        <AnimatedButton big secondary text=\"My Account\"></AnimatedButton>\n                    }\n                    <AnimatedButton big text=\"Logout\"></AnimatedButton>\n                </ButtonRow>\n            </FrameFooter>\n        </Frame>\n    )\n}\n\nexport default CheckoutSuccess","import React, {useEffect, useState} from 'react'\nimport { auth } from '../helpers'\n\nconst useIsAuthenticated = props => {\n\n  const [ isAuthenticated, setIsAuthenticated ] = useState(false)\n  useEffect(() => {\n      const authenticated = auth.getToken() !== null\n      console.log(\"AUTH TOKEN HERE \", auth.getToken())\n      setIsAuthenticated(authenticated)\n  }, [])\n\n    return {\n        isAuthenticated\n    }\n}\n\nexport default useIsAuthenticated","import { useState } from 'react'\n\nconst useModal = ({ products }) => {\n    const [ isShowing, setIsShowing ] = useState(false)\n    const [ selectedProduct, setSelectedProduct ] = useState(null)\n\n  const handleClick = (id) => {\n    console.log(\"event\", id);\n    const selected = products.products.filter((product) => product.id === id);\n    setSelectedProduct(selected[0]);\n    console.log(\"SELECTED\", selectedProduct);\n    toggle();\n  };\n\n    const toggle = () => {\n        setIsShowing(!isShowing)\n    }\n\n    return {\n        isShowing,\n        toggle,\n        handleClick,\n        selectedProduct\n    }\n}\n\nexport default useModal","import React from 'react'\nimport { strapi } from '../helpers/'\n\nconst useStrapiLogin = (\n    {\n        dispatch,\n        loginState: {\n             fields:{\n                  email,\n                  password, \n                  register, \n                  username, \n                  password_confirmation\n                }\n            }\n        }\n    ) => {\n        console.log('useStrapiLogin ', register)\n    \n    const handleStrapiLogin = async() => {\n        dispatch({type: 'LOGGING_IN'})\n        if(register === true) {\n            if(password !== password_confirmation) {\n                console.log(\"PASSWORDS MUST MATCH \")\n                return\n            }\n            console.log(\"REGISTERING NEW USER\")\n        const body = {email: email, password: password, username: username};\n           await strapi.register(body, dispatch)\n            dispatch({type: 'LOGGED_IN'})\n\n        } else {\n            console.log(\"LOGGING IN USER with \", email, password)\n            const body = {identifier: email, password: password, username: username};\n            try {\n                await strapi.login(body, dispatch)\n                dispatch({type: 'LOGGED_IN'})\n            } catch (err) {\n                console.log(err)\n                dispatch({type: 'LOGIN_FAIL', payload: err})\n            }\n        }\n    }\n\n    return {\n        handleStrapiLogin,\n        isLoggedIn: false,\n        errorMsg: ''\n    }\n}\n\nexport default useStrapiLogin","import {useEffect, useState} from 'react'\n \nconst useViewportCheck = () => {\n  const [viewport, setViewport] = useState(null)\n \n  useEffect(() => {\n    const handleWindowResize = () => setViewport(window.innerWidth)\n    window.addEventListener('resize', handleWindowResize)\n    return () => window.removeEventListener('resize', handleWindowResize)\n  }, [])\n \n  useEffect(() => {\n      setViewport(window.innerWidth)\n  }, [])\n \n  return {viewport}\n}\n \nexport default useViewportCheck\n","import React, { useEffect, useState, useRef } from 'react'\nimport { SimpleTextInput, AnimatedButton } from '../components/ui'\nimport { ButtonRow, Frame, FrameHeader, FrameBody} from '../styles/layout'\nimport { Heading2 } from '../styles/typography'\nimport forms from '../containers/forms.json'\nimport { ArrowRight, User }from 'react-feather'\nimport { usePrevious, useDynamicRef } from '../hooks'\n\n\nconst LoginForm = (props) => {\n\n// set refs array for form input refs\nconst myRefs = useRef([])\nconst views = forms.views\n\n const [ currentView, setCurrentView ] = useState(null)\n\n    useEffect(() => {\n        let current = props.data.register ? 'register' : 'login' \n        setCurrentView(current)\n        // myRefs.current[0].focus()\n        console.log(\"MYREFS\", myRefs)\n    }, [, props.data.register, myRefs])\n\n    const addToRef = (e) => {\n        console.log(\"ADDING REF\", e)\n    }\n\n    return (\n        <Frame>\n                <Heading2>Sign in to Continue</Heading2>\n                <form \n                    onSubmit={(e) => props.handleLogin(e)}\n                    style={{ marginTop: 30, display: 'flex', width: '100%',flexDirection: 'column'}}\n                >\n                    {\n                        currentView && views[currentView].map((el, i) => (\n                            //TODO: Add value and make controlled\n                            <SimpleTextInput \n                                placeholder = {el.placeholder}\n                                label={el.label}\n                                type={el.type}\n                                name={el.name}\n                                handleChange={props.handleChange}\n                                key={i}\n                                direction={el.direction}\n                                required={el.required}\n                                ref={(e) => (myRefs.current[i] = e)}\n                            />\n                        ))\n                    }\n                        <br/>\n                        <div>\n                            I Don't have an account create one <input type=\"checkbox\" name=\"register\" checked={props.data.register}  onChange={props.handleChange}/>\n                        </div>\n                        <ButtonRow>\n                            <AnimatedButton primary fixed type=\"submit\" text={props.data.register ? \"Register\" : \"Sign In\"} med loading={props.loading ? true : undefined}><User /></AnimatedButton><br />\n                            {props.type !== 'standalone' &&\n                            <AnimatedButton fixed type=\"button\" text=\"Guest Checkout\" loading=\"false\" secondary med handleClick={() => props.dispatch({type: 'GUEST_CHECKOUT'})}><ArrowRight/></AnimatedButton>\n                            }\n                        </ButtonRow>\n                </form>\n        </Frame>\n    )   \n}\n\nexport default LoginForm","import React, { useState, useEffect } from 'react'\nimport { useDispatch } from 'react-redux'\nimport { Frame, FrameBody, FrameHeader, FrameFooter, ButtonRow, Divider } from '../styles/layout'\nimport { SubHeading1, Heading2 } from '../styles/typography'\nimport { AnimatedButton, SimpleTextInput } from '../components/ui'\nimport forms from '../containers/forms.json'\nimport { Edit3, ArrowRight, ArrowLeft } from 'react-feather'\nimport { myApi } from '../helpers/'\nimport * as fn from '../helpers/functions'\nimport { useHistory } from 'react-router'\n\nconst EditBilling = ({user, cartState, cartDispatch, buttonClick}) => {\n\n    const {views} = forms\n    const [ editing, setEditing ] = useState(false)\n    const [ address , setAddress ] = useState({})\n    const [ loading, setLoading ] = useState(false)\n    const { customer_title, customer_firstname, customer_lastname, customer_address1, customer_address2, customer_town, customer_postcode } = user\n    const dispatch = useDispatch()\n    const history = useHistory()\n    console.log(\"USER_ID\", user)\n\n    const handleInputChange = (e) => {\n        const { name, value } = e.target\n        setAddress(values => ({...values, [name]: value}))\n    }\n\n    const goBack = () => {\n        history.goBack()\n    }\n\n    useEffect(() => {\n        console.log(\"USER DETAILS\", user.customer_firstname)\n        if (user._id == '' && user.customer_firstname == '') {\n            setEditing(true)\n        }\n        // populate address state with address \n        setAddress(user)\n    }, [, user])\n\n    const submitForm = async(e) => {\n        setLoading(true)\n        e.preventDefault()\n        if(cartState.authenticated) {\n            console.log(\"SUBMITTING FORM\")\n            const res = await myApi.send(`/customers/${user._id}`, 'PUT', address)\n            console.log(\"NEW ADDRESS \", res)\n            dispatch({type: 'SET_USER_SESSION', payload: res})\n        } else {\n            dispatch({type: 'SET_USER_SESSION', payload: address})\n            console.log('ADDRESS ', address)\n        }\n        setEditing(false)\n        setLoading(false)\n    }\n\n    const renderAddress = () => {\n        return (\n                        <Frame >\n                            <FrameHeader>\n                                <SubHeading1>\n                                Billing Address \n                                </SubHeading1>\n                                <Divider mb='10px'/>\n                            </FrameHeader>\n                            <FrameBody>\n                                { user.customer_firstname ? \n                                <>\n                                <Heading2>\n                                { customer_title } {customer_firstname} {customer_lastname}\n                                </Heading2>\n                                <Heading2>\n                                { customer_address1 }\n                                </Heading2>\n                                <Heading2>\n                                { customer_address2 }\n                                </Heading2>\n                                <Heading2>\n                                { customer_town }\n                                </Heading2>\n                                <Heading2>\n                                { customer_postcode }\n                                </Heading2>\n                                </>\n                                : <Heading2>Please provide a billing address</Heading2> \n                                }\n                            </FrameBody>\n                        <FrameFooter >\n                        <ButtonRow>\n                            <AnimatedButton big secondary text='Back' handleClick={() => goBack()}><ArrowLeft/></AnimatedButton>\n                            <AnimatedButton big secondary text='change' handleClick={() => setEditing(true)}><Edit3/></AnimatedButton>\n                            <AnimatedButton big text=\"confirm\" handleClick={() => buttonClick('NEXT_STEP')}><ArrowRight></ArrowRight></AnimatedButton>\n                        </ButtonRow>\n                        </FrameFooter>\n                        </Frame>\n        )\n    }\n\n    const renderForm = () => {\n        return (\n            <Frame>\n                <FrameHeader>\n                    <SubHeading1>Please provide a billing address</SubHeading1>\n                <Divider/>\n                </FrameHeader>\n                    <FrameBody>\n                        <form onSubmit={(e) => submitForm(e)}>\n                            <div style={{display: 'flex', flexDirection: 'row', width: '100%', flexWrap: 'wrap', justifyContent:'flex-start', alignItems: 'flex-start'}}>\n                            {\n                                views.addressForm.map((el, i) => ( \n                                    <SimpleTextInput \n                                        placeholder={el.placeholder}\n                                        label={el.label}\n                                        name={el.name}\n                                        key={i}\n                                        handleChange={(e) => handleInputChange(e)}\n                                        required\n                                        cols={el.width}\n                                        value={address[el.value]}\n                                    />\n                                ))\n                            }\n                            {\n                                !cartState.authenticated && \n                                <SimpleTextInput\n                                    placeholder='example@gmail.com'\n                                    label=\"Email Address\"\n                                    name=\"email\"\n                                    handleChange={(e) => handleInputChange(e)}\n                                    required\n                                    cols='100%'\n                                 />\n                            }\n                            </div>\n                        <ButtonRow>\n                        { cartState.guest ?\n                             <AnimatedButton big secondary text=\"Back\" handleClick={() => cartDispatch({type: 'STANDARD_CHECKOUT'})}><Edit3/></AnimatedButton>\n                            : <AnimatedButton big secondary text=\"Cancel\" handleClick={() => setEditing(false)}><Edit3/></AnimatedButton>\n                        }\n                            <AnimatedButton big text=\"Save\" type=\"submit\" loading={loading ? 1 : undefined} ></AnimatedButton>\n                        </ButtonRow>\n                        </form>\n                    </FrameBody>\n            </Frame>\n        )\n    }\n\n    return (\n        <>\n        { (editing === false && user.customer_firstname) &&\n            renderAddress()\n        }\n        {\n            (editing === true || !user.customer_firstname) && \n            renderForm()\n        }\n        </>\n    )\n}\n\nexport default EditBilling","import React, { useEffect, useState } from 'react'\nimport { useSelector } from 'react-redux'\nimport { ShippingOption, AnimatedButton } from '../components/ui'\nimport { ButtonRow } from '../styles/layout'\nimport { ArrowLeft } from 'react-feather'\nimport { myApi } from '../helpers'\nimport * as fn from '../helpers/functions'\n\nconst ShippingOptions = ({dispatch, cartDispatch}) => {\n    const [options, setOptions ] = useState([])\n    const [ loading, setLoading ] = useState(true)\n    const [currentOption, setCurrentOption ] = useState()\n    const { basket } = useSelector(state => state.basket)\n\n    useEffect(() => {\n        apiCall()\n    }, [])\n\n    useEffect(() => {\n         const shippingDetails = options.find(el => el._id === currentOption)\n         console.log(\"selected shipping \", shippingDetails)\n         let shippingCost = 0\n         if (shippingDetails ) {\n             let {shipping_cost, id } = shippingDetails\n             if ((fn.getCartTotal(basket.products) > 25) && (shipping_cost < 4)) {\n                 console.log(\"CART_TOTAL \", fn.getCartTotal(basket.products))\n                shippingCost = 0\n             } else {\n                shippingCost = shipping_cost \n             }\n            dispatch({type: \"SET_POSTAGE\", payload: {shipping_cost:shippingCost, id} })\n            cartDispatch({type: \"SET_POSTAGE\", payload: shippingDetails})\n            console.log(\"COST \", shippingCost)\n         }\n    }, [currentOption])\n\n    const apiCall = async() => {\n        try {\n            const result = await myApi.send('/shippings', 'GET', undefined, 'public')\n            console.log(\"SHIPPING \", result)\n            setOptions(result)\n            //TODO: If value is over 25 make standard Royal mail default\n            if (fn.getCartTotal(basket.products) > 25) {\n                setCurrentOption(result[2]._id)\n            } else {\n                setCurrentOption(result[0]._id)\n            }\n            setLoading(false)\n        } catch (err) {\n            setLoading(false)\n        }\n    } \n\n    const selectOption = (_id) => {\n        console.log(\"CHECKED \", _id)\n        setCurrentOption(_id)\n    }\n\n    return (\n        <>\n            <div style={{display: 'flex', flexDirection: 'column'}}>\n                {\n                    options.length > 0 ? options.map((el, i) => \n                        <ShippingOption active={currentOption} selected={currentOption} checked={selectOption} option={el} key={i}/>\n                    )\n                    :\n                    <div>\n                        Loading shipping options...\n                    </div>\n                }\n            </div>\n            <ButtonRow>\n                <AnimatedButton big secondary text=\"Back\" handleClick={() => cartDispatch({type: 'PREV_STEP'})}><ArrowLeft/></AnimatedButton>\n                <AnimatedButton big text=\"Continue\" handleClick={() => cartDispatch({type: 'NEXT_STEP'})}/>\n            </ButtonRow>\n        </>\n    )\n}\n\nexport default ShippingOptions ","import React, {useEffect, useState} from 'react'\nimport { CardElement, useStripe, useElements } from '@stripe/react-stripe-js'\nimport { useSelector } from 'react-redux'\nimport styled from 'styled-components'\nimport { AnimatedButton } from '../components/ui'\nimport { OrderFactory } from '../factories/Order'\nimport { SubHeading1, Paragraph } from '../styles/typography'\nimport { Frame, FrameHeader, FrameBody, FrameFooter, ButtonRow } from '../styles/layout'\nimport * as vars from '../styles/variables'\nimport * as fn from '../helpers/functions'\nimport { myApi } from '../helpers/'\n\nconst StripePay = ({cartDispatch}) => {\n    const { basket } = useSelector(state => state.basket)\n    const { user } = useSelector(state => state.user)\n    const [ isLoading, setIsLoading ] = useState(false)\n    const [ errorMessage, setErrorMessage ] = useState(\"\")\n    const [ cartTotal, setCartTotal ] = useState(0.00)\n    const [ orderId, setOrderId ] = useState(null)\n    const elements = useElements()\n    const stripe = useStripe()\n\n    const { customer_title, customer_firstname, customer_lastname, customer_email, customer_address1, customer_address2, customer_postcode, customer_town } = user\n    const { postage, products, carrierId } = basket\n\n    useEffect(() => {\n        console.log('PAYMENT BASKET', basket, \"USER\", user)\n        const totalToPay = fn.getCartTotal(products, postage)\n        setCartTotal(totalToPay.toFixed(2))\n    }, [basket])\n\n     useEffect(() => {\n        cartTotal > 0 && createOrder()\n     },[cartTotal])\n\n    const createOrder = async(completed=false) => {\n        // create new temporary order before payment created to confirm\n        // TODO: Only do this if cart in local storage\n        if (orderId) return\n        const newOrder = {\n            order_customer: user._id,\n            order_total: cartTotal,\n            order_date: new Date(),\n            order_dispatched: false,\n            order_confirmed: completed,\n            order_items: basket,\n            order_postage: postage,\n            order_carrier: carrierId\n        }\n        try {\n            const { id } = await myApi.send('/orders', 'POST', newOrder)\n            setOrderId(id)\n        } catch (err) {\n            console.log(\"ERROR CREATING ORDER \", err)\n        }\n        console.log(\"ORDER OBJECT \", newOrder)\n    }\n\n    const errorHandle = (response) => {\n        console.log(\"ERROR HANDLING \", response)\n    }\n\n    const cardElementOptions = {\n        style: {\n            base:{\n                fontSize: '24px',\n                color: vars.palette.primaryColor,\n                \"::placeholder\": {\n                    color: vars.palette.colorGray4\n                }\n            },\n            invalid: {},\n            complete: {}\n        },\n        hidePostalCode: true\n    }\n\n    const handleFormSubmit = async(e) => {\n        e.preventDefault()\n        console.log(\"Submitting \", e)\n        if(isLoading === true) return\n        setIsLoading(true)\n        // put billing details in to an object\n        const billingDetails = {\n            name: `${customer_title} ${customer_firstname} ${customer_lastname}`,\n            email: customer_email,\n            address : {\n                city:customer_town,\n                line1: customer_address1,\n                state: customer_town,\n                postal_code: customer_postcode\n            }\n        }\n\n\n            let myHeaders = new Headers();\n            myHeaders.append('Content-Type', 'application/json');\n\n            var requestOptions = {\n            method: 'GET',\n            headers: myHeaders,\n            redirect: 'follow',\n            };\n    \n        const result = await fetch(`/api/payment_intents/?amount=${(cartTotal*100).toFixed(0)}`, requestOptions)\n        const clientSecret = await result.text()\n        console.log(\"STRIPE ENDPOINT \", clientSecret) // error handle\n        // setErrorMessage(errorHandle(clientSecret))\n        // need reference to card element\n        const cardElement = elements.getElement(CardElement)\n        // need stripejs\n        // create a payment object\n        try {\n            const paymentMethodRequest = await stripe.createPaymentMethod({\n                type: 'card',\n                card: cardElement,\n                billing_details: billingDetails\n            })\n\n            if (paymentMethodRequest.hasOwnProperty('error')) {\n                const { message } = paymentMethodRequest.error || ''\n                console.log(\"PAYMENT METHOD REQUEST \", message)\n                // errorHandle(errorMessage)\n                setIsLoading(false)\n                message && setErrorMessage(message)\n                return\n            }\n\n            const confirmedCardPayment = await stripe.confirmCardPayment(clientSecret, {\n                payment_method: paymentMethodRequest.paymentMethod.id,\n            })\n            \n                console.log(confirmedCardPayment)\n                //  Mark order as completed in database\n                const data = {\n                    order_confirmed: true\n                }\n                await myApi.send(`/orders/${orderId}`, 'PUT', data)\n                console.log(\"Sending confirmation email for.\", user)\n                // Send confirmation email to http://wx-microservice-email.herokuapp.com/api/v1/order-confirmation\n                \n                const confirmationEmail = new OrderFactory()\n                const emailData = confirmationEmail.create(user, basket, cartTotal, orderId, 1)\n                console.log(\"CONFIRMATION EMAIL: \", emailData)\n\n                let myHeaders = new Headers();\n                myHeaders.append(\"x-api-key\", \"1ab2c3d4e5f61ab2c3d4e5f6\");\n                myHeaders.append('Content-Type', 'application/json');\n\n                var requestOptions = {\n                method: 'POST',\n                headers: myHeaders,\n                body: JSON.stringify(emailData),\n                redirect: 'follow',\n                };\n                const response = await fetch('https://wx-microservice-email.herokuapp.com/api/v1/order-confirmation', requestOptions)\n                const email  = await response.text()\n                console.log('Email send status ', email)\n                // Payment completed step redirect to success step\n                cartDispatch({type: \"CHECKOUT_SUCCESS\"})\n\n                // Add last flag ttcart from local storage\n                setIsLoading(false)\n        } catch (err) {\n            console.log(\"PAYMENT REQ ERR \", err)\n                setIsLoading(false)\n            return\n        }\n    }\n\n     return (\n         <Frame>\n            <form onSubmit={(e) => handleFormSubmit(e)}>\n            <FrameHeader>\n                <SubHeading1>\n                    Secure Payment\n                </SubHeading1>\n            </FrameHeader>\n            <FrameBody>\n                <CardElementWrapper>\n                    <CardElement withUpdate={(e) => console.log(e.value)} options={cardElementOptions} />\n                </CardElementWrapper>\n                <Paragraph danger>\n                    { errorMessage && errorMessage }\n                </Paragraph>\n                <img src='./stripe-payment.png' style={{width: '60%'}}/>\n            </FrameBody>\n            <FrameFooter>\n                <ButtonRow>\n                    <AnimatedButton secondary big type=\"button\" big text='Back' handleClick={() => cartDispatch({type: 'PREV_STEP'})}></AnimatedButton>\n                    <AnimatedButton loading={isLoading} type=\"submit\" big text={\"Pay \" + \"\\u00A3\" + cartTotal} ></AnimatedButton>\n                </ButtonRow>\n            </FrameFooter>\n            </form>\n         </Frame>\n     )\n}\n\nexport default StripePay\n\nconst CardElementWrapper = styled.div`\n    width: 100%;\n    padding: 15px;\n    border-radius: 15px;\n    ${'' /* height: 60px; */}\n    border: 2px ${vars.palette.primaryColor} solid;\n    ${'' /* box-shadow: 4px 4px 6px  rgba(0,0,0, 0.1); */}\n`","import React, { useState, useEffect } from 'react'\nimport { SimpleTextInput } from './ui'\nimport { Container, Wrapper, Section} from '../styles/layout'\n\nconst OptIn = (props) => {\n    return (\n        <Section light narrow={!props.sm} mobile={props.sm} height={props.height}>\n            <Wrapper width={ 850} mt={40}>\n                <SimpleTextInput\n                    big={!props.sm}\n                    handleChange={props.handleChange}\n                    submitHandler={props.handleSubmit}\n                    withBigButton\n                    loading={props.loading}\n                    value={props.searchValue}\n                    valid={props.valid}\n                    buttonText={props.btnText}\n                    label={props.label}\n                    type=\"text\"\n                    placeholder={props.placeholder}\n                    withButton={props.sm}\n                />\n            </Wrapper>\n        </Section>\n    )\n}\n\nOptIn.defaultProps = {\n   btnText: 'Button Text',\n   height: 200,\n   placeholder: \"pass placeholder prop\",\n   handleChange: () => {},\n   submitHandler: () => {}\n}\n\nexport default OptIn","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport Button from '../styles/components/button'\nimport AnimatedButton from '../components/ui/AnimatedButton'\nimport styled from 'styled-components'\nimport { X } from 'react-feather'\nconst Modal = ({ isShowing, hide, ...rest }) =>\n  isShowing\n    ? ReactDOM.createPortal(\n        <React.Fragment>\n          <ModalOverlay \n          />\n          <ModalWrapper\n            className=\"modal-wrapper\"\n            aria-modal\n            aria-hidden\n            tabIndex={-1}\n            role=\"dialog\"\n            // onClick={hide}\n          >\n            <ModalMain className=\"modal\">\n            <CloseButton\n              onClick={hide}\n            ><Cross/></CloseButton>\n              <div className=\"modal-header\">\n              </div>\n              {rest.children}\n            </ModalMain>\n          </ModalWrapper>\n        </React.Fragment>,\n        document.body\n      )\n    : null;\n\nexport default Modal;\n\nconst ModalOverlay = styled.div`\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: 1040;\n    width: 100vw;\n    height: 100vh;\n    background-color: #000;\n    opacity: 0.5;\n`\n\nconst ModalWrapper = styled.div`\n     position: fixed;\n        top: 0;\n    left: 0;\n    z-index: 1050;\n    width: 100%;\n    height: 100%;\n    overflow-x: hidden;\n    overflow-y: auto;\n    outline: 0;\n`\n\nconst ModalMain = styled.div`\n  z-index: 100;\n  background: white;\n  position: relative;\n  margin: 50vh auto;\n  border-radius: 3px;\n  max-width: 1000px;\n  min-height: 400px;\n  padding: 3.0rem;\n  border-radius: 25px;\n  transform: translateY(-50%);\n  overflow: hidden;\n`\n\nconst CloseButton = styled.button`\n  width: 30px;\n  height: 30px;\n  padding: 5px;\n  background-color: gray;\n  color: white;\n  position: absolute;\n  border-radius: 50%;\n  right: 20px;\n  top: 20px;\n  border: none;\n  z-index: 1000;\n  cursor: pointer;\n  transition: all 0.3s ease-in;\n  &:hover {\n    background-color: black;\n  }\n`\nconst Cross = styled.div`\n    :after, :before { \n    width: 15px;\n    height: 3px;\n    background-color: white; \n    position: relative;\n    left: 8px;\n    top: 13px;\n   }\n  &::after{\n    content: '';\n    transform: rotate(-45deg);\n    position: absolute;\n  }\n  &::before {\n    content: '';\n    transform: rotate(45deg);\n    position: absolute;\n  }\n`\n","import React, { useEffect} from 'react'\nimport { useSelector } from 'react-redux'\nimport { useHistory } from 'react-router-dom'\nimport styled from 'styled-components'\nimport { Layers } from 'react-feather'\nimport { LinkButton } from '../styles/ui'\nimport AddToCart from '../components/ui/AddToCartBtn'\nimport AnimatedButton from '../components/ui/AnimatedButton'\nimport ProductFrame from '../styles/ui/productFrame'\nimport { ButtonRow } from '../styles/layout'\nimport { Heading1, Heading2, Heading3, Paragraph } from '../styles/typography'\nimport * as fn from '../helpers/functions'\n\nconst ProductPreview = (props) => {\n\n    const history = useHistory()\n\n    const { basket } = useSelector(state => state.basket)\n\n    useEffect(() => {\n        console.log(\"PREVEW BASKET\", basket.products)\n    }, [basket])\n    // const router = useRouter()\n    const { id, product_picture_1, product_name, product_short_description, product_long_description, product_price, product_discount } = props.product\n    return (\n        <>\n            <ProductInfo>\n                <img src=\"/drips-dark.svg\" style={{position: 'absolute', width: 500, top: 0, right: 0, opacity: 0.8, zIndex: 1}}/>\n                <ProductFrame style={{marginTop: 30}}>\n                    { product_picture_1 &&\n                        <img src={product_picture_1.url}/>\n                    }\n                </ProductFrame>\n                <ProductText>\n                    <Heading1 style={{flex: 1}}>{product_name}</Heading1>\n                    <Heading3 style={{flex: 1}}>{product_short_description}</Heading3>\n                    <Paragraph style={{flex: 4}}>{fn.createExcerpt(product_long_description, 100)}\n                    <LinkButton onClick={() => props.viewProduct(id)}> More info</LinkButton>\n                    </Paragraph>\n                    <InlinePrices>\n                    {product_discount > 0 &&\n                        <div style={{display: 'flex', flexDirection: 'row', alignItems: 'baseline', opacity: 0.4}}>\n                        <Heading3>Original Price. </Heading3>\n                        <Heading1>&pound;{(product_price).toFixed(2)}</Heading1>\n                        </div>\n                    }\n                    <div style={{display: 'flex', flexDirection: 'row', alignItems: 'baseline'}}>\n                    <Heading3>{product_discount > 0 ? 'Sale Price.' : 'Price.' }</Heading3>\n                    <Heading1>&pound;{(product_price - (product_price * product_discount / 100)).toFixed(2)}</Heading1>\n                    </div>\n                    </InlinePrices>\n                    <ButtonRow >\n                        <AddToCart  product={props.product} function=\"add\"/>\n                        {  basket.products.length > 0  &&\n                            <AnimatedButton tertiary fixed text=\"View Basket\" med \n                                handleClick={() => history.push('/basket')}\n                            >\n                                <Layers/>\n                            </AnimatedButton>\n                        }\n                        <AnimatedButton text=\"More info\" med \n                            handleClick={() => props.viewProduct(id)}\n                        >\n                            <Layers/>\n                        </AnimatedButton>\n                    </ButtonRow>\n                </ProductText>\n            </ProductInfo>\n        </>\n    )\n}\n\nexport default ProductPreview\n\nconst ProductInfo = styled.div`\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    min-height: 400px;\n`\nconst ProductText = styled.div`\n    display: flex;\n    flex-direction: column;\n    min-height: 220px;\n    max-height: 600px;>\n    max-width: 550px;\n    margin: 0px 25px 0px 40px;\n    margin-top: 50px;\n    z-index: 2;\n`\n\nconst InlinePrices = styled.div`\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: flex-start;\n    max-width: 600px;\n`","import React from 'react'\nimport { Section } from '../styles/layout'\nimport styled from 'styled-components'\n\nconst Footer = () => {\n    return (\n        <>\n        <Section height={500}>\n            <img src=\"/drips.png\" alt=\"drips\" style={{float: 'right', width: '500px', transform: 'translate(50px, -50px)'}}/>\n            <FooterGrid>\n                <FooterList>\n                    <FooterListItem>\n                    Item 1\n                    </FooterListItem>\n                    <FooterListItem>\n                    Item 1\n                    </FooterListItem>\n                </FooterList>\n                <FooterList>\n                <FooterListItem>\n                list 2\n                    </FooterListItem>\n                    <FooterListItem>\n                    Item 1\n                    </FooterListItem>\n                </FooterList>\n\n            </FooterGrid>\n        </Section>\n        {/* <Section light height={10}></Section> */}\n        </>\n    )\n}\n\nconst FooterGrid = styled.div`\n    display: flex;\n    position: absolute\n    max-width: 100vw\n    padding-top: 150px;\n    bottom: -500;\n    flex-flow: row wrap;\n`\n\nconst FooterList = styled.ul`\n    min-width: 200px\n    padding: 50px;\n    list-style: none;\n`\n\nconst FooterListItem = styled.li`\n    padding: 5px;\n    color: white;\n    font-size: 1.5rem;\n`\n\nexport default Footer","import React from 'react'\nimport { useHistory } from 'react-router'\nimport { BannerHeading, Heading1, Heading2, Paragraph } from '../styles/typography'\nimport { Container , Section, Wrapper} from '../styles/layout'\nimport * as vars from '../styles/variables'\nimport { useViewportCheck } from '../hooks'\nimport { Bubble } from '../styles/ui'\n\n\nconst Hero = props => {\n\n    const history = useHistory()\n    const { pathname } = history.location \n    const { viewport } = useViewportCheck()\n    console.log(\"Location\", pathname)\n\n    return (\n        <Section dark height={props.viewPort < 916 ? 100 : 180}>\n            {vars.headerBubbles.map((b, i) => (\n            <Bubble {...b} key={i} />\n            ))}\n                <img src=\"/drips.png\" alt=\"drips\" style={{float: 'right', width: '500px', transform: 'translate(50px, -70px)', zIndex: '5'}}/>\n            <Container>\n                <BannerHeading style={{maxWidth: 550, transform: 'translateY(-50px)'}}>\n                    We offer FREE delivery on all orders over &pound;25\n                </BannerHeading>\n            </Container>\n            <img src=\"/oversholder.webp\" alt=\"girl-pic\" style={{position: 'absolute', top: 50, left: viewport < 751 ? 0 : 560, maxHeight: 320, zIndex: '4000'}}/>\n        </Section>\n    )\n}\n\nexport default Hero","import React, { useState, useEffect} from 'react'\nimport { useHistory } from 'react-router-dom'\nimport {useDispatch } from 'react-redux'\nimport Fuse from 'fuse.js'\nimport { OptIn } from '.'\nimport { myApi } from \"../helpers\";\n\n\nconst ProductSearch = props => {\n\n    const [ searchTerm, setSearchTerm ] = useState({})\n    const [ loading, setLoading ] = useState(false)\n    const dispatch = useDispatch()\n    const history = useHistory()\n\n    console.log(\"PROD SEARCH LOC :\", history)\n\n    const searchFilter = (products) => {\n        const fuse = new Fuse(products, {\n            keys: [\n                'product_name',\n                'product_long_description',\n                'product_short_description'\n            ],\n            includeScore: true\n        })\n        const result = fuse.search(searchTerm.term)\n        const filtered = result.filter(el => el.score < 0.6)\n         .map(i => i.item)\n        console.log(\"FILTERED: \", filtered)\n        return filtered\n    }\n\n    useEffect(() => {\n        // if on search page run everytimr chenges and don't redirect\n        console.log(\"Search for: \", searchTerm)\n    }, [searchTerm])\n\n    const getData = async() => {\n        if(!searchTerm.term) return\n        setLoading(true)\n        // TODO: Perform strapi query to return correct data\n        console.log('pulling data from server ', searchTerm)\n        let products = await myApi.send(\"/products\", \"GET\", undefined, \"public\")\n        // filter result accoring to search term\n        const filtered = searchFilter(products)\n        console.log(\"filtered results: \", filtered)\n        // add result to search results state object\n        dispatch({type: 'UPDATE_SEARCH', payload: filtered})\n        // redirect to search results page\n        setSearchTerm({})\n        setLoading(false)\n        history.push('/search-results')\n    }\n\n    return (\n          <OptIn \n            sm={props.sm} \n            height={180}\n            cols=\"100%\" \n            valid={false}\n            loading={loading}\n            placeholder=\"product name\"\n            btnText='Search'\n            searchValue={searchTerm.term}\n            label=\"Search our catalogue for your favorite products\"\n            handleChange={(e) => {setSearchTerm({...searchTerm, ['term']: e.target.value})}}\n            handleSubmit={() => getData()}\n            />\n    )\n}\n\nexport default ProductSearch","import React, {useEffect } from 'react'\nimport { useSelector } from 'react-redux'\nimport { useHistory } from 'react-router-dom'\nimport { Wrapper, Section, SlideGrid } from '../styles/layout'\nimport { SectionHeading, Heading2 } from '../styles/typography'\nimport { Category } from './ui'\n\nconst CategoryRow = (props) => {\n\nconst { categories } = useSelector((state) => state.categories || []);\nuseEffect(() => {\n\n    console.log(\"CAT ROW: \", categories)\n}, [categories])\n\n    return (\n        <>\n            { props.viewPort > 916 ? \n            <>\n        <Section height={200}>\n            <SectionHeading light>Categories</SectionHeading>\n                <img \n                    src=\"/drips.png\" \n                    alt=\"drips\" \n                    style={{float: 'right', width: '500px', transform: 'translate(50px, -70px)', zIndex: '5'}}/>\n        </Section>\n            <SlideGrid  mb={'-100px'}>\n                {\n                    categories && categories.map((el, i) => ( \n                        <Category key={i} name={el.category_name} image={el.category_image.formats.thumbnail.url} id={el._id} />\n                    ))\n                }\n            </SlideGrid>\n                    </>\n                    :\n            <SlideGrid sm mb={'-100px'}>\n                {\n                    categories && categories.map((el, i) => ( \n                        <Category viewPort={props.viewPort} key={i} name={el.category_name} image={el.category_image.formats.thumbnail.url} id={el._id} />\n                    ))\n                }\n            </SlideGrid>\n            }\n        </>\n    )\n}\n\nexport default CategoryRow;","import React, {useEffect, useState } from \"react\";\nimport { Redirect, Route } from \"react-router-dom\";\nimport { useIsAuthenticated } from '../hooks'\n// Helpers\nimport auth from \"../helpers/auth\";\n\nfunction PrivateRoute({ component: Component, ...rest }) {\n\n  const { isAuthenticated } = useIsAuthenticated()\n\n  console.log(\"PROTECTED \", {...rest})\n  return (\n    <Route exact {...rest}\n     render={(props) => \n      !isAuthenticated // remove ! to make private\n       ? (\n      <Component {...props} />\n    ) : (\n        <Redirect\n          to={{\n            pathname: \"/authenticate\",\n            state: { from: props.location },\n          }} />\n      )} />);\n}\n\n\nexport default PrivateRoute","import styled, { css } from 'styled-components'\nimport * as vars from '../variables'\n\n\nexport const ProductRow = styled.div`\n    margin: 0px 20px;\n    padding: 20px;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: flex-end;\n    align-items: center;\n    align-content: center;\n    flex-gap: 10px; \n    ${props => props.narrow && css`\n        padding: 10px 10%;\n    `}\n`\n\nexport const Divider = styled.div`\n    width: 100%;\n    height: 1px;\n    background-color: ${vars.palette.colorGray7};\n    ${props => props.mb && css`\n        margin-bottom: ${props.mb};\n    `}\n`\nexport const BasketWrapper = styled.div`\n    margin-top: 50px;\n    margin-left: auto;\n`","import styled, { css } from 'styled-components'\nimport * as vars from '../variables'\n\nconst TopNav = styled.div`\n    width: 80%;\n    max-width: 100vw;\n    margin: 0px auto;\n    height: 90px;\n    background-color: white;\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n    z-index: 9000;\n    overflow: hidden;\n    ${props => props.viewPort  < 961 && css`\n    width: 50%;\n    margin: 0px 0px 0px 10px;\n    ` }\n    ${props => /product|checkout/.test(props.location) && css` \n        background-color: ${vars.palette.primaryColor};\n    `}\n    ${props => /checkout/.test(props.location) && css` \n        margin-top: -100px;\n    `}\n    \n    \n`\nexport const NavList = styled.ul`\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    list-style: none;\n    width: 100%;\n    z-index: 3000;\n    ${props => props.viewPort  < 961 && css`\n    width: 80%;\n    margin: 0px 0px 0px 10px;\n    justify-content: flex-end;\n    ` }\n    li.hamburger {\n        ${props => props.viewPort  > 961 && css`\n            visibility: hidden;\n        ` }\n    }\n    li.temp {\n        ${props => props.viewPort  < 961 && css`\n            display: none;\n        ` }\n    }\n    li > a {\n        text-decoration: none;\n        color: ${vars.palette.darkfont};\n    }\n\n    .active {\n        color: red;\n    }\n`\n\nexport default TopNav","import styled, { css } from 'styled-components'\n\nexport const Logo = styled.div`\n    width: 10%;\n    max-height: 50px;\n    margin-left: 10px;\n    z-index: 3000;\n     `\n","import React, { useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useHistory } from \"react-router\";\nimport { myApi } from '../helpers'\nimport TopNav, { NavList } from \"../styles/components/topnav\";\nimport * as vars from \"../styles/variables\";\nimport * as fn from '../helpers/functions'\nimport PageLink from \"./ui/PageLink\";\nimport { Logo } from \"../styles/logos\";\nimport { ShoppingCart } from \"react-feather\";\nimport { Container } from \"../styles/layout\";\nimport AnimatedButton from \"../components/ui/AnimatedButton\";\nimport { User } from \"react-feather\";\nimport styled from \"styled-components\";\nimport { useIsAuthenticated, useViewportCheck } from '../hooks'\nimport { auth, strapi } from '../helpers'\nimport UseAnimations from 'react-useanimations'\nimport menu from 'react-useanimations/lib/menu2'\n\n\nconst Navbar = (props) => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const { isAuthenticated } = useIsAuthenticated()\n\n// const loggedInUser = auth.getUserInfo()\n  const { viewport } = useViewportCheck()\n\n\n  // console.log('AUTH FROM HOOK', isAuthenticated, loggedInUser)\n  console.log(`${process.env.RAZZLE_PUBLIC_DIR}/logo.jpg`)\n  const [loggedIn, setLoggedIn] = useState(false)\n\n  useEffect(() => {\n    setLoggedIn(isAuthenticated)\n    console.log(\"AUTHENTICATED\", isAuthenticated)\n  }, [isAuthenticated])\n\n  useEffect(() => {\n    console.log(\"VIEWPORT \", viewport)\n  }, [viewport])\n  // console.log(\"AUTHED \", isAuthenticated)\n\n  useEffect(() => {\n    if (process.browser) {\n      const cartInStorage = localStorage.getItem(\"soap-cart\");\n      if (cartInStorage) {\n        // setCurrentCart(JSON.parse(cartInStorage))\n        dispatch({\n          type: \"SET_INITIAL_BASKET\",\n          payload: JSON.parse(cartInStorage),\n        });\n      }\n    }\n    // console.log(\"NAV HIST \", history.location.pathname);\n    // fetch categories to pass to dropdown\n    (async () => {\n      if (categories && categories.length) return\n      const _categories = await myApi.send('/categories', 'GET', undefined, 'public')\n      dispatch({ type: \"FETCH_CATEGORIES\", payload: _categories })\n      console.log(\"NAV CATEGORIES \", _categories)\n    })()\n  }, []);\n\n  const { basket } = useSelector((state) => state.basket);\n  const { showMenu } = useSelector((state) => state.ui);\n  const { categories } = useSelector((state) => state.categories || []);\n  const { user } = useSelector(({user}) => user);\n  const [key, setKey] = useState(0)\n  // const [ showMenu, setShowMenu ] = useState(false)\n  console.log(\"CATS \", basket, user);\n\n  const [basketTotal, setBasketTotal] = useState(0);\n  // const [basketValue] = useSelector(state => state.basket[products])\n  // .reduce((item, total) => item.total_price + total))\n  useEffect(() => {\n    let myArray = basket.products;\n    console.log(\"PRODUCTS IN CART \", myArray);\n    if (myArray.length > 0) {\n      const totals = myArray.map((item) => item.total_price);\n      const basketValue = totals.reduce((a, b) => a + b);\n      setBasketTotal(basketValue.toFixed(2));\n      console.log(\"TOTAL\", basketValue);\n    } else {\n      setBasketTotal(0.0);\n    }\n    console.log(\"basket context \", basket.products);\n  }, [basket]);\n\n  return (\n    <Container nav={true} location={history.location.pathname} key={key}>\n      <TopNav location={history && history.location.pathname}>\n        <PageLink to=\"/\">\n          <Logo ><img src=\"/logogray.png\" style={{ width: 60, margin: -10, marginRight: 40 }} /></Logo>\n        </PageLink>\n        {/* { viewport > 976 &&  */}\n        <NavList viewPort={viewport}>\n          <li className=\"temp\">\n            <PageLink to=\"#\">\n              About\n            </PageLink>\n          </li>\n          <li className=\"temp\">\n            <PageLink to=\"/contact\">Contact</PageLink>\n          </li>\n          <li className=\"temp\">\n            <PageLink\n              to=\"/category\"\n              withMenu\n              menuData={categories}\n              menuTitle=\"Categories\"\n              display={true}\n            >\n              Categories\n            </PageLink>\n          </li>\n          {/* call auth.clear() to remove auth key to logout */}\n          <li className=\"temp\">{isAuthenticated === false ? <PageLink to=\"/authenticate\">Sign In</PageLink> :\n            <button style={{ backgroundColor: 'rgba(250, 250, 250, 0.0)', border: 'none', fontWeight: 'bold'}}\n              onClick={() => {\n                history.push('/authenticate')\n                strapi.logout(dispatch)\n              }\n              }>Sign Out</button>}</li>\n          <li className=\"temp\">\n            <AnimatedButton primary sml text=\"New Account\" loading=\"false\" handleClick={() => history.push('/authenticate?register=true')}>\n              <User />\n            </AnimatedButton>\n          </li>\n          <li>\n            <PageLink to=\"/basket\">\n              {/* <PageLink to=\"/basket\" withMenu menuTitle=\"Cart Items\" menuData={basket.products}> */}\n              <span style={{ color: '#666', fontSize: 18 }}>\n                &pound;{basket && basketTotal}\n              </span>\n              <div style={{ marginLeft: 10, display: 'flex' }}>\n                <ShoppingCart color={vars.palette.secondaryColor1} size={28} />\n                {\n                  basket.products.length > 0 &&\n                  <ItemCountCircle>\n                    {basket.products.length}\n                  </ItemCountCircle>\n                }\n              </div>\n            </PageLink>\n          </li>\n          <li className=\"hamburger\">\n            <a href=\"#\">\n              <UseAnimations\n                animation={menu}\n                strokeColor={showMenu === false ? '#666' : '#E963FF'}\n                fillColor={showMenu === false ? '#666' : '#E963FF'}\n                size={52}\n                wrapperStyle={{ marginRight: -25, padding: 10 }}\n                onClick={() => {\n                  dispatch({ type: showMenu === true ? 'HIDE_MENU' : 'SHOW_MENU' })\n                  //  setShowMenu(!showMenu);\n                }}\n              />\n            </a>\n\n          </li>\n        </NavList>\n        {/* } */}\n      </TopNav>\n    </Container>\n  );\n};\n\nexport default Navbar;\n\nconst CategoryMenu = styled.div`\n  width: 700px;\n  height: 200px;\n  background-color: ${vars.palette.secondayColor};\n  z-index: 13000;\n  position: absolute;\n  top: 60px;\n  border-radius: 20px;\n  box-shadow: 4px 4px 12px rgba(0, 0, 0, 0.3);\n`;\nconst Pointer = styled.div`\n  width: 20px;\n  height: 20px;\n  background-color: ${vars.palette.secondayColor};\n  margin-left: 53%;\n  margin-top: -5px;\n  transform: rotate(45deg);\n`;\n\nconst ItemCountCircle = styled.div`\n    position: relative;\n    background-color: ${vars.palette.primaryColor1};\n    color: white;\n    height: 17px;\n    width: 17px;\n    border: 3px solid white;\n    border-radius: 50%;\n    text-align: center;\n    font-size: 14px;\n    font-weight: 600;\n    line-height: 17px;\n    transform: translate(-10px, -10px);\n`\n\n","import React from 'react'\nimport Navbar from '../Navbar'\nimport { SideMenu } from '../ui'\n\nconst WithNavbar = (props) => {\n    return (\n        <>\n        <SideMenu />\n        <Navbar />\n            {props.children}\n        </>\n    )\n}\n\nexport default WithNavbar","import React from 'react'\nimport { BannerHeading, Heading1, Heading2, Paragraph } from '../../styles/typography'\nimport { Container , Section, Wrapper} from '../../styles/layout'\nimport * as vars from '../../styles/variables'\nimport { Bubble } from '../../styles/ui'\nimport { Hero } from '../'\n\nconst withHero = ({component: Component}) => {\n    return class Returned extends React.Component {\n        render() {\n            return (\n                <React.Fragment>\n                    <Hero {...this.props}/>\n                    <Component {...this.props}/> \n                </React.Fragment>\n            )\n        }\n    }\n} \n\nexport default withHero","import React, {useState, useEffect} from 'react'\nimport { useHistory } from 'react-router'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { BannerHeading, Heading1, Heading2, Paragraph } from '../styles/typography'\nimport { Container , Section, Wrapper} from '../styles/layout'\nimport { ProductFrame, Bubble } from '../styles/ui'\nimport AnimatedButton from '../components/ui/AnimatedButton'\nimport AddToCart from '../components/ui/AddToCartBtn'\nimport { Trash2, MinusCircle, PlusCircle, CreditCard, ArrowLeft } from 'react-feather'\nimport * as fn from '../helpers/functions'\nimport { useViewportCheck } from '../hooks'\nimport { BasketWrapper, ProductRow, Divider } from '../styles/ui/basket'\nimport { withHero } from '../components/layout'\n\nconst Basket = (props) => {\n\n    const { basket } = useSelector(state => state.basket)\n    const { viewport } = useViewportCheck()\n\n    const history = useHistory()\n\n    const [ postage, setPostage ] = useState(0)\n    const [ total, setTotal ] = useState(0)\n\n\n    useEffect(() => {\n            console.log(\"BASKET POSTAGE\", basket.postage)\n            setPostage(basket.postage || 0.00)\n        setTotal(fn.getCartTotal(basket.products, postage))\n    }, [basket])\n\n    useEffect(() => {\n        setTotal(fn.getCartTotal(basket.products, postage))\n    }, [postage])\n\n    console.log(\"BASKET PAGE \", basket)\n\n    const goBack = () => {\n        history.goBack()\n    }\n\n    const navigate = (url) => {\n        history.push(url)\n    }\n\n    return (\n        <>\n        <Section light color={'white'} height={1000} mobile={viewport < 904}>\n            <Wrapper>\n                <Heading1>Your Basket</Heading1>\n                <BasketWrapper>\n                <ProductRow>\n                    { viewport > 904 &&\n                    <> \n                    <Heading2 style={{flex: 3}}>Product</Heading2>\n                        <Heading2 style={{flex: 1}}>Price</Heading2>\n                    <Heading2 style={{flex: 1}}>Quantity</Heading2>\n                    <Heading2 style={{flex: 1}}>Total</Heading2>\n                    </>\n                    }\n                </ProductRow>\n                    <Divider />\n                <ProductRow>\n                </ProductRow>\n                    {basket.products.length > 0 ?  basket.products.map(el => \n                        \n                        <ProductRow key={el._id}>\n                            <ProductFrame sml style={{flex: 1, marginRight: viewport < 904 ? 20 : 70}} >\n                                <img src={el.product_picture_1} \n                                style={{display: 'block', maxHeight: '70px', maxWidth: '70px', width: 'auto', height: 'auto'}}\n                                />\n                            </ProductFrame>\n                            {viewport > 904  &&\n                                <div style={{flex: 2, paddingRight: 90}}>\n                                    {el.product_name} <br/>\n                                    {el.product_description}\n                                </div>\n                            }\n                            <div style={{flex: 1, margin: 5}}>\n                                &pound;{el.product_price}\n                            </div>\n                            <div style={{flex: .5, marginRight: viewport < 904 ? 20 : 75, display: 'flex', justifyContent: 'space-around', alignItems: 'center'}}>\n                                {viewport > 904 && \n                                    <AddToCart product={el} function=\"delete\" icon={true}>\n                                        <MinusCircle color='gray' size={28}/>\n                                    </AddToCart>\n                                }\n                                {el.product_qty}\n                                {/* <AddToCart product={delete Object.assign(el, {['product_picture_1.url']: el['product_picture_1']})['product_picture_1']} function=\"add\" icon={true}> */}\n                                {viewport > 904 &&\n                                    <AddToCart product={el} function=\"add\" icon={true}>\n                                        <PlusCircle color=\"lightgreen\" size={28}/>\n                                    </AddToCart>\n                                }\n                            </div>\n                            <div style={{flex: 1, marginRight: viewport < 904 ? 20 :60, display: 'flex', alignItems: 'center', justifyContent: 'space-around'}}>\n                               &pound;{el.total_price.toFixed(2)}\n                                {/* <Trash2 size={32} color=\"#837D7D\" style={{transform: 'translateX(20px)'}}/> */}\n                            </div>\n                        </ProductRow>\n                    ) :  <Heading2>You Dont Have any Items in you basket yet</Heading2>}\n                    <ProductRow>\n                        <Divider />\n                    </ProductRow>\n                    <ProductRow narrow>\n                            Postage: &pound;{postage.toFixed(2)}\n                    </ProductRow>\n                    <ProductRow narrow>\n                            Sales Tax: &pound; {0.00.toFixed(2)}\n                    </ProductRow>\n                    <ProductRow narrow>\n                        <Heading2>\n                            Total: &pound;{total.toFixed(2)}\n                        </Heading2>\n                    </ProductRow>\n                    <ProductRow>\n                        {viewport > 904 && \n                            <AnimatedButton text=\"Back\" med secondary \n                                handleClick={() => goBack()}\n                            // style={{position: 'absolute', right: 130, transform: 'translateX(-50%)'}}\n                            style={{marginRight: '15px'}}\n                            >\n                                <ArrowLeft />\n                            </AnimatedButton>\n                        }\n                            <AnimatedButton text=\"Secure Checkout\" med \n                                handleClick={() => navigate(\"/checkout\")}\n                            // style={{position: 'absolute', right: 130, transform: 'translateX(-50%)'}}\n                            style={{marginRight: '9%'}}\n                            >\n                                <CreditCard />\n                            </AnimatedButton>\n                    </ProductRow>\n                </BasketWrapper>\n            </Wrapper>\n        </Section>\n        </>\n    )\n}\n\nexport default withHero({component: Basket})","import { useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nexport default function ScrollToTop() {\n  const { pathname } = useLocation();\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [pathname]);\n\n  return null;\n}","import React, { useEffect, useReducer, useState} from 'react'\nimport { useDispatch } from 'react-redux'\nimport { useHistory } from 'react-router'\nimport { FrameHeader, Frame, FrameBody, Container } from '../styles/layout'\nimport { Heading2 } from '../styles/typography'\nimport { LoginForm } from '../components'\n// import  useStrapiLogin  from '../hooks/useStrapiLogin'\nimport { useStrapiLogin } from '../hooks'\n\nconst AuthPage = (props) => {\n\n    const dispatch = useDispatch()\n    const history = useHistory()\n\n    useEffect(() => {\n        const query = new URLSearchParams(props.location.search)\n        const isRegistration = query.get('register') // || false\n        loginDispatch({type: 'UPDATE_FIELD', fieldName: 'register', fieldValue: isRegistration}) \n    }, [props.location.search])\n\n    const loginReducer = (state, action) => {\n        switch(action.type) {\n            case 'UPDATE_FIELD': \n             return {\n                 ...state,\n                 fields: {\n                     ...state.fields,\n                        [action.fieldName] : action.fieldValue \n                 }\n                }\n            case 'LOGGING_IN':\n                return {\n                    ...state,\n                    loading: true\n                }\n            case 'LOGGED_IN':\n                return {\n                    ...state,\n                    loading: false\n                }\n            default:\n                return state\n        }\n    }\n\n    const initialState = {\n        loading: false,\n        errorMsg: '',\n        authenticated: false,\n        fields: {\n            register: register,\n            identifier: '',\n            password: '',\n            password_confirmation: '',\n            username: ''\n        }\n    }\n\n    const [ loginState, loginDispatch ] = useReducer(loginReducer, initialState)\n    const { authenticated, guest, loading, fields: { email, password, register, username, password_confirmation } } = loginState\n\n    const { handleStrapiLogin, errorMsg, isLoggedIn } = useStrapiLogin({dispatch, loginState})\n\n\n    const handleChange = (e) => {\n        const { name, value, type, checked } = e.target\n        if (type === 'checkbox') {\n            loginDispatch({type: 'UPDATE_FIELD', fieldName: name, fieldValue: checked })\n            return\n        }\n            loginDispatch({type: 'UPDATE_FIELD', fieldName: name, fieldValue: value})\n            console.log(\"LOGIN STATE \", loginState.fields.email)\n    }\n\n    const handleLogin = async (e) => {\n        e.preventDefault()\n        loginDispatch({type: 'LOGGING_IN'})\n       await handleStrapiLogin(loginState.fields, dispatch)\n        loginDispatch({type: 'LOGGED_IN'})\n        history.push('/basket')\n    }\n\n    \n    return (\n        <>\n        <Container>\n            <LoginForm \n            type='standalone'\n            data={loginState.fields} \n            handleChange={handleChange}\n            handleLogin={handleLogin}\n            loading={loading ? 1 : undefined}\n             />\n        </Container>\n        </>\n    )\n}\n\nexport default AuthPage","import React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { myApi } from \"../helpers\";\nimport { Hero, Container, Section } from \"../styles/layout\";\nimport { BannerHeading, BannerHeading2, SectionHeading } from \"../styles/typography\";\nimport { Bubble } from \"../styles/ui\";\nimport ProductSlider from \"../components/ui/ProductSlider\";\nimport WxButton from \"../styles/components/button\";\nimport { Modal, OptIn, ProductPreview, Footer, ProductSearch, CategoryRow } from \"../components\";\nimport useModal from \"../hooks/useModal\";\nimport * as vars from \"../styles/variables\";\nimport { PageLoader } from '../components/ui'\nimport { useViewportCheck } from \"../hooks\";\n\nexport default function HomePage(props) {\n  let featured, popular\n  const products = useSelector((state) => state.products);\n  const { viewport } = useViewportCheck()\n  console.log('PRODUCTS ', products) \n\n  if (products.products) { \n     featured = products.products.filter(\n      (el) => el.product_featured === true\n    ) \n\n   popular = products?.products.sort((a, b) =>\n    a.product_sold_quantity > b.product_sold_quantity ? 1 : -1\n  )\n  }\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  const { isShowing, toggle } = useModal({selectedProduct, products})\n  const [selectedProduct, setSelectedProduct] = useState({});\n  const [currentCart, setCurrentCart] = useState([]);\n  const [ isLoading, setIsLoading ] = useState(history.action === 'POP')\n\n  const envVar = process.env.RAZZLE_STRIPE_PRIVATE_KEY\n\n  // Optin State - later add to custom optin hook\n\n  const [optinMail, setOptinMail ] = useState({'email': ''})\n\n  useEffect(() => {\n    console.log(\"KEYS: \", envVar, history)\n    if (process.browser) {\n      const cartInStorage = localStorage.getItem(\"soap-cart\");\n      if (cartInStorage) {\n        setCurrentCart(JSON.parse(cartInStorage));\n        dispatch({\n          type: \"SET_INITIAL_BASKET\",\n          payload: JSON.parse(cartInStorage),\n        });\n      }\n    }\n    if (products.products.length || history.action === 'PUSH') {\n      setIsLoading(false)\n      return;\n    } \n    _apiCall();\n  }, [, history.action]);\n\n  const _apiCall = async () => {\n    setIsLoading(true)\n    const res = await myApi.send(\"/products\", \"GET\", undefined, \"public\");\n    if (res) {\n      dispatch({ type: \"FETCH_PRODUCTS\", payload: res });\n      setIsLoading(false)\n    }\n    console.log(\"MYAPI PRODUCTS \", res);\n\n    console.log(\"HOME PROPS \", props);\n  };\n\n  useEffect(() => {\n    console.log(\"Changed Cart\", currentCart);\n  }, [currentCart]);\n\n  const handleClick = (id) => {\n    console.log(\"event\");\n    const selected = products.products.filter((product) => product.id === id);\n    setSelectedProduct(selected[0]);\n    console.log(\"SELECTED\", selectedProduct);\n    toggle();\n  };\n\n  const viewProduct = (id) => {\n    history.push(`/product/${id}`);\n  };\n\n  return (\n    <>\n    { \n      isLoading ? <PageLoader />  \n    : \n    <>\n      <Hero viewPort={viewport} sm={viewport < 916 ? true : false}>\n        <img\n          src=\"/drips.png\"\n          alt=\"drips\"\n          style={{\n            float: \"right\",\n            width: \"500px\",\n            transform: \"translateY(-30px)\",\n          }}\n        />\n        { viewport > 963 &&\n          <img\n            src=\"/logo-big.svg\"\n            alt=\"chunky soap\"\n            style={{\n              float: \"left\",\n              width: \"450px\",\n              transform: \"translateX(-40px)\",\n            }}\n          />\n        }\n        {viewport > 961 ? \n        <>\n          <img\n            className=\"girl-pic\"\n            src=\"/girl.webp\"\n            alt=\"chunky soap girl\"\n            style={{\n              position: \"absolute\",\n              width: \"480px\",\n              transform: \"translateX(-120px)\",\n              top: 188,\n            }}\n          />\n        \n        {vars.heroBubbles.map((b, i) => (\n          <Bubble {...b} key={i} />\n        ))}\n        <div\n          style={{ top: 260, left: \"800px\", width: 550, position: \"absolute\" }}\n        >\n          <BannerHeading>\n            Natural soap bars & creams for all skin types\n          </BannerHeading>\n          <BannerHeading2>Because beauty is a fragile gift..</BannerHeading2>\n          <WxButton primary big style={{marginLeft: '70px', marginTop: '50px'}}>\n            <div className=\"script-font\">\n             Visit Shop\n            </div>\n          </WxButton>\n        </div>\n        </>\n        :\n        <>\n          <img\n            className=\"girl-pic\"\n            src=\"/oversholder.webp\"\n            alt=\"chunky soap girl\"\n            style={{\n              position: \"absolute\",\n              maxWidth: \"330px\",\n              transform: \"translateX(-120px)\",\n              top: 105,\n              left: 70\n            }}\n          />\n        </>\n    }\n      </Hero >\n      <Container>\n        {viewport > 961 && \n        <Bubbles>\n          {vars.bodyBubbles.map((b, i) => (\n            <Bubble {...b} key={i} />\n          ))}\n        </Bubbles>\n}\n        <ProductSearch sm={viewport < 450}/>\n        <SectionHeading>Featured Products</SectionHeading>\n        <ProductSlider perPage={3} data={featured} handleClick={handleClick} />\n        <CategoryRow viewPort={viewport}/>\n        <SectionHeading>Most Popular Products</SectionHeading>\n        <ProductSlider perPage={3} data={popular} handleClick={handleClick} />\n      </Container>\n      <div style={{ marginTop: '-100px'}}>\n      <OptIn \n        cols=\"100%\" \n        height={200}\n        valid={false}\n        loading={false}\n        btnText=\"Subscribe\"\n        placeholder=\"your email address\" \n        label=\"Subscribe to our newsletter to get special deals\"\n        handleChange={(e) => {setOptinMail({...optinMail, ['email']: e.target.value})}}\n        handleSubmit={() => { console.log('submitting: ', optinMail)}}\n        />\n      </div>\n      <Footer height={800} />\n      <Modal isShowing={isShowing} hide={toggle}>\n        <ProductPreview product={selectedProduct} viewProduct={viewProduct} />\n      </Modal>\n      </>\n    }\n    </>\n  );\n}\n\nconst Bubbles = styled.div`\n  max-width: 100vw;\n  overflow: hidden;\n`\n","import React, { useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { withHero } from \"../components/layout\";\nimport { ProductSlider, PageLoader } from \"../components/ui\";\nimport { Container } from \"../styles/layout\";\nimport { Modal, OptIn, ProductPreview, Footer } from \"../components\";\nimport { myApi } from '../helpers'\nimport useModal from \"../hooks/useModal\";\n\nconst CategoriesPage = (props) => {\n  const {\n    match: {\n      params: { _id },\n    },\n  } = props;\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  const products = useSelector(state => state.products);\n  const [filteredProducts, setFilteredProducts] = useState([]);\n  const { isShowing, toggle, handleClick, selectedProduct } = useModal({products})\n  const [ isLoading, setIsLoading ] = useState(history.action === 'POP')\n\n  useEffect(() => {\n    (async() => {\n        await _apiCall()\n        filterProductsById()\n     setIsLoading(false)\n    })()\n    console.log(\"GAT PAGE PRODS \", products)\n  }, [products, _id, history.action]);\n\n\n  const viewProduct = (id) => {\n    history.push(`/product/${id}`);\n  };\n\n  const _apiCall = async () => {\n    if (products.products.length > 0) return\n    const data = await myApi.send(`/products`, 'GET', undefined, 'public');\n    dispatch({ type: \"FETCH_PRODUCTS\", payload: data });\n  };\n\n  const filterProductsById = () => {\n    const filtered = products.products.filter(product => product.categories[0]._id === _id)\n    setFilteredProducts(filtered)\n    console.log(\"FILTERED \", filtered, _id )\n  }\n\nconst renderContent = () => {\n  return (\n    <>\n      <Container>\n        {\n          filteredProducts &&\n          <ProductSlider perPage={3} data={filteredProducts} handleClick={handleClick} />\n        }\n      </Container>\n      <Footer />\n      <Modal isShowing={isShowing} hide={toggle}>\n        <ProductPreview product={selectedProduct} viewProduct={viewProduct} />\n      </Modal>\n    </>\n  );\n}\n\nconst renderLoadingScreen = () => {\n  return (\n    <PageLoader />\n  )\n}\n\nreturn (\n  <>\n  {\n  !isLoading ? renderContent() : renderLoadingScreen() \n    }\n  </>\n)\n};\n\nexport default withHero({ component: CategoriesPage });\n","import React, { useEffect, useState, useReducer } from 'react'\nimport { useSelector } from 'react-redux'\nimport styled from 'styled-components'\nimport { Container , Section, Wrapper} from '../styles/layout'\nimport { WxStep, SimpleTextInput } from '../components/ui'\nimport { checkoutReducer, CheckoutSteps } from '../components'\nimport { ProductFrame, Bubble, Step } from '../styles/ui'\nimport { BannerHeading, Heading1, Heading2, Paragraph } from '../styles/typography'\nimport { BasketWrapper, ProductRow, Divider } from '../styles/ui/basket'\nimport * as vars from '../styles/variables'\nimport * as fn from '../helpers/functions'\n\nconst CheckoutPage = () => {\n    const { basket } = useSelector(state => state.basket)\n    const [ total, setTotal ] = useState(0)\n    const [ postage, setPostage ] = useState(0.00)\n\n    const initialState = {\n        step: 1\n    }\n\n    const [cartState, cartDispatch] = useReducer(checkoutReducer, initialState)\n\n    useEffect(() => {\n        if (fn.getCartTotal(basket.products) < 25 || basket.postage > 4 ) {\n            console.log(\"BASKET POSTAGE \", basket.postage)\n            setPostage(basket.postage || 0.00)\n        } else {\n            setPostage(0)\n        }\n        setTotal(fn.getCartTotal(basket.products, postage))\n    }, [basket])\n\n    useEffect(() => {\n        setTotal(fn.getCartTotal(basket.products, postage))\n    }, [postage])\n\n\n    const steps = [\n        {no: 1, label: 'Account'},   \n        {no: 2, label: 'Shipping'},   \n        {no: 3, label: 'Payment'},   \n        {no: 4, label: 'Success'},   \n    ]\n    return (\n        <>\n            <img src=\"/drips-dark.svg\" style={{ position: 'absolute', right: 0, top: 0, width: 500, zIndex: 0 }}/>\n        <Section light height={1500}>\n            <Container>\n                    <Heading1>Checkout</Heading1>\n                <CheckoutWrapper>\n                    <CheckoutActions>\n                        <CheckoutSteps />\n                    </CheckoutActions>\n                    {!cartState.step === 4 &&\n                    <BasketSection style={{borderLeft: '1px solid #D8D8D8'}}>\n                <BasketWrapper style={{transform: 'translateY(-120px)'}}>\n                <ProductRow>\n                    <Heading2 style={{flex: 3}}>Your Basket</Heading2>\n                </ProductRow>\n                <div style={{maxHeight: 700 }}>\n\n                    {basket.products.length > 0 ?  basket.products.map(el => \n                        \n                        <ProductRow key={el._id}>\n                        <Paragraph style={{flex: 1}} big>\n                            {el.product_qty} x\n                        </Paragraph>\n                            <ProductFrame sml style={{flex: 1, marginRight: 20}} >\n                                <img src={el.product_picture_1} \n                                style={{display: 'block', maxHeight: '70px', maxWidth: '70px', width: 'auto', height: 'auto'}}\n                                />\n                                {/* <img src={`http://localhost:1337${el.product_picture_1}`} \n                                style={{display: 'block', maxHeight: '70px', maxWidth: '70px', width: 'auto', height: 'auto'}}\n                                /> */}\n                            </ProductFrame>\n                            <div style={{flex: 3, paddingRight: 20}}>\n                            <Paragraph>\n                                {el.product_name}\n                            </Paragraph>\n                            </div>\n                            <div style={{flex: 1, marginRight: 10, display: 'flex', alignItems: 'center', justifyContent: 'space-around'}}>\n                                <Paragraph>\n                                    &pound;{el.total_price.toFixed(2)}\n                                </Paragraph>\n                                {/* <Trash2 size={32} color=\"#837D7D\" style={{transform: 'translateX(20px)'}}/> */}\n                            </div>\n                        </ProductRow>\n                    ) :  <Heading2>You Dont Have any Items in you basket yet</Heading2>\n                    }\n                </div>\n                    <ProductRow>\n                        <Divider />\n                    </ProductRow>\n                    <ProductRow narrow>\n                            <SimpleTextInput withButton buttonText=\"Apply\" label=\"Redeem Coupon / Discount Code\" type=\"text\" placeholder=\"COUPON CODE\" handleChange={() => {}}/>\n                    </ProductRow>\n                    <ProductRow narrow>\n                            Subtotal. &pound; {fn.getCartTotal(basket.products).toFixed(2) }\n                    </ProductRow>\n                    <ProductRow narrow>\n                            Postage. &pound;{postage.toFixed(2)}\n                    </ProductRow>\n                    <ProductRow narrow>\n                            Sales Tax. &pound; {0.00.toFixed(2)}\n                    </ProductRow>\n                    <ProductRow >\n                        <Heading1>\n                            Total. &pound;{total.toFixed(2)}\n                        </Heading1>\n                    </ProductRow>\n                </BasketWrapper>\n                    </BasketSection>\n}   \n                </CheckoutWrapper>\n            </Container>\n        </Section>\n        </>\n    )\n}\n\nexport default CheckoutPage\n\nconst CheckoutWrapper = styled.div`\n    display: flex;\n    flex-wrap: wrap;\n    max-width: 1394px;\n    margin: 50px auto;\n`\n\nconst CheckoutActions = styled.div`\n    width: 50%;\n    min-width: 700px;\n    flex: 2;\n    padding: 0px;\n    margin: 0px 10px 20px 10px;   \n`\nconst BasketSection = styled.div`\n    flex: 1.3;\n    ${'' /* border: 1px solid gray; */}\n    min-width: 450px;\n    min-height: 800px;\n    margin-top: 40px;\n    padding: 20px 10px;\n       &::-webkit-scrollbar {\n        display: none;\n        }\n`\nconst Steps = styled.div`\n  position: absolute;\n   min-width: 750px;\n   margin-top: 10px;\n   ${'' /* right: 40%; */}\n   left: 12%;\n   text-align: center;\n`","import React, { useEffect, useState, useCallback } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useParams, useHistory } from 'react-router-dom'\nimport styled from 'styled-components'\nimport {  MinusCircle, PlusCircle, CreditCard, ArrowLeft } from 'react-feather'\nimport { Heading1, Heading2, Heading3, Paragraph } from '../styles/typography'\nimport { Container, Section, Wrapper, ButtonRow} from '../styles/layout'\nimport { myApi } from '../helpers'\nimport { ScrollToTop } from '../components'\nimport ProductFrame from '../styles/ui/productFrame'\nimport AddToCart from '../components/ui/AddToCartBtn'\nimport AnimatedButton from '../components/ui/AnimatedButton'\n\n const ProductPage = (props) => {\n\n    const { _id } = useParams()\n    const  { currentProduct } =  useSelector(({ currentProduct:{ currentProduct} }) => ({ currentProduct}))\n    const [ quantity, setQuantity ] = useState(1)\n    const dispatch = useDispatch()\n    const history = useHistory()\n\n    useEffect(() => {\n        apiCall()\n    }, [_id])\n\n    const apiCall = async() => {\n        const res = await myApi.send(`/products?id=${_id}`, 'GET', undefined, 'public')\n        console.log('Product page: ', res)\n        dispatch({type: 'FETCH_PRODUCT', payload: res[0]})\n    }\n\n    const decreaseQuantity = useCallback(() => {\n         const newQuantity = quantity >= 2 ? quantity - 1 : quantity\n         console.log(newQuantity)\n         setQuantity(newQuantity)\n    })\n\n    const increaseQuantity = useCallback(() => {\n        console.log(\"triggered\")\n        const newQuantity = quantity < 100 ? quantity + 1 : quantity\n         console.log(newQuantity)\n        setQuantity(newQuantity)\n    })\n\n    const { product_name, product_short_description, product_picture_1, product_long_description, product_price, product_discount } = currentProduct\n    // const { formats: {thumbnail} } = product_picture_1\n    return (\n        <>\n            <img src=\"/drips-dark.svg\" style={{ position: 'absolute', right: 0, top: 70, width: 500, zIndex: 1 }}/>\n        <Container>\n            <ScrollToTop />\n            <Wrapper>\n                <Section light height={1050} >\n                    {\n                        currentProduct &&\n                        <>\n                            <div style={{padding: '30px 0px 100px 0px', maxWidth: 800, zIndex: 1000, position: 'relative'}}>\n                                <Heading1>{product_name}</Heading1>\n                                <Heading2 light>{product_short_description}</Heading2>\n                            </div>\n                            <div style={{display: 'flex', flexDirection: \"columm\", paddingLeft: '200' , width: '100%', height: 700, zIndex: 2000, position: 'relative'}}>\n                                <div id=\"leftside\" style={{flex: 2, paddingLeft: 0, display: 'flex', flexDirection: 'column', justifyContent: 'space-between', textAlign: 'right'}}>\n                                    <ProductFrame >\n                                        <img src={product_picture_1 && `${product_picture_1.url}`} />\n                                    </ProductFrame>\n                                        <div style={{flex: 1, marginTop: 50}}>\n                                            {product_discount > 0 &&\n                                                <div style={{display: 'flex', flexDirection: 'row', alignItems: 'baseline', opacity: 0.4, justifyContent: 'flex-end'}}>\n                                                <Heading3>Original Price. </Heading3>\n                                                <Heading1> &pound;{(product_price).toFixed(2)}</Heading1>\n                                                </div>\n                                            }\n                                            <div style={{display: 'flex', flexDirection: 'row', alignItems: 'baseline', justifyContent: 'flex-end'}}>\n                                            <Heading3>{product_discount > 0 ? 'Sale Price.' : 'Price.' }</Heading3>\n                                            <Heading1> &pound;{(product_price - (product_price * product_discount / 100)).toFixed(2)}</Heading1>\n                                            </div>\n                                        </div>\n                                        <div style={{flex: 1, display: 'flex', flexDirection: 'row', alignItems: 'center', justifyContent: 'flex-end', width: \"100%\", margin: '10px 0px'}}>\n                                            <Paragraph>Quantity</Paragraph>\n                                          <SimpleButton onClick={() => decreaseQuantity()}>\n                                              <MinusCircle color=\"pink\" size={34}/>\n                                          </SimpleButton> {quantity}\n                                          <SimpleButton onClick={() => increaseQuantity()} >\n                                           <PlusCircle color=\"pink\" size={34}/>\n                                          </SimpleButton>\n                                        </div>\n                                        <div style={{flex: 1}}>\n                                            <AddToCart quantity={quantity} product={currentProduct} function=\"add\" />\n                                        </div>\n                                </div>\n                                <div id=\"rightside\" style={{flex: 4, paddingLeft: 100, paddingRight: 100}}>\n                                    <Heading2 dark>Product Description</Heading2>\n                                        <div style={{minHeight: 540}}>\n                                            <Paragraph>{product_long_description}</Paragraph>\n                                        </div>\n                                        <ButtonRow>\n                                            <AnimatedButton  big text=\"Back\"><ArrowLeft /></AnimatedButton>\n                                            <AnimatedButton big primary text=\"View Basket\" handleClick={() => history.push('/basket')}><CreditCard/></AnimatedButton>\n                                        </ButtonRow>\n                                </div>\n                            </div>\n                        </>\n                    }\n                </Section>\n            </Wrapper>\n        </Container>\n        </>\n    )\n}\n\nexport default ProductPage\n\nconst SimpleButton = styled.button`\n    background-color: transparent;\n    border: transparent solid 1px;\n    width: 50px;\n    height: 50px;\n`","import React, { useEffect, useState } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { useHistory } from'react-router-dom'\nimport { withHero } from  '../components/layout'\nimport { ProductSlider } from '../components/ui'\nimport { Container, Section } from '../styles/layout'\nimport { SectionHeading } from '../styles/typography'\nimport { Modal, Optin, ProductSearch, ProductPreview, Footer } from '../components'\nimport useModal from '../hooks/useModal'\n\nconst SearchResults = props => {\n\n    const dispatch = useDispatch()\n    const history = useHistory();\n    let searchResults = useSelector(state => state[\"searchResults\"].searchResults[0])\n    const products = useSelector(state => state.products);\n\n    const { isShowing, toggle, handleClick, selectedProduct } = useModal({products})\n\n    useEffect(() => {\n        console.log(\"__PRODUCTS: \", searchResults)\n    }, [searchResults])\n\n  const viewProduct = (id) => {\n    history.push(`/product/${id}`);\n  };\n\n    return (\n        <>\n            <ProductSearch />\n                { searchResults ?\n                    <Container>\n                        <SectionHeading>Your in luck!, here a your matches</SectionHeading>\n                        <ProductSlider perPage={3} data={searchResults} handleClick={handleClick} />\n                    </Container>\n                    :\n                    <Container>\n                        <Section light height={400}>\n                            <SectionHeading>Ooops! We don't have that</SectionHeading>\n                        </Section>\n                    </Container>\n                }\n            <Footer />\n            <Modal isShowing={isShowing} hide={toggle}>\n                <ProductPreview product={selectedProduct} viewProduct={viewProduct} />\n            </Modal>\n        </>\n    )\n}\n\nexport default withHero({ component: SearchResults})","import React, { useEffect, useState } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport jsPDF from 'jspdf'\nimport { myApi } from '../helpers'\nimport { Heading3, SubHeading1, Paragraph } from '../styles/typography'\nimport {Section, Container, Invoice, Logo, Address, ProductName, ProductQty, ProductTotal, Footer, FooterTotal} from '../styles/layout'\n\nconst InvoicePage = props => {\n\n  const {\n    match: {\n      params: { _id },\n    },\n  } = props;\n\n  const history = useHistory()\n  const [ order, setOrder ] = useState(undefined)\n\n  useEffect(() => {\n    apiCall()\n  }, [])\n\n  const apiCall = async () => {\n    const order = await myApi.send(`/orders/${_id}`, 'GET', undefined, 'public')\n    setOrder(order)\n  }\n\n  useEffect(() => {\n    console.log(\"ORDER: \", order)\n  }, [order])\n\n  const generateInvoice = () => {\n    const doc = new jsPDF('p', 'pt', 'a4')\n    doc.html(document.querySelector('#content'),\n    {\n        callback: function(pdf){\n            let pageCount = doc.internal.getNumberOfPages()\n            pdf.deletePage(pageCount)\n            pdf.save(`${_id}.pdf`)\n        }\n    })\n  }\n\n  const renderInvoice = () => {\n    const {\n      order_items,\n      order_total,\n      order_carrier: {\n        shipping_carrier,\n      },\n      order_customer: {\n        customer_address1,\n        customer_address2,\n        customer_firstname,\n        customer_lastname,\n        customer_town,\n        customer_postcode\n      }\n      } = order\n    return (\n        <Invoice id='invoice'>\n          <Logo>\n            <Heading3>\n              <img src=\"/logo.jpg\" style={{width: '130px'}}/><br/>\n               RECEIPT\n            </Heading3>\n          </Logo>\n          <Address >\n              <Paragraph sml>\n                {customer_firstname} {customer_lastname}\n              </Paragraph>\n              <Paragraph sml>\n              {customer_address1}\n              </Paragraph>\n              <Paragraph sml>\n              {customer_address2}\n              </Paragraph>\n              <Paragraph sml>\n              {customer_town}\n              </Paragraph>\n              <Paragraph sml>\n              {customer_postcode}\n              </Paragraph>\n          </Address>\n          <ProductName>\n            <Paragraph sml heavy>\n              Item\n            </Paragraph>\n\n          {order_items && order_items.products.map((item, i) => (\n            <p key={i}>\n              <Paragraph sml>\n                {item.product_name}\n              </Paragraph>\n            </p>\n          )) }\n          <Paragraph sml>\n            Postage: {shipping_carrier}\n          </Paragraph>\n            </ProductName>\n          <ProductQty>\n            <Paragraph sml heavy>\n              Quantity\n            </Paragraph>\n            {order_items && order_items.products.map((item, i) => (\n                <Paragraph sml key={i}>\n                  {item.product_qty}\n                </Paragraph>\n            )) }\n          </ProductQty>\n          <ProductTotal>\n            <Paragraph sml heavy>\n            Price\n            </Paragraph>\n            {order_items && order_items.products.map((item, i) => (\n              <Paragraph sml key={i}>\n                &pound; {item.total_price.toFixed(2)}\n              </Paragraph>\n            )) }\n            <Paragraph sml>\n              &pound; {order_items.postage.toFixed(2)}\n            </Paragraph>\n          </ProductTotal>\n          <Footer>\n            <Paragraph>Total</Paragraph>\n          </Footer>\n          <FooterTotal>\n            <Paragraph heavy>\n              &pound; {order_total}\n            </Paragraph>\n          </FooterTotal>\n        </Invoice>\n    )\n  }\n\n    return (\n        <div>\n        <Container>\n          <Section light>\n          <button style={{marginBottom: '30px'}} onClick={() => history.push('/admin')}>Back</button>\n          <button style={{marginBottom: '30px'}} onClick={() => generateInvoice()}>Download Invoice</button>\n            <div id=\"content\" style={{height: '838px', width: '591px', padding: '4px'}}>\n                { order && renderInvoice() }\n            </div>\n          </Section>\n        </Container>\n        </div>\n    )\n}\n\nexport default InvoicePage","import React from 'react';\nimport { createStore } from 'redux'\nimport { Provider } from 'react-redux'\nimport { Route, Switch } from 'react-router-dom';\nimport combineReducers from '../src/reducers'\nimport { HomePage, CheckoutPage, ProductPage, CategoriesPage, AdminPage, SearchResults, AuthPage, InvoicePage} from './containers'\nimport { Basket, ScrollToTop } from '../src/components';\nimport PrivateRoute from './components/PrivateRoute'\nimport { loadStripe } from '@stripe/stripe-js'\nimport { Elements } from '@stripe/react-stripe-js'\nimport { WithNavbar } from '../src/components/layout'\nimport './styles/global.css'\nconst store = createStore(combineReducers)\n\n// const stripePromise = loadStripe('pk_test_3o7rovRbtC8Fmec24VShO7pU')\nconst stripePromise = loadStripe(process.env.RAZZLE_STRIPE_PUBLIC_KEY)\n // ADD PUBLISHABLE KEY\n // sk_test_rvboOk0S3wSR1tPGYuzzcjpV\n//  console.log(\"DEV: \", process.env.RAZZLE_API_URI)\nconst App = () => (\n  <Provider store={store}>\n    <Elements stripe={stripePromise}>\n        <Switch>\n          <WithNavbar color=\"light\">\n            <Route exact path=\"/\" component={HomePage} />\n            <Route path=\"/search-results\" component={SearchResults} />\n            <Route path=\"/basket\" component={Basket} />\n            <Route exact path=\"/checkout\" component={CheckoutPage} />\n            <Route path=\"/product/:_id\" exact component={ProductPage} />\n            <Route path=\"/category/:_id\" component={CategoriesPage} />\n            <Route path=\"/authenticate\" component={AuthPage} />\n            <PrivateRoute path=\"/admin\" store component={AdminPage} />\n            <PrivateRoute path=\"/admin/invoices/:_id\" component={InvoicePage} />\n          </WithNavbar>\n        </Switch>\n    </Elements>\n  </Provider>\n);\n\nexport default App;\n","import Stripe from 'stripe'\n\nconst stripe = new Stripe(process.env.RAZZLE_STRIPE_PRIVATE_KEY)\n\nexport default async(req, res) => {\n    try {\n        const { amount } = req.query\n        console.log(amount)\n        const paymentIntent = await stripe.paymentIntents.create({\n            amount,\n            currency: 'gbp'\n        });\n\n        res.status(200).send(paymentIntent.client_secret)\n    } catch(err) {\n        res.status(500).json({statusCode: 500, message: err.message})\n    }\n}","import App from './App';\nimport React from 'react';\nimport { StaticRouter } from 'react-router-dom';\nimport express from 'express';\nimport { renderToString } from 'react-dom/server';\nimport { payment_intents } from '../src/api'\nconst path = require('path')\n\nconst stripeCallHandler = (req, res) => {\n  console.log(\"STRIPE HANDLER \", req.query.data)\n  res.status(200).json(JSON.parse(req.query.data))\n}\n\nconst assets = require(process.env.RAZZLE_ASSETS_MANIFEST);\nconst publicFolder = process.env.NODE_ENV === 'production' ? path.join(__dirname, '../build/public') : process.env.RAZZLE_PUBLIC_DIR;\n\n\nconst server = express();\nserver\n  .disable('x-powered-by')\n  .use(express.static(publicFolder))\n  .get('/api/stripe-payment', stripeCallHandler)\n  .get('/api/payment_intents', payment_intents)\n  .get('/*', (req, res) => {\n    const context = {};\n    const markup = renderToString(\n      <StaticRouter context={context} location={req.url}>\n        <App />\n      </StaticRouter>\n    );\n\n    if (context.url) {\n      res.redirect(context.url);\n    } else {\n      res.status(200).send(\n        `<!doctype html>\n    <html lang=\"\">\n    <head>\n        <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n        <meta charset=\"utf-8\" />\n        <title>Chunky Soap Company</title>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n        ${\n          assets.client.css\n            ? `<link rel=\"stylesheet\" href=\"${assets.client.css}\">`\n            : ''\n        }\n        ${\n          process.env.NODE_ENV === 'production'\n            ? `<script src=\"${assets.client.js}\" defer></script>`\n            : `<script src=\"${assets.client.js}\" defer crossorigin></script>`\n        }\n    </head>\n    <body>\n        <div id=\"root\">${markup}</div>\n    </body>\n</html>`\n      );\n    }\n  });\n\nexport default server;\n"],"sourceRoot":""}